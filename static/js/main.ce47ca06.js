/*! For license information please see main.ce47ca06.js.LICENSE.txt */
(()=>{"use strict";var e={730:(e,t,n)=>{var i=n(43),r=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,i,r,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,F=Object.assign;function j(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(co){var i=co}Reflect.construct(e,[],t)}else{try{t.call()}catch(co){i=co}e.call(t.prototype)}else{try{throw Error()}catch(co){i=co}e()}}catch(co){if(co&&i&&"string"===typeof co.stack){for(var r=co.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function V(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case x:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=W(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Tu){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),i=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Se=null;function Ee(e){if(e=br(e)){if("function"!==typeof xe)throw Error(s(280));var t=e.stateNode;t&&(t=_r(t),xe(e.stateNode,e.type,t))}}function Te(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ie(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Re=!1;function Me(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ce(e,t,n)}finally{Re=!1,(null!==ke||null!==Se)&&(Ae(),Ie())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var i=_r(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Pe(e,t,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Fe=null,je=!1,ze=null,Ue={onError:function(e){Le=!0,Fe=e}};function Ve(e,t,n,i,r,s,o,a,l){Le=!1,Fe=null,Pe.apply(Ue,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(s(188))}function We(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return He(r),e;if(o===i)return He(r),t;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=r.unstable_scheduleCallback,Ge=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,Qe=r.unstable_requestPaint,Xe=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=ht(a):0!==(s&=o)&&(i=ht(s))}else 0!==(o=n&~r)?i=ht(o):0!==s&&(i=ht(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,xt,kt,St,Et,Tt=!1,It=[],Ct=null,At=null,Rt=null,Mt=new Map,Nt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Lt(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&xt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ft(e){var t=vr(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=br(n))&&xt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);we=i,n.target.dispatchEvent(i),we=null,t.shift()}return!0}function zt(e,t,n){jt(e)&&n.delete(t)}function Ut(){Tt=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==At&&jt(At)&&(At=null),null!==Rt&&jt(Rt)&&(Rt=null),Mt.forEach(zt),Nt.forEach(zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return Vt(t,e)}if(0<It.length){Vt(It[0],e);for(var n=1;n<It.length;n++){var i=It[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==At&&Vt(At,e),null!==Rt&&Vt(Rt,e),Mt.forEach(t),Nt.forEach(t),n=0;n<Dt.length;n++)(i=Dt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var $t=w.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,i){var r=bt,s=$t.transition;$t.transition=null;try{bt=1,Kt(e,t,n,i)}finally{bt=r,$t.transition=s}}function qt(e,t,n,i){var r=bt,s=$t.transition;$t.transition=null;try{bt=4,Kt(e,t,n,i)}finally{bt=r,$t.transition=s}}function Kt(e,t,n,i){if(Ht){var r=Yt(e,t,n,i);if(null===r)Hi(e,t,i,Gt,n),Pt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,i,r),!0;case"dragenter":return At=Lt(At,e,t,n,i,r),!0;case"mouseover":return Rt=Lt(Rt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Mt.set(s,Lt(Mt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Nt.set(s,Lt(Nt.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Pt(e,i),4&t&&-1<Ot.indexOf(e)){for(;null!==r;){var s=br(r);if(null!==s&&_t(s),null===(s=Yt(e,t,n,i))&&Hi(e,t,i,Gt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Hi(e,t,i,null,n)}}var Gt=null;function Yt(e,t,n,i){if(Gt=null,null!==(e=vr(e=_e(i))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,i=n.length,r="value"in Xt?Xt.value:Xt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[s-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(F({},fn,{dataTransfer:0})),mn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Sn}var Tn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=sn(Tn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Rn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=sn(Mn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Pn=null;u&&"documentMode"in document&&(Pn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Pn,Fn=u&&(!On||Pn&&8<Pn&&11>=Pn),jn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Wn(e,t,n,i){Te(i),0<(t=qi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Gn(e){ji(e,0)}function Yn(e){if(K(wr(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){qn&&(qn.detachEvent("onpropertychange",ni),Kn=qn=null)}function ni(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Wn(t,Kn,e,_e(e)),Me(Gn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Kn=n,(qn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function si(e,t){if("click"===e)return Yn(t)}function oi(e,t){if("input"===e||"change"===e)return Yn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var o=ui(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,yi=null,vi=null,bi=!1;function wi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==mi||mi!==G(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=qi(yi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function _i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xi={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},ki={},Si={};function Ei(e){if(ki[e])return ki[e];if(!xi[e])return e;var t,n=xi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Si)return ki[e]=n[t];return e}u&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Ti=Ei("animationend"),Ii=Ei("animationiteration"),Ci=Ei("animationstart"),Ai=Ei("transitionend"),Ri=new Map,Mi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(e,t){Ri.set(e,t),l(t,[e])}for(var Di=0;Di<Mi.length;Di++){var Oi=Mi[Di];Ni(Oi.toLowerCase(),"on"+(Oi[0].toUpperCase()+Oi.slice(1)))}Ni(Ti,"onAnimationEnd"),Ni(Ii,"onAnimationIteration"),Ni(Ci,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(Ai,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Li=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pi));function Fi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,a,l,c){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Fe;Le=!1,Fe=null,je||(je=!0,ze=u)}}(i,t,void 0,e),e.currentTarget=null}function ji(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Fi(r,a,c),s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Fi(r,a,c),s=l}}}if(je)throw e=ze,je=!1,ze=null,e}function zi(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var i=e+"__bubble";n.has(i)||($i(t,e,2,!1),n.add(i))}function Ui(e,t,n){var i=0;t&&(i|=4),$i(n,e,i,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function Bi(e){if(!e[Vi]){e[Vi]=!0,o.forEach((function(t){"selectionchange"!==t&&(Li.has(t)||Ui(t,!1,e),Ui(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vi]||(t[Vi]=!0,Ui("selectionchange",!1,t))}}function $i(e,t,n,i){switch(Qt(t)){case 1:var r=Wt;break;case 4:r=qt;break;default:r=Kt}n=r.bind(null,t,n,e),r=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Hi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=vr(a)))return;if(5===(l=o.tag)||6===l){i=s=o;continue e}a=a.parentNode}}i=i.return}Me((function(){var i=s,r=_e(n),o=[];e:{var a=Ri.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ti:case Ii:case Ci:l=yn;break;case Ai:l=Rn;break;case"scroll":l=dn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Ne(p,d))&&u.push(Wi(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,r),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vr(c)&&!c[pr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?vr(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wr(l),f=null==c?a:wr(c),(a=new u(g,p+"leave",l,n,r)).target=h,a.relatedTarget=f,g=null,vr(r)===i&&((u=new u(d,p+"enter",c,n,r)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Ki(f))p++;for(f=0,g=d;g;g=Ki(g))f++;for(;0<p-f;)u=Ki(u),p--;for(;0<f-p;)d=Ki(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Ki(u),d=Ki(d)}u=null}else u=null;null!==l&&Gi(o,a,l,u,!1),null!==c&&null!==h&&Gi(o,h,c,u,!0)}if("select"===(l=(a=i?wr(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Qn;else if(Hn(a))if(Xn)m=oi;else{m=ri;var y=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=si);switch(m&&(m=m(e,i))?Wn(o,m,n,r):(y&&y(e,a,i),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=i?wr(i):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mi=y,yi=i,vi=null);break;case"focusout":vi=yi=mi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,wi(o,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":wi(o,n,r)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in(Xt=r)?Xt.value:Xt.textContent,Bn=!0)),0<(y=qi(i,b)).length&&(b=new wn(b,e,null,n,r),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(zn=!0,jn);case"textInput":return(e=t.data)===jn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Un(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=qi(i,"onBeforeInput")).length&&(r=new wn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=v))}ji(o,t)}))}function Wi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Ne(e,n))&&i.unshift(Wi(e,s,r)),null!=(s=Ne(e,t))&&i.push(Wi(e,s,r))),e=e.return}return i}function Ki(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gi(e,t,n,i,r){for(var s=t._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Ne(n,s))&&o.unshift(Wi(n,l,a)):r||null!=(l=Ne(n,s))&&o.push(Wi(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yi=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function Xi(e){return("string"===typeof e?e:""+e).replace(Yi,"\n").replace(Qi,"")}function Ji(e,t,n){if(t=Xi(t),Xi(e)!==t&&n)throw Error(s(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Bt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Bt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,fr="__reactProps$"+hr,pr="__reactContainer$"+hr,gr="__reactEvents$"+hr,mr="__reactListeners$"+hr,yr="__reactHandles$"+hr;function vr(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[dr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function br(e){return!(e=e[dr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _r(e){return e[fr]||null}var xr=[],kr=-1;function Sr(e){return{current:e}}function Er(e){0>kr||(e.current=xr[kr],xr[kr]=null,kr--)}function Tr(e,t){kr++,xr[kr]=e.current,e.current=t}var Ir={},Cr=Sr(Ir),Ar=Sr(!1),Rr=Ir;function Mr(e,t){var n=e.type.contextTypes;if(!n)return Ir;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Nr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Dr(){Er(Ar),Er(Cr)}function Or(e,t,n){if(Cr.current!==Ir)throw Error(s(168));Tr(Cr,t),Tr(Ar,n)}function Pr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,$(e)||"Unknown",r));return F({},n,i)}function Lr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ir,Rr=Cr.current,Tr(Cr,e),Tr(Ar,Ar.current),!0}function Fr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Pr(e,t,Rr),i.__reactInternalMemoizedMergedChildContext=e,Er(Ar),Er(Cr),Tr(Cr,e)):Er(Ar),Tr(Ar,n)}var jr=null,zr=!1,Ur=!1;function Vr(e){null===jr?jr=[e]:jr.push(e)}function Br(){if(!Ur&&null!==jr){Ur=!0;var e=0,t=bt;try{var n=jr;for(bt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}jr=null,zr=!1}catch(r){throw null!==jr&&(jr=jr.slice(e+1)),Ke(Ze,Br),r}finally{bt=t,Ur=!1}}return null}var $r=[],Hr=0,Wr=null,qr=0,Kr=[],Gr=0,Yr=null,Qr=1,Xr="";function Jr(e,t){$r[Hr++]=qr,$r[Hr++]=Wr,Wr=e,qr=t}function Zr(e,t,n){Kr[Gr++]=Qr,Kr[Gr++]=Xr,Kr[Gr++]=Yr,Yr=e;var i=Qr;e=Xr;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var s=32-ot(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Qr=1<<32-ot(t)+r|n<<r|i,Xr=s+e}else Qr=1<<s|n<<r|i,Xr=e}function es(e){null!==e.return&&(Jr(e,1),Zr(e,1,0))}function ts(e){for(;e===Wr;)Wr=$r[--Hr],$r[Hr]=null,qr=$r[--Hr],$r[Hr]=null;for(;e===Yr;)Yr=Kr[--Gr],Kr[Gr]=null,Xr=Kr[--Gr],Kr[Gr]=null,Qr=Kr[--Gr],Kr[Gr]=null}var ns=null,is=null,rs=!1,ss=null;function os(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yr?{id:Qr,overflow:Xr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=is;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var i=ns;t&&as(e,t)?os(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!rs)return us(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=cr(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?cr(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=is;e;)e=cr(e.nextSibling)}function fs(){is=ns=null,rs=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=w.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=jc(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Bc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===k?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===N&&vs(s)===t.type)?((i=r(t,n.props)).ref=ms(e,t,n),i.return=e,i):((i=zc(n.type,n.key,n.props,null,e.mode,i)).ref=ms(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$c(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,s){return null===t||7!==t.tag?((t=Uc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=zc(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case x:return(t=$c(t,e.mode,n)).return=e,t;case N:return d(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Uc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===r?c(e,t,n,i):null;case x:return n.key===r?u(e,t,n,i):null;case N:return f(e,t,(r=n._init)(n._payload),i)}if(te(n)||P(n))return null!==r?null:h(e,t,n,i,null);ys(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case _:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case x:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case N:return p(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||P(i))return h(t,e=e.get(n)||null,i,r,null);ys(t,i)}return null}function g(r,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(r,h,a[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(r,h),s=o(y,s,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===a.length)return n(r,h),rs&&Jr(r,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(r,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return rs&&Jr(r,g),c}for(h=i(r,h);g<a.length;g++)null!==(m=p(h,r,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(r,e)})),rs&&Jr(r,g),c}function m(r,a,l,c){var u=P(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(r,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(r,g),a=o(b,a,m),null===h?u=b:h.sibling=b,h=b,g=y}if(v.done)return n(r,g),rs&&Jr(r,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(r,v.value,c))&&(a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return rs&&Jr(r,m),u}for(g=i(r,g);!v.done;m++,v=l.next())null!==(v=p(g,r,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return e&&g.forEach((function(e){return t(r,e)})),rs&&Jr(r,m),u}return function e(i,s,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){n(i,u.sibling),(s=r(u,o.props.children)).return=i,i=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===N&&vs(c)===u.type){n(i,u.sibling),(s=r(u,o.props)).ref=ms(i,u,o),s.return=i,i=s;break e}n(i,u);break}t(i,u),u=u.sibling}o.type===k?((s=Uc(o.props.children,i.mode,l,o.key)).return=i,i=s):((l=zc(o.type,o.key,o.props,null,i.mode,l)).ref=ms(i,s,o),l.return=i,i=l)}return a(i);case x:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=$c(o,i.mode,l)).return=i,i=s}return a(i);case N:return e(i,s,(u=o._init)(o._payload),l)}if(te(o))return g(i,s,o,l);if(P(o))return m(i,s,o,l);ys(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=Bc(o,i.mode,l)).return=i,i=s),a(i)):n(i,s)}}var ws=bs(!0),_s=bs(!1),xs=Sr(null),ks=null,Ss=null,Es=null;function Ts(){Es=Ss=ks=null}function Is(e){var t=xs.current;Er(xs),e._currentValue=t}function Cs(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function As(e,t){ks=e,Es=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ka=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===ks)throw Error(s(308));Ss=e,ks.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Ms=null;function Ns(e){null===Ms?Ms=[e]:Ms.push(e)}function Ds(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ns(t)):(n.next=r.next,r.next=n),t.interleaved=n,Os(e,i)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ps=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function js(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Dl)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Os(e,n)}return null===(r=i.interleaved)?(t.next=t,Ns(i)):(t.next=r.next,r.next=t),i.interleaved=t,Os(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Vs(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,i){var r=e.updateQueue;Ps=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ps=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(d=a).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Vl|=o,e.lanes=o,e.memoizedState=h}}function $s(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Hs={},Ws=Sr(Hs),qs=Sr(Hs),Ks=Sr(Hs);function Gs(e){if(e===Hs)throw Error(s(174));return e}function Ys(e,t){switch(Tr(Ks,t),Tr(qs,e),Tr(Ws,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Er(Ws),Tr(Ws,t)}function Qs(){Er(Ws),Er(qs),Er(Ks)}function Xs(e){Gs(Ks.current);var t=Gs(Ws.current),n=le(t,e.type);t!==n&&(Tr(qs,e),Tr(Ws,n))}function Js(e){qs.current===e&&(Er(Ws),Er(qs))}var Zs=Sr(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var io=w.ReactCurrentDispatcher,ro=w.ReactCurrentBatchConfig,oo=0,ao=null,lo=null,uo=null,ho=!1,fo=!1,po=0,go=0;function mo(){throw Error(s(321))}function yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function vo(e,t,n,i,r,o){if(oo=o,ao=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?ia:ra,e=n(i,r),fo){o=0;do{if(fo=!1,po=0,25<=o)throw Error(s(301));o+=1,uo=lo=null,t.updateQueue=null,io.current=sa,e=n(i,r)}while(fo)}if(io.current=na,t=null!==lo&&null!==lo.next,oo=0,uo=lo=ao=null,ho=!1,t)throw Error(s(300));return e}function wo(){var e=0!==po;return po=0,e}function _o(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===uo?ao.memoizedState=uo=e:uo=uo.next=e,uo}function xo(){if(null===lo){var e=ao.alternate;e=null!==e?e.memoizedState:null}else e=lo.next;var t=null===uo?ao.memoizedState:uo.next;if(null!==t)uo=t,lo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(lo=e).memoizedState,baseState:lo.baseState,baseQueue:lo.baseQueue,queue:lo.queue,next:null},null===uo?ao.memoizedState=uo=e:uo=uo.next=e}return uo}function So(e,t){return"function"===typeof t?t(e):t}function Eo(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=lo,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((oo&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=i):c=c.next=d,ao.lanes|=h,Vl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=i:c.next=l,ai(i,t.memoizedState)||(ka=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,ao.lanes|=o,Vl|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function To(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);ai(o,t.memoizedState)||(ka=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Io(){}function Co(e,t){var n=ao,i=xo(),r=t(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,ka=!0),i=i.queue,Uo(Mo.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==uo&&1&uo.memoizedState.tag){if(n.flags|=2048,Po(9,Ro.bind(null,n,i,r,t),void 0,null),null===Ol)throw Error(s(349));0!==(30&oo)||Ao(n,t,r)}return r}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,i){t.value=n,t.getSnapshot=i,No(t)&&Do(e)}function Mo(e,t,n){return n((function(){No(t)&&Do(e)}))}function No(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Do(e){var t=Os(e,1);null!==t&&ac(t,e,1,-1)}function Oo(e){var t=_o();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:e},t.queue=e,e=e.dispatch=Jo.bind(null,ao,e),[t.memoizedState,e]}function Po(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Lo(){return xo().memoizedState}function Fo(e,t,n,i){var r=_o();ao.flags|=e,r.memoizedState=Po(1|t,n,void 0,void 0===i?null:i)}function jo(e,t,n,i){var r=xo();i=void 0===i?null:i;var s=void 0;if(null!==lo){var o=lo.memoizedState;if(s=o.destroy,null!==i&&yo(i,o.deps))return void(r.memoizedState=Po(t,n,s,i))}ao.flags|=e,r.memoizedState=Po(1|t,n,s,i)}function zo(e,t){return Fo(8390656,8,e,t)}function Uo(e,t){return jo(2048,8,e,t)}function Vo(e,t){return jo(4,2,e,t)}function Bo(e,t){return jo(4,4,e,t)}function $o(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,$o.bind(null,t,e),n)}function Wo(){}function qo(e,t){var n=xo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&yo(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ko(e,t){var n=xo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&yo(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Go(e,t,n){return 0===(21&oo)?(e.baseState&&(e.baseState=!1,ka=!0),e.memoizedState=n):(ai(n,t)||(n=gt(),ao.lanes|=n,Vl|=n,e.baseState=!0),t)}function Yo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var i=ro.transition;ro.transition={};try{e(!1),t()}finally{bt=n,ro.transition=i}}function Qo(){return xo().memoizedState}function Xo(e,t,n){var i=oc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Zo(e))ea(t,n);else if(null!==(n=Ds(e,t,n,i))){ac(n,e,i,sc()),ta(n,t,i)}}function Jo(e,t,n){var i=oc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zo(e))ea(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o)){var l=t.interleaved;return null===l?(r.next=r,Ns(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(co){}null!==(n=Ds(e,t,r,i))&&(ac(n,e,i,r=sc()),ta(n,t,i))}}function Zo(e){var t=e.alternate;return e===ao||null!==t&&t===ao}function ea(e,t){fo=ho=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ta(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}var na={readContext:Rs,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},ia={readContext:Rs,useCallback:function(e,t){return _o().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4194308,4,$o.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fo(4,2,e,t)},useMemo:function(e,t){var n=_o();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=_o();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Xo.bind(null,ao,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},_o().memoizedState=e},useState:Oo,useDebugValue:Wo,useDeferredValue:function(e){return _o().memoizedState=e},useTransition:function(){var e=Oo(!1),t=e[0];return e=Yo.bind(null,e[1]),_o().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=ao,r=_o();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ol)throw Error(s(349));0!==(30&oo)||Ao(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,zo(Mo.bind(null,i,o,e),[e]),i.flags|=2048,Po(9,Ro.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=_o(),t=Ol.identifierPrefix;if(rs){var n=Xr;t=":"+t+"R"+(n=(Qr&~(1<<32-ot(Qr)-1)).toString(32)+n),0<(n=po++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=go++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ra={readContext:Rs,useCallback:qo,useContext:Rs,useEffect:Uo,useImperativeHandle:Ho,useInsertionEffect:Vo,useLayoutEffect:Bo,useMemo:Ko,useReducer:Eo,useRef:Lo,useState:function(){return Eo(So)},useDebugValue:Wo,useDeferredValue:function(e){return Go(xo(),lo.memoizedState,e)},useTransition:function(){return[Eo(So)[0],xo().memoizedState]},useMutableSource:Io,useSyncExternalStore:Co,useId:Qo,unstable_isNewReconciler:!1},sa={readContext:Rs,useCallback:qo,useContext:Rs,useEffect:Uo,useImperativeHandle:Ho,useInsertionEffect:Vo,useLayoutEffect:Bo,useMemo:Ko,useReducer:To,useRef:Lo,useState:function(){return To(So)},useDebugValue:Wo,useDeferredValue:function(e){var t=xo();return null===lo?t.memoizedState=e:Go(t,lo.memoizedState,e)},useTransition:function(){return[To(So)[0],xo().memoizedState]},useMutableSource:Io,useSyncExternalStore:Co,useId:Qo,unstable_isNewReconciler:!1};function oa(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function aa(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var la={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=sc(),r=oc(e),s=js(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,r))&&(ac(t,e,r,i),Us(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=sc(),r=oc(e),s=js(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,r))&&(ac(t,e,r,i),Us(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sc(),i=oc(e),r=js(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=zs(e,r,i))&&(ac(t,e,i,n),Us(t,e,i))}};function ca(e,t,n,i,r,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function ua(e,t,n){var i=!1,r=Ir,s=t.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(r=Nr(t)?Rr:Cr.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Mr(e,r):Ir),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=la,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function ha(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&la.enqueueReplaceState(t,t.state,null)}function da(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Rs(s):(s=Nr(t)?Rr:Cr.current,r.context=Mr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(aa(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&la.enqueueReplaceState(r,r.state,null),Bs(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function fa(e,t){try{var n="",i=t;do{n+=V(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function pa(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ga(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ma="function"===typeof WeakMap?WeakMap:Map;function ya(e,t,n){(n=js(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Yl||(Yl=!0,Ql=i),ga(0,t)},n}function va(e,t,n){(n=js(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){ga(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ga(0,t),"function"!==typeof i&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ba(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ma;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Rc.bind(null,e,t,n),t.then(e,e))}function wa(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _a(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=js(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var xa=w.ReactCurrentOwner,ka=!1;function Sa(e,t,n,i){t.child=null===e?_s(t,null,n,i):ws(t,e.child,n,i)}function Ea(e,t,n,i,r){n=n.render;var s=t.ref;return As(t,r),i=vo(e,t,n,i,s,r),n=wo(),null===e||ka?(rs&&n&&es(t),t.flags|=1,Sa(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ya(e,t,r))}function Ta(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Fc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=zc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ia(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&e.ref===t.ref)return Ya(e,t,r)}return t.flags|=1,(e=jc(s,i)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(ka=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Ya(e,t,r);0!==(131072&e.flags)&&(ka=!0)}}return Ra(e,t,n,i,r)}function Ca(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(jl,Fl),Fl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tr(jl,Fl),Fl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Tr(jl,Fl),Fl|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Tr(jl,Fl),Fl|=i;return Sa(e,t,r,n),t.child}function Aa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ra(e,t,n,i,r){var s=Nr(n)?Rr:Cr.current;return s=Mr(t,s),As(t,r),n=vo(e,t,n,i,s,r),i=wo(),null===e||ka?(rs&&i&&es(t),t.flags|=1,Sa(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ya(e,t,r))}function Ma(e,t,n,i,r){if(Nr(n)){var s=!0;Lr(t)}else s=!1;if(As(t,r),null===t.stateNode)Ga(e,t),ua(t,n,i),da(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Rs(c):c=Mr(t,c=Nr(n)?Rr:Cr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==c)&&ha(t,o,i,c),Ps=!1;var d=t.memoizedState;o.state=d,Bs(t,i,o,r),l=t.memoizedState,a!==i||d!==l||Ar.current||Ps?("function"===typeof u&&(aa(t,n,u,i),l=t.memoizedState),(a=Ps||ca(t,n,a,i,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:oa(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rs(l):l=Mr(t,l=Nr(n)?Rr:Cr.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&ha(t,o,i,l),Ps=!1,d=t.memoizedState,o.state=d,Bs(t,i,o,r);var p=t.memoizedState;a!==h||d!==p||Ar.current||Ps?("function"===typeof f&&(aa(t,n,f,i),p=t.memoizedState),(c=Ps||ca(t,n,c,i,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Na(e,t,n,i,s,r)}function Na(e,t,n,i,r,s){Aa(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&Fr(t,n,!1),Ya(e,t,s);i=t.stateNode,xa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,a,s)):Sa(e,t,a,s),t.memoizedState=i.state,r&&Fr(t,n,!0),t.child}function Da(e){var t=e.stateNode;t.pendingContext?Or(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Or(0,t.context,!1),Ys(e,t.containerInfo)}function Oa(e,t,n,i,r){return fs(),ps(r),t.flags|=256,Sa(e,t,n,i),t.child}var Pa,La,Fa,ja,za={dehydrated:null,treeContext:null,retryLane:0};function Ua(e){return{baseLanes:e,cachePool:null,transitions:null}}function Va(e,t,n){var i,r=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Tr(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Vc(l,r,0,null),e=Uc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ua(n),t.memoizedState=za,e):Ba(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,a){if(n)return 256&t.flags?(t.flags&=-257,$a(e,t,a,i=pa(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=Vc({mode:"visible",children:i.children},r,0,null),(o=Uc(o,r,a,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&ws(t,e.child,null,a),t.child.memoizedState=Ua(a),t.memoizedState=za,o);if(0===(1&t.mode))return $a(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,$a(e,t,a,i=pa(o=Error(s(419)),i,void 0))}if(l=0!==(a&e.childLanes),ka||l){if(null!==(i=Ol)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Os(e,r),ac(i,e,r,-1))}return wc(),$a(e,t,a,i=pa(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,is=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Kr[Gr++]=Qr,Kr[Gr++]=Xr,Kr[Gr++]=Yr,Qr=e.id,Xr=e.overflow,Yr=t),t=Ba(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,o,n);if(a){a=r.fallback,l=t.mode,i=(o=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=jc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=jc(i,a):(a=Uc(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?Ua(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=za,r}return e=(a=e.child).sibling,r=jc(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ba(e,t){return(t=Vc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function $a(e,t,n,i){return null!==i&&ps(i),ws(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ha(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Cs(e.return,t,n)}function Wa(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ka(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(Sa(e,t,i.children,n),0!==(2&(i=Zs.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,n,t);else if(19===e.tag)Ha(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Tr(Zs,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Wa(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===eo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Wa(t,!0,n,null,s);break;case"together":Wa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ya(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=jc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qa(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ja(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xa(t),null;case 1:case 17:return Nr(t.type)&&Dr(),Xa(t),null;case 3:return i=t.stateNode,Qs(),Er(Ar),Er(Cr),no(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(hc(ss),ss=null))),La(e,t),Xa(t),null;case 5:Js(t);var r=Gs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Fa(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Xa(t),null}if(e=Gs(Ws.current),hs(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[dr]=t,i[fr]=o,e=0!==(1&t.mode),n){case"dialog":zi("cancel",i),zi("close",i);break;case"iframe":case"object":case"embed":zi("load",i);break;case"video":case"audio":for(r=0;r<Pi.length;r++)zi(Pi[r],i);break;case"source":zi("error",i);break;case"img":case"image":case"link":zi("error",i),zi("load",i);break;case"details":zi("toggle",i);break;case"input":Q(i,o),zi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},zi("invalid",i);break;case"textarea":re(i,o),zi("invalid",i)}for(var l in ve(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zi("scroll",i)}switch(n){case"input":q(i),Z(i,o,!0);break;case"textarea":q(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[dr]=t,e[fr]=i,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,i),n){case"dialog":zi("cancel",e),zi("close",e),r=i;break;case"iframe":case"object":case"embed":zi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Pi.length;r++)zi(Pi[r],e);r=i;break;case"source":zi("error",e),r=i;break;case"img":case"image":case"link":zi("error",e),zi("load",e),r=i;break;case"details":zi("toggle",e),r=i;break;case"input":Q(e,i),r=Y(e,i),zi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=F({},i,{value:void 0}),zi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),zi("invalid",e)}for(o in ve(n,r),c=r)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&zi("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":q(e),Z(e,i,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+H(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xa(t),null;case 6:if(e&&null!=t.stateNode)ja(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Gs(Ks.current),Gs(Ws.current),hs(t)){if(i=t.stateNode,n=t.memoizedProps,i[dr]=t,(o=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=t,t.stateNode=i}return Xa(t),null;case 13:if(Er(Zs),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[dr]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xa(t),o=!1}else null!==ss&&(hc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===zl&&(zl=3):wc())),null!==t.updateQueue&&(t.flags|=4),Xa(t),null);case 4:return Qs(),La(e,t),null===e&&Bi(t.stateNode.containerInfo),Xa(t),null;case 10:return Is(t.type._context),Xa(t),null;case 19:if(Er(Zs),null===(o=t.memoizedState))return Xa(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)Qa(o,!1);else{if(0!==zl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Qa(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Tr(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Kl&&(t.flags|=128,i=!0,Qa(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=eo(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!rs)return Xa(t),null}else 2*Xe()-o.renderingStartTime>Kl&&1073741824!==n&&(t.flags|=128,i=!0,Qa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,Tr(Zs,i?1&n|2:1&n),t):(Xa(t),null);case 22:case 23:return mc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Fl)&&(Xa(t),6&t.subtreeFlags&&(t.flags|=8192)):Xa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Za(e,t){switch(ts(t),t.tag){case 1:return Nr(t.type)&&Dr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),Er(Ar),Er(Cr),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Er(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Er(Zs),null;case 4:return Qs(),null;case 10:return Is(t.type._context),null;case 22:case 23:return mc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},La=function(){},Fa=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Gs(Ws.current);var s,o=null;switch(n){case"input":r=Y(e,r),i=Y(e,i),o=[];break;case"select":r=F({},r,{value:void 0}),i=F({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(u in ve(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zi("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},ja=function(e,t,n,i){n!==i&&(t.flags|=4)};var el=!1,tl=!1,nl="function"===typeof WeakSet?WeakSet:Set,il=null;function rl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Ac(e,t,i)}else n.current=null}function sl(e,t,n){try{n()}catch(i){Ac(e,t,i)}}var ol=!1;function al(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&sl(t,n,s)}r=r.next}while(r!==i)}}function ll(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function cl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ul(e){var t=e.alternate;null!==t&&(e.alternate=null,ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[fr],delete t[gr],delete t[mr],delete t[yr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hl(e){return 5===e.tag||3===e.tag||4===e.tag}function dl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||hl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}function pl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(pl(e,t,n),e=e.sibling;null!==e;)pl(e,t,n),e=e.sibling}var gl=null,ml=!1;function yl(e,t,n){for(n=n.child;null!==n;)vl(e,t,n),n=n.sibling}function vl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:tl||rl(n,t);case 6:var i=gl,r=ml;gl=null,yl(e,t,n),ml=r,null!==(gl=i)&&(ml?(e=gl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):gl.removeChild(n.stateNode));break;case 18:null!==gl&&(ml?(e=gl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Bt(e)):lr(gl,n.stateNode));break;case 4:i=gl,r=ml,gl=n.stateNode.containerInfo,ml=!0,yl(e,t,n),gl=i,ml=r;break;case 0:case 11:case 14:case 15:if(!tl&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&sl(n,t,o),r=r.next}while(r!==i)}yl(e,t,n);break;case 1:if(!tl&&(rl(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ac(n,t,a)}yl(e,t,n);break;case 21:yl(e,t,n);break;case 22:1&n.mode?(tl=(i=tl)||null!==n.memoizedState,yl(e,t,n),tl=i):yl(e,t,n);break;default:yl(e,t,n)}}function bl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new nl),t.forEach((function(t){var i=Dc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function wl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:gl=l.stateNode,ml=!1;break e;case 3:case 4:gl=l.stateNode.containerInfo,ml=!0;break e}l=l.return}if(null===gl)throw Error(s(160));vl(o,a,r),gl=null,ml=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(co){Ac(r,t,co)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)_l(t,e),t=t.sibling}function _l(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wl(t,e),xl(e),4&i){try{al(3,e,e.return),ll(3,e)}catch(m){Ac(e,e.return,m)}try{al(5,e,e.return)}catch(m){Ac(e,e.return,m)}}break;case 1:wl(t,e),xl(e),512&i&&null!==n&&rl(n,n.return);break;case 5:if(wl(t,e),xl(e),512&i&&null!==n&&rl(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(m){Ac(e,e.return,m)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(r,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?me(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):b(r,h,d,u)}switch(l){case"input":J(r,o);break;case"textarea":se(r,o);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(r,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[fr]=o}catch(m){Ac(e,e.return,m)}}break;case 6:if(wl(t,e),xl(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(m){Ac(e,e.return,m)}}break;case 3:if(wl(t,e),xl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ac(e,e.return,m)}break;case 4:default:wl(t,e),xl(e);break;case 13:wl(t,e),xl(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(ql=Xe())),4&i&&bl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(tl=(u=tl)||h,wl(t,e),tl=u):wl(t,e),xl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(il=e,h=e.child;null!==h;){for(d=il=h;null!==il;){switch(p=(f=il).child,f.tag){case 0:case 11:case 14:case 15:al(4,f,f.return);break;case 1:rl(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Ac(i,n,m)}}break;case 5:rl(f,f.return);break;case 22:if(null!==f.memoizedState){Tl(d);continue}}null!==p?(p.return=f,il=p):Tl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Ac(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Ac(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wl(t,e),xl(e),4&i&&bl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(hl(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(de(r,""),i.flags&=-33),pl(e,dl(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;fl(e,dl(e),o);break;default:throw Error(s(161))}}catch(so){Ac(e,e.return,so)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function kl(e,t,n){il=e,Sl(e,t,n)}function Sl(e,t,n){for(var i=0!==(1&e.mode);null!==il;){var r=il,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||el;if(!o){var a=r.alternate,l=null!==a&&null!==a.memoizedState||tl;a=el;var c=tl;if(el=o,(tl=l)&&!c)for(il=r;null!==il;)l=(o=il).child,22===o.tag&&null!==o.memoizedState?Il(r):null!==l?(l.return=o,il=l):Il(r);for(;null!==s;)il=s,Sl(s,t,n),s=s.sibling;il=r,el=a,tl=c}El(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,il=s):El(e)}}function El(e){for(;null!==il;){var t=il;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:tl||ll(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!tl)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:oa(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&$s(t,o,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}$s(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}tl||512&t.flags&&cl(t)}catch(bo){Ac(t,t.return,bo)}}if(t===e){il=null;break}if(null!==(n=t.sibling)){n.return=t.return,il=n;break}il=t.return}}function Tl(e){for(;null!==il;){var t=il;if(t===e){il=null;break}var n=t.sibling;if(null!==n){n.return=t.return,il=n;break}il=t.return}}function Il(e){for(;null!==il;){var t=il;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch(so){Ac(t,n,so)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(so){Ac(t,r,so)}}var s=t.return;try{cl(t)}catch(so){Ac(t,s,so)}break;case 5:var o=t.return;try{cl(t)}catch(so){Ac(t,o,so)}}}catch(so){Ac(t,t.return,so)}if(t===e){il=null;break}var a=t.sibling;if(null!==a){a.return=t.return,il=a;break}il=t.return}}var Cl,Al=Math.ceil,Rl=w.ReactCurrentDispatcher,Ml=w.ReactCurrentOwner,Nl=w.ReactCurrentBatchConfig,Dl=0,Ol=null,Pl=null,Ll=0,Fl=0,jl=Sr(0),zl=0,Ul=null,Vl=0,Bl=0,$l=0,Hl=null,Wl=null,ql=0,Kl=1/0,Gl=null,Yl=!1,Ql=null,Xl=null,Jl=!1,Zl=null,ec=0,tc=0,nc=null,ic=-1,rc=0;function sc(){return 0!==(6&Dl)?Xe():-1!==ic?ic:ic=Xe()}function oc(e){return 0===(1&e.mode)?1:0!==(2&Dl)&&0!==Ll?Ll&-Ll:null!==gs.transition?(0===rc&&(rc=gt()),rc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function ac(e,t,n,i){if(50<tc)throw tc=0,nc=null,Error(s(185));yt(e,n,i),0!==(2&Dl)&&e===Ol||(e===Ol&&(0===(2&Dl)&&(Bl|=n),4===zl&&dc(e,Ll)),lc(e,i),1===n&&0===Dl&&0===(1&t.mode)&&(Kl=Xe()+500,zr&&Br()))}function lc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&i)||(r[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var i=dt(e,e===Ol?Ll:0);if(0===i)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){zr=!0,Vr(e)}(fc.bind(null,e)):Vr(fc.bind(null,e)),or((function(){0===(6&Dl)&&Br()})),n=null;else{switch(wt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Oc(n,cc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function cc(e,t){if(ic=-1,rc=0,0!==(6&Dl))throw Error(s(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var i=dt(e,e===Ol?Ll:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=_c(e,i);else{t=i;var r=Dl;Dl|=2;var o=bc();for(Ol===e&&Ll===t||(Gl=null,Kl=Xe()+500,yc(e,t));;)try{kc();break}catch(l){vc(e,l)}Ts(),Rl.current=o,Dl=r,null!==Pl?t=0:(Ol=null,Ll=0,t=zl)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(i=r,t=uc(e,r))),1===t)throw n=Ul,yc(e,0),dc(e,i),lc(e,Xe()),n;if(6===t)dc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=_c(e,i))&&(0!==(o=pt(e))&&(i=o,t=uc(e,o))),1===t))throw n=Ul,yc(e,0),dc(e,i),lc(e,Xe()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:Tc(e,Wl,Gl);break;case 3:if(dc(e,i),(130023424&i)===i&&10<(t=ql+500-Xe())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){sc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(Tc.bind(null,e,Wl,Gl),t);break}Tc(e,Wl,Gl);break;case 4:if(dc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-ot(i);o=1<<a,(a=t[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=Xe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Al(i/1960))-i)){e.timeoutHandle=ir(Tc.bind(null,e,Wl,Gl),i);break}Tc(e,Wl,Gl);break;default:throw Error(s(329))}}}return lc(e,Xe()),e.callbackNode===n?cc.bind(null,e):null}function uc(e,t){var n=Hl;return e.current.memoizedState.isDehydrated&&(yc(e,t).flags|=256),2!==(e=_c(e,t))&&(t=Wl,Wl=n,null!==t&&hc(t)),e}function hc(e){null===Wl?Wl=e:Wl.push.apply(Wl,e)}function dc(e,t){for(t&=~$l,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function fc(e){if(0!==(6&Dl))throw Error(s(327));Ic();var t=dt(e,0);if(0===(1&t))return lc(e,Xe()),null;var n=_c(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=uc(e,i))}if(1===n)throw n=Ul,yc(e,0),dc(e,t),lc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tc(e,Wl,Gl),lc(e,Xe()),null}function pc(e,t){var n=Dl;Dl|=1;try{return e(t)}finally{0===(Dl=n)&&(Kl=Xe()+500,zr&&Br())}}function gc(e){null!==Zl&&0===Zl.tag&&0===(6&Dl)&&Ic();var t=Dl;Dl|=1;var n=Nl.transition,i=bt;try{if(Nl.transition=null,bt=1,e)return e()}finally{bt=i,Nl.transition=n,0===(6&(Dl=t))&&Br()}}function mc(){Fl=jl.current,Er(jl)}function yc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Pl)for(n=Pl.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Dr();break;case 3:Qs(),Er(Ar),Er(Cr),no();break;case 5:Js(i);break;case 4:Qs();break;case 13:case 19:Er(Zs);break;case 10:Is(i.type._context);break;case 22:case 23:mc()}n=n.return}if(Ol=e,Pl=e=jc(e.current,null),Ll=Fl=t,zl=0,Ul=null,$l=Bl=Vl=0,Wl=Hl=null,null!==Ms){for(t=0;t<Ms.length;t++)if(null!==(i=(n=Ms[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}Ms=null}return e}function vc(e,t){for(;;){var n=Pl;try{if(Ts(),io.current=na,ho){for(var i=ao.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ho=!1}if(oo=0,uo=lo=ao=null,fo=!1,po=0,Ml.current=null,null===n||null===n.return){zl=1,Ul=t,Pl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Ll,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=wa(a);if(null!==p){p.flags&=-257,_a(p,a,l,0,t),1&p.mode&&ba(o,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ba(o,u,t),wc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var y=wa(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),_a(y,a,l,0,t),ps(fa(c,l));break e}}o=c=fa(c,l),4!==zl&&(zl=2),null===Hl?Hl=[o]:Hl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,ya(0,c,t));break e;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xl||!Xl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,va(o,l,t));break e}}o=o.return}while(null!==o)}Ec(n)}catch(ko){t=ko,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function bc(){var e=Rl.current;return Rl.current=na,null===e?na:e}function wc(){0!==zl&&3!==zl&&2!==zl||(zl=4),null===Ol||0===(268435455&Vl)&&0===(268435455&Bl)||dc(Ol,Ll)}function _c(e,t){var n=Dl;Dl|=2;var i=bc();for(Ol===e&&Ll===t||(Gl=null,yc(e,t));;)try{xc();break}catch(r){vc(e,r)}if(Ts(),Dl=n,Rl.current=i,null!==Pl)throw Error(s(261));return Ol=null,Ll=0,zl}function xc(){for(;null!==Pl;)Sc(Pl)}function kc(){for(;null!==Pl&&!Ye();)Sc(Pl)}function Sc(e){var t=Cl(e.alternate,e,Fl);e.memoizedProps=e.pendingProps,null===t?Ec(e):Pl=t,Ml.current=null}function Ec(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ja(n,t,Fl)))return void(Pl=n)}else{if(null!==(n=Za(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return zl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===zl&&(zl=5)}function Tc(e,t,n){var i=bt,r=Nl.transition;try{Nl.transition=null,bt=1,function(e,t,n,i){do{Ic()}while(null!==Zl);if(0!==(6&Dl))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,o),e===Ol&&(Pl=Ol=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Oc(tt,(function(){return Ic(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Nl.transition,Nl.transition=null;var a=bt;bt=1;var l=Dl;Dl|=4,Ml.current=null,function(e,t){if(er=Ht,fi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(qa){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=a+r),d!==o||0!==i&&3!==d.nodeType||(c=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===r&&(l=a),f===o&&++h===i&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Ht=!1,il=t;null!==il;)if(e=(t=il).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,il=e;else for(;null!==il;){t=il;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:oa(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(qa){Ac(t,t.return,qa)}if(null!==(e=t.sibling)){e.return=t.return,il=e;break}il=t.return}g=ol,ol=!1}(e,n),_l(n,e),pi(tr),Ht=!!er,tr=er=null,e.current=n,kl(n,e,r),Qe(),Dl=l,bt=a,Nl.transition=o}else e.current=n;if(Jl&&(Jl=!1,Zl=e,ec=r),o=e.pendingLanes,0===o&&(Xl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),lc(e,Xe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Yl)throw Yl=!1,e=Ql,Ql=null,e;0!==(1&ec)&&0!==e.tag&&Ic(),o=e.pendingLanes,0!==(1&o)?e===nc?tc++:(tc=0,nc=e):tc=0,Br()}(e,t,n,i)}finally{Nl.transition=r,bt=i}return null}function Ic(){if(null!==Zl){var e=wt(ec),t=Nl.transition,n=bt;try{if(Nl.transition=null,bt=16>e?16:e,null===Zl)var i=!1;else{if(e=Zl,Zl=null,ec=0,0!==(6&Dl))throw Error(s(331));var r=Dl;for(Dl|=4,il=e.current;null!==il;){var o=il,a=o.child;if(0!==(16&il.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(il=u;null!==il;){var h=il;switch(h.tag){case 0:case 11:case 15:al(8,h,o)}var d=h.child;if(null!==d)d.return=h,il=d;else for(;null!==il;){var f=(h=il).sibling,p=h.return;if(ul(h),h===u){il=null;break}if(null!==f){f.return=p,il=f;break}il=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}il=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,il=a;else e:for(;null!==il;){if(0!==(2048&(o=il).flags))switch(o.tag){case 0:case 11:case 15:al(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,il=v;break e}il=o.return}}var b=e.current;for(il=b;null!==il;){var w=(a=il).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,il=w;else e:for(a=b;null!==il;){if(0!==(2048&(l=il).flags))try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(ko){Ac(l,l.return,ko)}if(l===a){il=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,il=_;break e}il=l.return}}if(Dl=r,Br(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(ko){}i=!0}return i}finally{bt=n,Nl.transition=t}}return!1}function Cc(e,t,n){e=zs(e,t=ya(0,t=fa(n,t),1),1),t=sc(),null!==e&&(yt(e,1,t),lc(e,t))}function Ac(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Xl||!Xl.has(i))){t=zs(t,e=va(t,e=fa(n,e),1),1),e=sc(),null!==t&&(yt(t,1,e),lc(t,e));break}}t=t.return}}function Rc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=sc(),e.pingedLanes|=e.suspendedLanes&n,Ol===e&&(Ll&n)===n&&(4===zl||3===zl&&(130023424&Ll)===Ll&&500>Xe()-ql?yc(e,0):$l|=n),lc(e,t)}function Mc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=sc();null!==(e=Os(e,t))&&(yt(e,t,n),lc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Mc(e,n)}function Dc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Mc(e,n)}function Oc(e,t){return Ke(e,t)}function Pc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,i){return new Pc(e,t,n,i)}function Fc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jc(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zc(e,t,n,i,r,o){var a=2;if(i=e,"function"===typeof e)Fc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Uc(n.children,r,o,t);case S:a=8,r|=8;break;case E:return(e=Lc(12,n,t,2|r)).elementType=E,e.lanes=o,e;case A:return(e=Lc(13,n,t,r)).elementType=A,e.lanes=o,e;case R:return(e=Lc(19,n,t,r)).elementType=R,e.lanes=o,e;case D:return Vc(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case I:a=9;break e;case C:a=11;break e;case M:a=14;break e;case N:a=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Lc(a,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Uc(e,t,n,i){return(e=Lc(7,e,i,t)).lanes=n,e}function Vc(e,t,n,i){return(e=Lc(22,e,i,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function $c(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Wc(e,t,n,i,r,s,o,a,l){return e=new Hc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Lc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function qc(e){if(!e)return Ir;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Nr(n))return Pr(e,n,t)}return t}function Kc(e,t,n,i,r,s,o,a,l){return(e=Wc(n,i,!0,e,0,s,0,a,l)).context=qc(null),n=e.current,(s=js(i=sc(),r=oc(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,r),e.current.lanes=r,yt(e,r,i),lc(e,i),e}function Gc(e,t,n,i){var r=t.current,s=sc(),o=oc(r);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=js(s,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=zs(r,t,o))&&(ac(e,r,o,s),Us(e,r,o)),o}function Yc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ar.current)ka=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ka=!1,function(e,t,n){switch(t.tag){case 3:Da(t),fs();break;case 5:Xs(t);break;case 1:Nr(t.type)&&Lr(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Tr(xs,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Tr(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Va(e,t,n):(Tr(Zs,1&Zs.current),null!==(e=Ya(e,t,n))?e.sibling:null);Tr(Zs,1&Zs.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ka(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tr(Zs,Zs.current),i)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return Ya(e,t,n)}(e,t,n);ka=0!==(131072&e.flags)}else ka=!1,rs&&0!==(1048576&t.flags)&&Zr(t,qr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ga(e,t),e=t.pendingProps;var r=Mr(t,Cr.current);As(t,n),r=vo(null,t,i,e,r,n);var o=wo();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nr(i)?(o=!0,Lr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Ls(t),r.updater=la,t.stateNode=r,r._reactInternals=t,da(t,i,e,n),t=Na(null,t,i,!0,o,n)):(t.tag=0,rs&&o&&es(t),Sa(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Ga(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Fc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===M)return 14}return 2}(i),e=oa(i,e),r){case 0:t=Ra(null,t,i,e,n);break e;case 1:t=Ma(null,t,i,e,n);break e;case 11:t=Ea(null,t,i,e,n);break e;case 14:t=Ta(null,t,i,oa(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ra(e,t,i,r=t.elementType===i?r:oa(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ma(e,t,i,r=t.elementType===i?r:oa(i,r),n);case 3:e:{if(Da(t),null===e)throw Error(s(387));i=t.pendingProps,r=(o=t.memoizedState).element,Fs(e,t),Bs(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Oa(e,t,i,n,r=fa(Error(s(423)),t));break e}if(i!==r){t=Oa(e,t,i,n,r=fa(Error(s(424)),t));break e}for(is=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=_s(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),i===r){t=Ya(e,t,n);break e}Sa(e,t,i,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(t.flags|=32),Aa(e,t),Sa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Va(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ws(t,null,i,n):Sa(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,Ea(e,t,i,r=t.elementType===i?r:oa(i,r),n);case 7:return Sa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Sa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,Tr(xs,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Ar.current){t=Ya(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=js(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Cs(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Cs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Sa(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,As(t,n),i=i(r=Rs(r)),t.flags|=1,Sa(e,t,i,n),t.child;case 14:return r=oa(i=t.type,t.pendingProps),Ta(e,t,i,r=oa(i.type,r),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:oa(i,r),Ga(e,t),t.tag=1,Nr(i)?(e=!0,Lr(t)):e=!1,As(t,n),ua(t,i,r),da(t,i,r,n),Na(null,t,i,!0,e,n);case 19:return Ka(e,t,n);case 22:return Ca(e,t,n)}throw Error(s(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}function eu(e){this._internalRoot=e}function tu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function iu(){}function ru(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof r){var a=r;r=function(){var e=Yc(o);a.call(e)}}Gc(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Yc(o);s.call(e)}}var o=Kc(t,i,e,0,null,!1,0,"",iu);return e._reactRootContainer=o,e[pr]=o.current,Bi(8===e.nodeType?e.parentNode:e),gc(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Yc(l);a.call(e)}}var l=Wc(e,0,!1,null,0,!1,0,"",iu);return e._reactRootContainer=l,e[pr]=l.current,Bi(8===e.nodeType?e.parentNode:e),gc((function(){Gc(t,l,n,i)})),l}(n,t,e,r,i);return Yc(o)}eu.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Gc(e,t,null,null)},eu.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gc((function(){Gc(null,e,null,null)})),t[pr]=null}},eu.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),lc(t,Xe()),0===(6&Dl)&&(Kl=Xe()+500,Br()))}break;case 13:gc((function(){var t=Os(e,1);if(null!==t){var n=sc();ac(t,e,1,n)}})),Xc(e,1)}},xt=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)ac(t,e,134217728,sc());Xc(e,134217728)}},kt=function(e){if(13===e.tag){var t=oc(e),n=Os(e,t);if(null!==n)ac(n,e,t,sc());Xc(e,t)}},St=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=_r(i);if(!r)throw Error(s(90));K(i),J(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=pc,Ae=gc;var su={usingClientEntryPoint:!1,Events:[br,wr,_r,Te,Ie,pc]},ou={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},au={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{rt=lu.inject(au),st=lu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=su,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!tu(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!tu(e))throw Error(s(299));var n=!1,i="",r=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Wc(e,1,!1,null,0,n,0,i,r),e[pr]=t.current,Bi(8===e.nodeType?e.parentNode:e),new Zc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return gc(e)},t.hydrate=function(e,t,n){if(!nu(t))throw Error(s(200));return ru(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!tu(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Kc(t,null,e,1,null!=n?n:null,r,0,o,a),e[pr]=t.current,Bi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new eu(t)},t.render=function(e,t,n){if(!nu(t))throw Error(s(200));return ru(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nu(e))throw Error(s(40));return!!e._reactRootContainer&&(gc((function(){ru(null,null,e,!1,(function(){e._reactRootContainer=null,e[pr]=null}))})),!0)},t.unstable_batchedUpdates=pc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!nu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ru(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{var i=n(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},358:(e,t)=>{const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,i=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},153:(e,t,n)=>{var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,i){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,r)&&!S.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:k.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,r,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,_(o)?(r="",null!=e&&(r=e.replace(I,"$&/")+"/"),A(o,t,r,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=A(a,t,r,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,r,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var i=[],r=0;return A(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},D={transition:null},O={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=r,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=P,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{e.exports=n(202)},579:(e,t,n)=>{e.exports=n(153)},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function _(e){if(m=!1,w(e),!g)if(null!==i(c))g=!0,D(x);else{var t=i(u);null!==t&&O(_,t.startTime-e)}}function x(e,n){g=!1,m&&(m=!1,v(T),T=-1),p=!0;var s=f;try{for(w(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===i(c)&&r(c),w(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&O(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,E=null,T=-1,I=5,C=-1;function A(){return!(t.unstable_now()-C<I)}function R(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?k():(S=!1,E=null)}}else S=!1}if("function"===typeof b)k=function(){b(R)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,N=M.port2;M.port1.onmessage=R,k=function(){N.postMessage(null)}}else k=function(){y(R,0)};function D(e){E=e,S||(S=!0,k())}function O(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,D(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(m?(v(T),T=-1):m=!0,O(_,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,D(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{e.exports=n(234)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var i=n(43),r=n(391),s=(n(358),"popstate");function o(){return f((function(e,t){let{pathname:n="/",search:i="",hash:r=""}=d(e.location.hash.substring(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),u("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),i="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");i=-1===n?t:t.slice(0,n)}return i+"#"+("string"===typeof t?t:h(t))}),(function(e,t){l("/"===e.pathname.charAt(0),`relative pathnames are not supported in hash history.push(${JSON.stringify(t)})`)}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function a(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?d(t):t,state:n,key:t&&t.key||i||Math.random().toString(36).substring(2,10)}}function h(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function f(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:o=!1}=i,l=r.history,d="POP",f=null,p=g();function g(){return(l.state||{idx:null}).idx}function m(){d="POP";let e=g(),t=null==e?null:e-p;p=e,f&&f({action:d,location:v.location,delta:t})}function y(e){let t="null"!==r.location.origin?r.location.origin:r.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),a(t,`No window.location.(origin|href) available to create URL for href: ${n}`),new URL(n,t)}null==p&&(p=0,l.replaceState({...l.state,idx:p},""));let v={get action(){return d},get location(){return e(r,l)},listen(e){if(f)throw new Error("A history only accepts one active listener");return r.addEventListener(s,m),f=e,()=>{r.removeEventListener(s,m),f=null}},createHref:e=>t(r,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){d="PUSH";let i=u(v.location,e,t);n&&n(i,e),p=g()+1;let s=c(i,p),a=v.createHref(i);try{l.pushState(s,"",a)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;r.location.assign(a)}o&&f&&f({action:d,location:v.location,delta:1})},replace:function(e,t){d="REPLACE";let i=u(v.location,e,t);n&&n(i,e),p=g();let r=c(i,p),s=v.createHref(i);l.replaceState(r,"",s),o&&f&&f({action:d,location:v.location,delta:0})},go:e=>l.go(e)};return v}function p(e,t){return g(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function g(e,t,n,i){let r=A(("string"===typeof t?d(t):t).pathname||"/",n);if(null==r)return null;let s=m(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=C(r);o=T(s[a],e,i)}return o}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=(e,r,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};o.relativePath.startsWith("/")&&(a(o.relativePath.startsWith(i),`Absolute route path "${o.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),o.relativePath=o.relativePath.slice(i.length));let l=O([i,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(a(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),m(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:E(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of y(e.path))r(e,t,n);else r(e,t)})),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let o=y(i.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),r&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}var v=/^:[\w-]+$/,b=3,w=2,_=1,x=10,k=-2,S=e=>"*"===e;function E(e,t){let n=e.split("/"),i=n.length;return n.some(S)&&(i+=k),t&&(i+=w),n.filter((e=>!S(e))).reduce(((e,t)=>e+(v.test(t)?b:""===t?_:x)),i)}function T(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=e,r={},s="/",o=[];for(let a=0;a<i.length;++a){let e=i[a],l=a===i.length-1,c="/"===s?t:t.slice(s.length)||"/",u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!i[i.length-1].route.index&&(u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),o.push({params:r,pathname:O([s,u.pathname]),pathnameBase:P(O([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=O([s,u.pathnameBase]))}return o}function I(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];l("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,t?void 0:"i");return[s,i]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1),c=i.reduce(((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:c,pathname:s,pathnameBase:o,pattern:e}}function C(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return l(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function R(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function M(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function N(e){let t=M(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function D(e,t,n){let i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?i=d(e):(i={...e},a(!i.pathname||!i.pathname.includes("?"),R("?","pathname","search",i)),a(!i.pathname||!i.pathname.includes("#"),R("#","pathname","hash",i)),a(!i.search||!i.search.includes("#"),R("#","search","hash",i)));let s,o=""===e||""===i.pathname,l=o?"/":i.pathname;if(null==l)s=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:i="",hash:r=""}="string"===typeof e?d(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:L(i),hash:F(r)}}(i,s),u=l&&"/"!==l&&l.endsWith("/"),h=(o||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!h||(c.pathname+="/"),c}var O=e=>e.join("/").replace(/\/\/+/g,"/"),P=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),L=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function j(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var z=["POST","PUT","PATCH","DELETE"],U=(new Set(z),["GET",...z]);new Set(U),Symbol("ResetLoaderData");var V=i.createContext(null);V.displayName="DataRouter";var B=i.createContext(null);B.displayName="DataRouterState";var $=i.createContext({isTransitioning:!1});$.displayName="ViewTransition";var H=i.createContext(new Map);H.displayName="Fetchers";var W=i.createContext(null);W.displayName="Await";var q=i.createContext(null);q.displayName="Navigation";var K=i.createContext(null);K.displayName="Location";var G=i.createContext({outlet:null,matches:[],isDataRoute:!1});G.displayName="Route";var Y=i.createContext(null);Y.displayName="RouteError";function Q(){return null!=i.useContext(K)}function X(){return a(Q(),"useLocation() may be used only in the context of a <Router> component."),i.useContext(K).location}var J="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Z(e){i.useContext(q).static||i.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=i.useContext(G);return e?function(){let{router:e}=ce("useNavigate"),t=he("useNavigate"),n=i.useRef(!1);Z((()=>{n.current=!0}));let r=i.useCallback((async function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(n.current,J),n.current&&("number"===typeof i?e.navigate(i):await e.navigate(i,{fromRouteId:t,...r}))}),[e,t]);return r}():function(){a(Q(),"useNavigate() may be used only in the context of a <Router> component.");let e=i.useContext(V),{basename:t,navigator:n}=i.useContext(q),{matches:r}=i.useContext(G),{pathname:s}=X(),o=JSON.stringify(N(r)),c=i.useRef(!1);Z((()=>{c.current=!0}));let u=i.useCallback((function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l(c.current,J),!c.current)return;if("number"===typeof i)return void n.go(i);let a=D(i,JSON.parse(o),s,"path"===r.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:O([t,a.pathname])),(r.replace?n.replace:n.push)(a,r.state,r)}),[t,n,o,s,e]);return u}()}i.createContext(null);function te(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=i.useContext(G),{pathname:r}=X(),s=JSON.stringify(N(n));return i.useMemo((()=>D(e,JSON.parse(s),r,"path"===t)),[e,s,r,t])}function ne(e,t,n,r){a(Q(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=i.useContext(q),{matches:c}=i.useContext(G),u=c[c.length-1],h=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",m=u&&u.route;{let e=m&&m.path||"";pe(f,!m||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let y,v=X();if(t){let e="string"===typeof t?d(t):t;a("/"===g||e.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${e.pathname}" was given in the \`location\` prop.`),y=e}else y=v;let b=y.pathname||"/",w=b;if("/"!==g){let e=g.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let _=!o&&n&&n.matches&&n.matches.length>0?n.matches:p(e,{pathname:w});l(m||null!=_,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),l(null==_||void 0!==_[_.length-1].route.element||void 0!==_[_.length-1].route.Component||void 0!==_[_.length-1].route.lazy,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=ae(_&&_.map((e=>Object.assign({},e,{params:Object.assign({},h,e.params),pathname:O([g,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?g:O([g,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),c,n,r);return t&&x?i.createElement(K.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},x):x}function ie(){let e=de(),t=j(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=i.createElement(i.Fragment,null,i.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),i.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",i.createElement("code",{style:o},"ErrorBoundary")," or"," ",i.createElement("code",{style:o},"errorElement")," prop on your route.")),i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,a)}var re=i.createElement(ie,null),se=class extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(G.Provider,{value:this.props.routeContext},i.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function oe(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(V);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(G.Provider,{value:t},r)}function ae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let r=e,s=n?.errors;if(null!=s){let e=r.findIndex((e=>e.route.id&&void 0!==s?.[e.route.id]));a(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),r=r.slice(0,Math.min(r.length,e+1))}let o=!1,l=-1;if(n)for(let i=0;i<r.length;i++){let e=r[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=i),e.route.id){let{loaderData:t,errors:i}=n,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!i||void 0===i[e.route.id]);if(e.route.lazy||s){o=!0,r=l>=0?r.slice(0,l+1):[r[0]];break}}}return r.reduceRight(((e,a,c)=>{let u,h=!1,d=null,f=null;n&&(u=s&&a.route.id?s[a.route.id]:void 0,d=a.route.errorElement||re,o&&(l<0&&0===c?(pe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,f=null):l===c&&(h=!0,f=a.route.hydrateFallbackElement||null)));let p=t.concat(r.slice(0,c+1)),g=()=>{let t;return t=u?d:h?f:a.route.Component?i.createElement(a.route.Component,null):a.route.element?a.route.element:e,i.createElement(oe,{match:a,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(a.route.ErrorBoundary||a.route.errorElement||0===c)?i.createElement(se,{location:n.location,revalidation:n.revalidation,component:d,error:u,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()}),null)}function le(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ce(e){let t=i.useContext(V);return a(t,le(e)),t}function ue(e){let t=i.useContext(B);return a(t,le(e)),t}function he(e){let t=function(e){let t=i.useContext(G);return a(t,le(e)),t}(e),n=t.matches[t.matches.length-1];return a(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function de(){let e=i.useContext(Y),t=ue("useRouteError"),n=he("useRouteError");return void 0!==e?e:t.errors?.[n]}var fe={};function pe(e,t,n){t||fe[e]||(fe[e]=!0,l(!1,n))}i.memo((function(e){let{routes:t,future:n,state:i}=e;return ne(t,void 0,i,n)}));function ge(e){a(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function me(e){let{basename:t="/",children:n=null,location:r,navigationType:s="POP",navigator:o,static:c=!1}=e;a(!Q(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),h=i.useMemo((()=>({basename:u,navigator:o,static:c,future:{}})),[u,o,c]);"string"===typeof r&&(r=d(r));let{pathname:f="/",search:p="",hash:g="",state:m=null,key:y="default"}=r,v=i.useMemo((()=>{let e=A(f,u);return null==e?null:{location:{pathname:e,search:p,hash:g,state:m,key:y},navigationType:s}}),[u,f,p,g,m,y,s]);return l(null!=v,`<Router basename="${u}"> is not able to match the URL "${f}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),null==v?null:i.createElement(q.Provider,{value:h},i.createElement(K.Provider,{children:n,value:v}))}function ye(e){let{children:t,location:n}=e;return ne(ve(t),n)}i.Component;function ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,ve(e.props.children,s));a(e.type===ge,`[${"string"===typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),a(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ve(e.props.children,s)),n.push(o)})),n}var be="get",we="application/x-www-form-urlencoded";function _e(e){return null!=e&&"string"===typeof e.tagName}var xe=null;var ke=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Se(e){return null==e||ke.has(e)?e:(l(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${we}"`),null)}function Ee(e,t){let n,i,r,s,o;if(_e(a=e)&&"form"===a.tagName.toLowerCase()){let o=e.getAttribute("action");i=o?A(o,t):null,n=e.getAttribute("method")||be,r=Se(e.getAttribute("enctype"))||we,s=new FormData(e)}else if(function(e){return _e(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return _e(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||o.getAttribute("action");if(i=a?A(a,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||be,r=Se(e.getAttribute("formenctype"))||Se(o.getAttribute("enctype"))||we,s=new FormData(o,e),!function(){if(null===xe)try{new FormData(document.createElement("form"),0),xe=!1}catch(e){xe=!0}return xe}()){let{name:t,type:n,value:i}=e;if("image"===n){let e=t?`${t}.`:"";s.append(`${e}x`,"0"),s.append(`${e}y`,"0")}else t&&s.append(t,i)}}else{if(_e(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=be,i=null,r=we,o=e}var a;return s&&"text/plain"===r&&(o=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:o}}function Te(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Ie(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function Ce(e){return null!=e&&"string"===typeof e.page}function Ae(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Re(e,t,n,i,r,s){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===s?t.filter(((e,t)=>o(e,t)||a(e,t))):"data"===s?t.filter(((t,s)=>{let l=i.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,s)||a(t,s))return!0;if(t.route.shouldRevalidate){let i=t.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0})):[]}function Me(e){return[...new Set(e)]}function Ne(e,t){let n=new Set,i=new Set(t);return e.reduce(((e,r)=>{if(t&&!Ce(r)&&"script"===r.as&&r.href&&i.has(r.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}(r));return n.has(s)||(n.add(s),e.push({key:s,link:r})),e}),[])}function De(e){return{__html:e}}Symbol("SingleFetchRedirect");function Oe(e){let t="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===t.pathname?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}i.Component;function Pe(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let r,s=i.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://remix.run/guides/errors for more information."\n        );\n      '}});if(j(t))return i.createElement(Le,{title:"Unhandled Thrown Response!"},i.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),s);if(t instanceof Error)r=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);r=new Error(e)}return i.createElement(Le,{title:"Application Error!",isOutsideRemixApp:n},i.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),i.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),s)}function Le(e){let{title:t,renderScripts:n,isOutsideRemixApp:r,children:s}=e,{routeModules:o}=Ve();return o.root?.Layout&&!r?s:i.createElement("html",{lang:"en"},i.createElement("head",null,i.createElement("meta",{charSet:"utf-8"}),i.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),i.createElement("title",null,t)),i.createElement("body",null,i.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,n?i.createElement(Ge,null):null)))}function Fe(e){return!e}function je(){let e=i.useContext(V);return Te(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ze(){let e=i.useContext(B);return Te(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ue=i.createContext(void 0);function Ve(){let e=i.useContext(Ue);return Te(e,"You must render this element inside a <HydratedRouter> element"),e}function Be(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function $e(e,t,n){if(n&&!Ke)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function He(e){let{page:t,...n}=e,{router:r}=je(),s=i.useMemo((()=>p(r.routes,t,r.basename)),[r.routes,t,r.basename]);return s?i.createElement(qe,{page:t,matches:s,...n}):null}function We(e){let{manifest:t,routeModules:n}=Ve(),[r,s]=i.useState([]);return i.useEffect((()=>{let i=!1;return async function(e,t,n){return Ne((await Promise.all(e.map((async e=>{let i=t.routes[e.route.id];if(i){let e=await Ie(i,n);return e.links?e.links():[]}return[]})))).flat(1).filter(Ae).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}(e,t,n).then((e=>{i||s(e)})),()=>{i=!0}}),[e,t,n]),r}function qe(e){let{page:t,matches:n,...r}=e,s=X(),{manifest:o,routeModules:a}=Ve(),{loaderData:l,matches:c}=ze(),u=i.useMemo((()=>Re(t,n,c,o,s,"data")),[t,n,c,o,s]),h=i.useMemo((()=>Re(t,n,c,o,s,"assets")),[t,n,c,o,s]),d=i.useMemo((()=>{if(t===s.pathname+s.search+s.hash)return[];let e=new Set,i=!1;if(n.forEach((t=>{let n=o.routes[t.route.id];n&&n.hasLoader&&(!u.some((e=>e.route.id===t.route.id))&&t.route.id in l&&a[t.route.id]?.shouldRevalidate||n.hasClientLoader?i=!0:e.add(t.route.id))})),0===e.size)return[];let r=Oe(t);return i&&e.size>0&&r.searchParams.set("_routes",n.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[r.pathname+r.search]}),[l,s,o,u,n,t,a]),f=i.useMemo((()=>function(e,t){return Me(e.map((e=>{let n=t.routes[e.route.id];if(!n)return[];let i=[n.module];return n.imports&&(i=i.concat(n.imports)),i})).flat(1))}(h,o)),[h,o]),p=We(h);return i.createElement(i.Fragment,null,d.map((e=>i.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r}))),f.map((e=>i.createElement("link",{key:e,rel:"modulepreload",href:e,...r}))),p.map((e=>{let{key:t,link:n}=e;return i.createElement("link",{key:t,...n})})))}Ue.displayName="FrameworkContext";var Ke=!1;function Ge(e){let{manifest:t,serverHandoffString:n,isSpaMode:r,renderMeta:s}=Ve(),{router:o,static:a,staticContext:l}=je(),{matches:c}=ze(),u=Fe(r);s&&(s.didRenderScripts=!0);let h=$e(c,null,r);i.useEffect((()=>{Ke=!0}),[]);let d=i.useMemo((()=>{let r=l?`window.__reactRouterContext = ${n};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",s=a?`${t.hmr?.runtime?`import ${JSON.stringify(t.hmr.runtime)};`:""}${u?"":`import ${JSON.stringify(t.url)}`};\n${h.map(((e,n)=>`import * as route${n} from ${JSON.stringify(t.routes[e.route.id].module)};`)).join("\n")}\n  ${u?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let n=new Set(t.state.matches.map((e=>e.route.id))),i=t.state.location.pathname.split("/").filter(Boolean),r=["/"];for(i.pop();i.length>0;)r.push(`/${i.join("/")}`),i.pop();r.forEach((e=>{let i=p(t.routes,e,t.basename);i&&i.forEach((e=>n.add(e.route.id)))}));let s=[...n].reduce(((t,n)=>Object.assign(t,{[n]:e.routes[n]})),{});return{...e,routes:s}}(t,o),null,2)};`:""}\n  window.__reactRouterRouteModules = {${h.map(((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`)).join(",")}};\n\nimport(${JSON.stringify(t.entry.module)});`:" ";return i.createElement(i.Fragment,null,i.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:De(r),type:void 0}),i.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:De(s),type:"module",async:!0}))}),[]),f=h.map((e=>{let n=t.routes[e.route.id];return n?(n.imports||[]).concat([n.module]):[]})).flat(1),g=Ke?[]:t.entry.imports.concat(f);return Ke?null:i.createElement(i.Fragment,null,u?null:i.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin}),i.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin}),(m=g,[...new Set(m)]).map((t=>i.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin}))),d);var m}function Ye(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var Qe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{Qe&&(window.__reactRouterVersion="7.1.5")}catch(jS){}function Xe(e){let{basename:t,children:n,window:r}=e,s=i.useRef();null==s.current&&(s.current=o({window:r,v5Compat:!0}));let a=s.current,[l,c]=i.useState({action:a.action,location:a.location}),u=i.useCallback((e=>{i.startTransition((()=>c(e)))}),[c]);return i.useLayoutEffect((()=>a.listen(u)),[a,u]),i.createElement(me,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a})}var Je=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ze=i.forwardRef((function(e,t){let n,{onClick:r,discover:s="render",prefetch:o="none",relative:c,reloadDocument:u,replace:d,state:f,target:p,to:g,preventScrollReset:m,viewTransition:y,...v}=e,{basename:b}=i.useContext(q),w="string"===typeof g&&Je.test(g),_=!1;if("string"===typeof g&&w&&(n=g,Qe))try{let e=new URL(window.location.href),t=g.startsWith("//")?new URL(e.protocol+g):new URL(g),n=A(t.pathname,b);t.origin===e.origin&&null!=n?g=n+t.search+t.hash:_=!0}catch(jS){l(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(Q(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=i.useContext(q),{hash:s,pathname:o,search:l}=te(e,{relative:t}),c=o;return"/"!==n&&(c="/"===o?n:O([n,o])),r.createHref({pathname:c,search:l,hash:s})}(g,{relative:c}),[k,S,E]=function(e,t){let n=i.useContext(Ue),[r,s]=i.useState(!1),[o,a]=i.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=t,f=i.useRef(null);i.useEffect((()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{a(e.isIntersecting)}))}),{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}}),[e]),i.useEffect((()=>{if(r){let e=setTimeout((()=>{a(!0)}),100);return()=>{clearTimeout(e)}}}),[r]);let p=()=>{s(!0)},g=()=>{s(!1),a(!1)};return n?"intent"!==e?[o,f,{}]:[o,f,{onFocus:Be(l,p),onBlur:Be(c,g),onMouseEnter:Be(u,p),onMouseLeave:Be(h,g),onTouchStart:Be(d,p)}]:[!1,f,{}]}(o,v),T=function(e){let{target:t,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ee(),c=X(),u=te(e,{relative:o});return i.useCallback((i=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(i,t)){i.preventDefault();let t=void 0!==n?n:h(c)===h(u);l(e,{replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:a})}}),[c,l,u,n,r,t,e,s,o,a])}(g,{replace:d,state:f,target:p,preventScrollReset:m,relative:c,viewTransition:y});let I=i.createElement("a",{...v,...E,href:n||x,onClick:_||u?r:function(e){r&&r(e),e.defaultPrevented||T(e)},ref:Ye(t,S),target:p,"data-discover":w||"render"!==s?void 0:"true"});return k&&!w?i.createElement(i.Fragment,null,I,i.createElement(He,{page:x})):I}));Ze.displayName="Link";var et=i.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:s="",end:o=!1,style:l,to:c,viewTransition:u,children:h,...d}=e,f=te(c,{relative:d.relative}),p=X(),g=i.useContext(B),{navigator:m,basename:y}=i.useContext(q),v=null!=g&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.useContext($);a(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=it("useViewTransitionState"),s=te(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=A(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=A(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=I(s.pathname,l)||null!=I(s.pathname,o)}(f)&&!0===u,b=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,w=p.pathname,_=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(w=w.toLowerCase(),_=_?_.toLowerCase():null,b=b.toLowerCase()),_&&y&&(_=A(_,y)||_);const x="/"!==b&&b.endsWith("/")?b.length-1:b.length;let k,S=w===b||!o&&w.startsWith(b)&&"/"===w.charAt(x),E=null!=_&&(_===b||!o&&_.startsWith(b)&&"/"===_.charAt(b.length)),T={isActive:S,isPending:E,isTransitioning:v},C=S?n:void 0;k="function"===typeof s?s(T):[s,S?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let R="function"===typeof l?l(T):l;return i.createElement(Ze,{...d,"aria-current":C,className:k,ref:t,style:R,to:c,viewTransition:u},"function"===typeof h?h(T):h)}));et.displayName="NavLink";var tt=i.forwardRef(((e,t)=>{let{discover:n="render",fetcherKey:r,navigate:s,reloadDocument:o,replace:l,state:c,method:u=be,action:d,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:m,...y}=e,v=ot(),b=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=i.useContext(q),r=i.useContext(G);a(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...te(e||".",{relative:t})},l=X();if(null==e){o.search=l.search;let e=new URLSearchParams(o.search),t=e.getAll("index"),n=t.some((e=>""===e));if(n){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();o.search=n?`?${n}`:""}}e&&"."!==e||!s.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:O([n,o.pathname]));return h(o)}(d,{relative:p}),w="get"===u.toLowerCase()?"get":"post",_="string"===typeof d&&Je.test(d);return i.createElement("form",{ref:t,method:w,action:b,onSubmit:o?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=t?.getAttribute("formmethod")||u;v(t||e.currentTarget,{fetcherKey:r,method:n,navigate:s,replace:l,state:c,relative:p,preventScrollReset:g,viewTransition:m})},...y,"data-discover":_||"render"!==n?void 0:"true"})}));function nt(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function it(e){let t=i.useContext(V);return a(t,nt(e)),t}tt.displayName="Form";var rt=0,st=()=>`__${String(++rt)}__`;function ot(){let{router:e}=it("useSubmit"),{basename:t}=i.useContext(q),n=he("useRouteId");return i.useCallback((async function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:o,encType:a,formData:l,body:c}=Ee(i,t);if(!1===r.navigate){let t=r.fetcherKey||st();await e.fetch(t,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,flushSync:r.flushSync})}else await e.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})}),[e,t,n])}new TextEncoder;const at=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},lt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,o=s?e[r+1]:0,a=r+2<e.length,l=a?e[r+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(at(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const o=r<e.length?n[e.charAt(r)]:64;++r;const a=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==o||null==a)throw new ct;const l=t<<2|s>>4;if(i.push(l),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ct extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ut=function(e){return function(e){const t=at(e);return lt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ht=function(e){try{return lt.decodeString(e,!0)}catch(jS){console.error("base64Decode failed: ",jS)}return null};const dt=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ft=()=>{try{return dt()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/otelsim",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(jS){return}const t=e&&ht(e[1]);return t&&JSON.parse(t)})()}catch(jS){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${jS}`)}},pt=e=>{var t,n;return null===(n=null===(t=ft())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},gt=()=>{var e;return null===(e=ft())||void 0===e?void 0:e.config},mt=e=>{var t;return null===(t=ft())||void 0===t?void 0:t[`_${e}`]};class yt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function vt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function bt(){try{return"object"===typeof indexedDB}catch(jS){return!1}}class wt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,wt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_t.prototype.create)}}class _t{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,i=this.errors[e],r=i?function(e,t){return e.replace(xt,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(i,t):"Error",s=`${this.serviceName}: ${r} (${n}).`;return new wt(n,s,t)}}const xt=/\{\$([^}]+)}/g;function kt(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(St(n)&&St(s)){if(!kt(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function St(e){return null!==e&&"object"===typeof e}function Et(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Tt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function It(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Ct{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=At),void 0===i.error&&(i.error=At),void 0===i.complete&&(i.complete=At);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(jS){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(jS){"undefined"!==typeof console&&console.error&&console.error(jS)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function At(){}function Rt(e){return e&&e._delegate?e._delegate:e}class Mt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Nt="[DEFAULT]";class Dt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new yt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(jS){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(jS){if(i)return null;throw jS}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Nt})}catch(jS){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(jS){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===Nt?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(s){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt;return this.component?this.component.multipleInstances?e:Nt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ot{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Dt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Pt=[];var Lt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Lt||(Lt={}));const Ft={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},jt=Lt.INFO,zt={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},Ut=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=zt[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];console[i](`[${n}]  ${e.name}:`,...s)};class Vt{constructor(e){this.name=e,this._logLevel=jt,this._logHandler=Ut,this._userLogHandler=null,Pt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ft[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...t),this._logHandler(this,Lt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...t),this._logHandler(this,Lt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...t),this._logHandler(this,Lt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...t),this._logHandler(this,Lt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...t),this._logHandler(this,Lt.ERROR,...t)}}let Bt,$t;const Ht=new WeakMap,Wt=new WeakMap,qt=new WeakMap,Kt=new WeakMap,Gt=new WeakMap;let Yt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Wt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||qt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Qt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?($t||($t=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(Zt(this),n),Jt(Ht.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Jt(e.apply(Zt(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(Zt(this),t,...i);return qt.set(s,t.sort?t.sort():[t]),Jt(s)}}function Xt(e){return"function"===typeof e?Qt(e):(e instanceof IDBTransaction&&function(e){if(Wt.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));Wt.set(e,t)}(e),t=e,(Bt||(Bt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Yt):e);var t}function Jt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(Jt(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Ht.set(t,e)})).catch((()=>{})),Gt.set(t,e),t}(e);if(Kt.has(e))return Kt.get(e);const t=Xt(e);return t!==e&&(Kt.set(e,t),Gt.set(t,e)),t}const Zt=e=>Gt.get(e);const en=["get","getKey","getAll","getAllKeys","count"],tn=["put","add","delete","clear"],nn=new Map;function rn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(nn.get(t))return nn.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=tn.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!en.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return i&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),r&&t.done]))[0]};return nn.set(t,s),s}!function(e){Yt=e(Yt)}((e=>({...e,get:(t,n,i)=>rn(t,n)||e.get(t,n,i),has:(t,n)=>!!rn(t,n)||e.has(t,n)})));class sn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const on="@firebase/app",an="0.9.13",ln=new Vt("@firebase/app"),cn="@firebase/app-compat",un="@firebase/analytics-compat",hn="@firebase/analytics",dn="@firebase/app-check-compat",fn="@firebase/app-check",pn="@firebase/auth",gn="@firebase/auth-compat",mn="@firebase/database",yn="@firebase/database-compat",vn="@firebase/functions",bn="@firebase/functions-compat",wn="@firebase/installations",_n="@firebase/installations-compat",xn="@firebase/messaging",kn="@firebase/messaging-compat",Sn="@firebase/performance",En="@firebase/performance-compat",Tn="@firebase/remote-config",In="@firebase/remote-config-compat",Cn="@firebase/storage",An="@firebase/storage-compat",Rn="@firebase/firestore",Mn="@firebase/firestore-compat",Nn="firebase",Dn="[DEFAULT]",On={[on]:"fire-core",[cn]:"fire-core-compat",[hn]:"fire-analytics",[un]:"fire-analytics-compat",[fn]:"fire-app-check",[dn]:"fire-app-check-compat",[pn]:"fire-auth",[gn]:"fire-auth-compat",[mn]:"fire-rtdb",[yn]:"fire-rtdb-compat",[vn]:"fire-fn",[bn]:"fire-fn-compat",[wn]:"fire-iid",[_n]:"fire-iid-compat",[xn]:"fire-fcm",[kn]:"fire-fcm-compat",[Sn]:"fire-perf",[En]:"fire-perf-compat",[Tn]:"fire-rc",[In]:"fire-rc-compat",[Cn]:"fire-gcs",[An]:"fire-gcs-compat",[Rn]:"fire-fst",[Mn]:"fire-fst-compat","fire-js":"fire-js",[Nn]:"fire-js-all"},Pn=new Map,Ln=new Map;function Fn(e,t){try{e.container.addComponent(t)}catch(jS){ln.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,jS)}}function jn(e){const t=e.name;if(Ln.has(t))return ln.debug(`There were multiple attempts to register component ${t}.`),!1;Ln.set(t,e);for(const n of Pn.values())Fn(n,e);return!0}function zn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Un=new _t("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Vn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Mt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}}const Bn="9.23.0";function $n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:Dn,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!==typeof r||!r)throw Un.create("bad-app-name",{appName:String(r)});if(n||(n=gt()),!n)throw Un.create("no-options");const s=Pn.get(r);if(s){if(kt(n,s.options)&&kt(i,s.config))return s;throw Un.create("duplicate-app",{appName:r})}const o=new Ot(r);for(const l of Ln.values())o.addComponent(l);const a=new Vn(n,i,o);return Pn.set(r,a),a}function Hn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn;const t=Pn.get(e);if(!t&&e===Dn&&gt())return $n();if(!t)throw Un.create("no-app",{appName:e});return t}function Wn(e,t,n){var i;let r=null!==(i=On[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${r}" with version "${t}":`];return s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ln.warn(e.join(" "))}jn(new Mt(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}const qn="firebase-heartbeat-store";let Kn=null;function Gn(){return Kn||(Kn=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Jt(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(Jt(o.result),e.oldVersion,e.newVersion,Jt(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(qn)}}).catch((e=>{throw Un.create("idb-open",{originalErrorMessage:e.message})}))),Kn}async function Yn(e,t){try{const n=(await Gn()).transaction(qn,"readwrite"),i=n.objectStore(qn);await i.put(t,Qn(e)),await n.done}catch(jS){if(jS instanceof wt)ln.warn(jS.message);else{const t=Un.create("idb-set",{originalErrorMessage:null===jS||void 0===jS?void 0:jS.message});ln.warn(t.message)}}}function Qn(e){return`${e.name}!${e.options.appId}`}class Xn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Zn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Jn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Jn(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),ei(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ei(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=ut(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Jn(){return(new Date).toISOString().substring(0,10)}class Zn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!bt()&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Gn();return await t.transaction(qn).objectStore(qn).get(Qn(e))}catch(jS){if(jS instanceof wt)ln.warn(jS.message);else{const t=Un.create("idb-get",{originalErrorMessage:null===jS||void 0===jS?void 0:jS.message});ln.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Yn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Yn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ei(e){return ut(JSON.stringify({version:2,heartbeats:e})).length}var ti;ti="",jn(new Mt("platform-logger",(e=>new sn(e)),"PRIVATE")),jn(new Mt("heartbeat",(e=>new Xn(e)),"PRIVATE")),Wn(on,an,ti),Wn(on,an,"esm2017"),Wn("fire-js","");Wn("firebase","9.23.0","app");function ni(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function ii(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ri=ii,si=new _t("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),oi=new Vt("@firebase/auth");function ai(e){if(oi.logLevel<=Lt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];oi.error(`Auth (${Bn}): ${e}`,...n)}}function li(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw hi(e,...n)}function ci(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return hi(e,...n)}function ui(e,t,n){const i=Object.assign(Object.assign({},ri()),{[t]:n});return new _t("auth","Firebase",i).create(t,{appName:e.name})}function hi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){const t=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(t,...i)}return si.create(e,...n)}function di(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw hi(t,...i)}}function fi(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ai(t),new Error(t)}function pi(e,t){e||fi(t)}function gi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function mi(){return"http:"===yi()||"https:"===yi()}function yi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function vi(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(mi()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class bi{constructor(e,t){this.shortDelay=e,this.longDelay=t,pi(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return vi()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wi(e,t){pi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class _i{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ki=new bi(3e4,6e4);function Si(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ei(e,t,n,i){return Ti(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const o=Et(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),_i.fetch()(Ci(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))}))}async function Ti(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},xi),t);try{const t=new Ai(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw Ri(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ri(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Ri(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Ri(e,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw ui(e,a,o);li(e,a)}}catch(jS){if(jS instanceof wt)throw jS;li(e,"network-request-failed",{message:String(jS)})}}async function Ii(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Ei(e,t,n,i,r);return"mfaPendingCredential"in s&&li(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Ci(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?wi(e.config,r):`${e.config.apiScheme}://${r}`}class Ai{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(ci(this.auth,"network-request-failed"))),ki.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ri(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ci(e,t,i);return r.customData._tokenResponse=n,r}function Mi(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(jS){}}function Ni(e){return 1e3*Number(e)}function Di(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return ai("JWT malformed, contained fewer than 3 sections"),null;try{const e=ht(n);return e?JSON.parse(e):(ai("Failed to decode base64 JWT payload"),null)}catch(jS){return ai("Caught error parsing JWT payload as JSON",null===jS||void 0===jS?void 0:jS.toString()),null}}async function Oi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(jS){throw jS instanceof wt&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(jS)&&e.auth.currentUser===e&&await e.auth.signOut(),jS}}class Pi{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(jS){return void("auth/network-request-failed"===(null===jS||void 0===jS?void 0:jS.code)&&this.schedule(!0))}this.schedule()}}class Li{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mi(this.lastLoginAt),this.creationTime=Mi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Fi(e){var t;const n=e.auth,i=await e.getIdToken(),r=await Oi(e,async function(e,t){return Ei(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));di(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=ni(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Li(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class ji{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){di(e.idToken,"internal-error"),di("undefined"!==typeof e.idToken,"internal-error"),di("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Di(e);return di(t,"internal-error"),di("undefined"!==typeof t.exp,"internal-error"),di("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return di(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await Ti(e,{},(async()=>{const n=Et({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=Ci(e,i,"/v1/token",`key=${r}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",_i.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new ji;return n&&(di("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(di("string"===typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(di("number"===typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ji,this.toJSON())}_performRefresh(){return fi("not implemented")}}function zi(e,t){di("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ui{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=ni(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Li(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Oi(this,this.stsTokenManager.getToken(this.auth,e));return di(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Rt(e),i=await n.getIdToken(t),r=Di(i);di(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Mi(Ni(r.auth_time)),issuedAtTime:Mi(Ni(r.iat)),expirationTime:Mi(Ni(r.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Rt(e);await Fi(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(di(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){di(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Fi(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Oi(this,async function(e,t){return Ei(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:x}=t;di(v&&x,e,"internal-error");const k=ji.fromJSON(this.name,x);di("string"===typeof v,e,"internal-error"),zi(u,e.name),zi(h,e.name),di("boolean"===typeof b,e,"internal-error"),di("boolean"===typeof w,e,"internal-error"),zi(d,e.name),zi(f,e.name),zi(p,e.name),zi(g,e.name),zi(m,e.name),zi(y,e.name);const S=new Ui({uid:v,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:k,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new ji;i.updateFromServerResponse(t);const r=new Ui({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Fi(r),r}}const Vi=new Map;function Bi(e){pi(e instanceof Function,"Expected a class definition");let t=Vi.get(e);return t?(pi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Vi.set(e,t),t)}class $i{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$i.type="NONE";const Hi=$i;function Wi(e,t,n){return`firebase:${e}:${t}:${n}`}class qi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Wi(this.userKey,i.apiKey,r),this.fullPersistenceKey=Wi("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ui._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new qi(Bi(Hi),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||Bi(Hi);const s=Wi(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Ui._fromJSON(e,t);c!==r&&(o=n),r=c;break}}catch(l){}const a=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(l){}}))),new qi(r,e,n)):new qi(r,e,n)}}function Ki(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Xi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Gi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Zi(t))return"Blackberry";if(er(t))return"Webos";if(Yi(t))return"Safari";if((t.includes("chrome/")||Qi(t))&&!t.includes("edge/"))return"Chrome";if(Ji(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/firefox\//i.test(e)}function Yi(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/crios\//i.test(e)}function Xi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/iemobile/i.test(e)}function Ji(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/android/i.test(e)}function Zi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/blackberry/i.test(e)}function er(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/webos/i.test(e)}function tr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function nr(){return function(){const e=vt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt();return tr(e)||Ji(e)||er(e)||Zi(e)||/windows phone/i.test(e)||Xi(e)}function rr(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ki(vt());break;case"Worker":t=`${Ki(vt())}-${e}`;break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bn}/${i}`}async function sr(e,t){return Ei(e,"GET","/v2/recaptchaConfig",Si(e,t))}function or(e){return void 0!==e&&void 0!==e.enterprise}class ar{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function lr(e){return new Promise(((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=ci("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)}))}function cr(e){return`__${e}${Math.floor(1e6*Math.random())}`}class ur{constructor(e){this.type="recaptcha-enterprise",this.auth=pr(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,i){const r=window.grecaptcha;or(r)?r.enterprise.ready((()=>{r.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{sr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new ar(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((r=>{if(!t&&or(window.grecaptcha))n(r,e,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));lr("https://www.google.com/recaptcha/enterprise.js?render="+r).then((()=>{n(r,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function hr(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new ur(e);let s;try{s=await r.verify(n)}catch(a){s=await r.verify(n,!0)}const o=Object.assign({},t);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class dr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(jS){i(jS)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(jS){t.reverse();for(const i of t)try{i()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===jS||void 0===jS?void 0:jS.message})}}}class fr{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gr(this),this.idTokenSubscription=new gr(this),this.beforeStateQueue=new dr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=si,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bi(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await qi.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(jS){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(jS){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(jS)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return di(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(jS){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fi(e)}catch(jS){if("auth/network-request-failed"!==(null===jS||void 0===jS?void 0:jS.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Rt(e):null;return t&&di(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&di(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Bi(e))}))}async initializeRecaptchaConfig(){const e=await sr(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new ar(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new ur(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _t("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Bi(e)||this._popupRedirectResolver;di(t,this,"argument-error"),this.redirectPersistenceManager=await qi.create(this,[Bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return di(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"===typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return di(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(oi.logLevel<=Lt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];oi.warn(`Auth (${Bn}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function pr(e){return Rt(e)}class gr{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Ct(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return di(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function mr(e,t,n){const i=pr(e);di(i._canInitEmulator,i,"emulator-config-failed"),di(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=yr(t),{host:o,port:a}=function(e){const t=yr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:vr(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:vr(t)}}}(t),l=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function yr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function vr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class br{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fi("not implemented")}_getIdTokenResponse(e){return fi("not implemented")}_linkToIdToken(e,t){return fi("not implemented")}_getReauthenticationResolver(e){return fi("not implemented")}}async function wr(e,t){return Ei(e,"POST","/v1/accounts:update",t)}async function _r(e,t){return Ii(e,"POST","/v1/accounts:signInWithPassword",Si(e,t))}class xr extends br{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new xr(e,t,"password")}static _fromEmailAndCode(e,t){return new xr(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await hr(e,n,"signInWithPassword");return _r(e,t)}return _r(e,n).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await hr(e,n,"signInWithPassword");return _r(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return Ii(e,"POST","/v1/accounts:signInWithEmailLink",Si(e,t))}(e,{email:this._email,oobCode:this._password});default:li(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return wr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Ii(e,"POST","/v1/accounts:signInWithEmailLink",Si(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:li(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function kr(e,t){return Ii(e,"POST","/v1/accounts:signInWithIdp",Si(e,t))}class Sr extends br{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Sr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):li("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=ni(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Sr(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return kr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,kr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,kr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Et(t)}return e}}const Er={USER_NOT_FOUND:"user-not-found"};class Tr extends br{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Tr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Tr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Ii(e,"POST","/v1/accounts:signInWithPhoneNumber",Si(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Ii(e,"POST","/v1/accounts:signInWithPhoneNumber",Si(e,t));if(n.temporaryProof)throw Ri(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Ii(e,"POST","/v1/accounts:signInWithPhoneNumber",Si(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Er)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new Tr({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Ir{constructor(e){var t,n,i,r,s,o;const a=Tt(It(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);di(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Tt(It(e)).link,n=t?Tt(It(t)).deep_link_id:null,i=Tt(It(e)).deep_link_id;return(i?Tt(It(i)).link:null)||i||n||t||e}(e);try{return new Ir(t)}catch(n){return null}}}class Cr{constructor(){this.providerId=Cr.PROVIDER_ID}static credential(e,t){return xr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ir.parseLink(t);return di(n,"argument-error"),xr._fromEmailAndCode(e,n.code,n.tenantId)}}Cr.PROVIDER_ID="password",Cr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Cr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ar{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Rr extends Ar{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Mr extends Rr{constructor(){super("facebook.com")}static credential(e){return Sr._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Mr.credential(t.oauthAccessToken)}catch(n){return null}}}Mr.FACEBOOK_SIGN_IN_METHOD="facebook.com",Mr.PROVIDER_ID="facebook.com";class Nr extends Rr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Sr._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Nr.credential(n,i)}catch(r){return null}}}Nr.GOOGLE_SIGN_IN_METHOD="google.com",Nr.PROVIDER_ID="google.com";class Dr extends Rr{constructor(){super("github.com")}static credential(e){return Sr._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Dr.credential(t.oauthAccessToken)}catch(n){return null}}}Dr.GITHUB_SIGN_IN_METHOD="github.com",Dr.PROVIDER_ID="github.com";class Or extends Rr{constructor(){super("twitter.com")}static credential(e,t){return Sr._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Or.credential(n,i)}catch(r){return null}}}async function Pr(e,t){return Ii(e,"POST","/v1/accounts:signUp",Si(e,t))}Or.TWITTER_SIGN_IN_METHOD="twitter.com",Or.PROVIDER_ID="twitter.com";class Lr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await Ui._fromIdTokenResponse(e,n,i),s=Fr(n);return new Lr({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Fr(n);return new Lr({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Fr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class jr extends wt{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,jr.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new jr(e,t,n,i)}}function zr(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw jr._fromErrorAndOperation(e,n,t,i);throw n}))}async function Ur(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await Oi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Lr._forOperation(e,"link",i)}async function Vr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e,r="reauthenticate";try{const s=await Oi(e,zr(i,r,t,e),n);di(s.idToken,i,"internal-error");const o=Di(s.idToken);di(o,i,"internal-error");const{sub:a}=o;return di(e.uid===a,i,"user-mismatch"),Lr._forOperation(e,r,s)}catch(jS){throw"auth/user-not-found"===(null===jS||void 0===jS?void 0:jS.code)&&li(i,"user-mismatch"),jS}}async function Br(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i="signIn",r=await zr(e,i,t),s=await Lr._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function $r(e,t){return Br(pr(e),t)}function Hr(e,t,n){return $r(Rt(e),Cr.credential(t,n))}new WeakMap;const Wr="__sak";class qr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wr,"1"),this.storage.removeItem(Wr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Kr extends qr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=vt();return Yi(e)||tr(e)}()&&function(){try{return!(!window||window===window.top)}catch(jS){return!1}}(),this.fallbackToPolling=ir(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);nr()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Kr.type="LOCAL";const Gr=Kr;class Yr extends qr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Yr.type="SESSION";const Qr=Yr;class Xr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Xr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async e=>e(t.origin,r))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Jr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}Xr.receivers=[];class Zr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const l=Jr("",20);i.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function es(){return window}function ts(){return"undefined"!==typeof es().WorkerGlobalScope&&"function"===typeof es().importScripts}const ns="firebaseLocalStorageDb",is="firebaseLocalStorage",rs="fbase_key";class ss{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function os(e,t){return e.transaction([is],t?"readwrite":"readonly").objectStore(is)}function as(){const e=indexedDB.open(ns,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(is,{keyPath:rs})}catch(jS){n(jS)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(is)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ns);return new ss(e).toPromise()}(),t(await as()))}))}))}async function ls(e,t,n){const i=os(e,!0).put({[rs]:t,value:n});return new ss(i).toPromise()}function cs(e,t){const n=os(e,!0).delete(t);return new ss(n).toPromise()}class us{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await as()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(jS){if(t++>3)throw jS;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ts()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xr._getInstance(ts()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Zr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await as();return await ls(e,Wr,"1"),await cs(e,Wr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>ls(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=os(e,!1).get(t),i=await new ss(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>cs(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=os(e,!1).getAll();return new ss(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}us.type="LOCAL";const hs=us;cr("rcb"),new bi(3e4,6e4);const ds="recaptcha";async function fs(e,t,n){var i;const r=await n.verify();try{let s;if(di("string"===typeof r,e,"argument-error"),di(n.type===ds,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){di("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Ei(e,"POST","/v2/accounts/mfaEnrollment:start",Si(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{di("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;di(n,e,"missing-multi-factor-info");const o=await function(e,t){return Ei(e,"POST","/v2/accounts/mfaSignIn:start",Si(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Ei(e,"POST","/v1/accounts:sendVerificationCode",Si(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}class ps{constructor(e){this.providerId=ps.PROVIDER_ID,this.auth=pr(e)}verifyPhoneNumber(e,t){return fs(this.auth,e,Rt(t))}static credential(e,t){return Tr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ps.credentialFromTaggedObject(t)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:i}=t;return n&&i?Tr._fromTokenResponse(n,i):null}}function gs(e,t){return t?Bi(t):(di(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ps.PROVIDER_ID="phone",ps.PHONE_SIGN_IN_METHOD="phone";class ms extends br{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return kr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return kr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ys(e){return Br(e.auth,new ms(e),e.bypassAuthState)}function vs(e){const{auth:t,user:n}=e;return di(n,t,"internal-error"),Vr(n,new ms(e),e.bypassAuthState)}async function bs(e){const{auth:t,user:n}=e;return di(n,t,"internal-error"),Ur(n,new ms(e),e.bypassAuthState)}class ws{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(jS){this.reject(jS)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(jS){this.reject(jS)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ys;case"linkViaPopup":case"linkViaRedirect":return bs;case"reauthViaPopup":case"reauthViaRedirect":return vs;default:li(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _s=new bi(2e3,1e4);class xs extends ws{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,xs.currentPopupAction&&xs.currentPopupAction.cancel(),xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return di(e,this.auth,"internal-error"),e}async onExecution(){pi(1===this.filter.length,"Popup operations only handle one event");const e=Jr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(ci(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,_s.get())};e()}}xs.currentPopupAction=null;const ks=new Map;class Ss extends ws{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ks.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Is(t),i=Ts(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(jS){e=()=>Promise.reject(jS)}ks.set(this.auth._key(),e)}return this.bypassAuthState||ks.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Es(e,t){ks.set(e._key(),t)}function Ts(e){return Bi(e._redirectPersistence)}function Is(e){return Wi("pendingRedirect",e.config.apiKey,e.name)}async function Cs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=pr(e),r=gs(i,t),s=new Ss(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class As{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ms(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ms(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ci(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rs(e))}saveEventToCache(e){this.cachedEventUids.add(Rs(e)),this.lastProcessedEventTime=Date.now()}}function Rs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Ms(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Ns=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ds=/^https?/;async function Os(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Ei(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const i of t)try{if(Ps(i))return}catch(n){}li(e,"unauthorized-domain")}function Ps(e){const t=gi(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Ds.test(n))return!1;if(Ns.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Ls=new bi(3e4,6e4);function Fs(){const e=es().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let js=null;function zs(e){return js=js||function(e){return new Promise(((t,n)=>{var i,r,s;function o(){Fs(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Fs(),n(ci(e,"network-request-failed"))},timeout:Ls.get()})}if(null===(r=null===(i=es().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=es().gapi)||void 0===s?void 0:s.load)){const t=cr("iframefcb");return es()[t]=()=>{gapi.load?o():n(ci(e,"network-request-failed"))},lr(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw js=null,e}))}(e),js}const Us=new bi(5e3,15e3),Vs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $s(e){const t=e.config;di(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?wi(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:Bn},r=Bs.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Et(i).slice(1)}`}const Hs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ws{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(jS){}}}function qs(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Hs),{width:i.toString(),height:r.toString(),top:s,left:o}),c=vt().toLowerCase();n&&(a=Qi(c)?"_blank":n),Gi(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,i]=t;return`${e}${n}=${i},`}),"");if(function(){var e;return tr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new Ws(null);const h=window.open(t||"",a,u);di(h,e,"popup-blocked");try{h.focus()}catch(jS){}return new Ws(h)}const Ks="__/auth/handler",Gs="emulator/auth/handler",Ys=encodeURIComponent("fac");async function Qs(e,t,n,i,r,s){di(e.config.authDomain,e,"auth-domain-config-required"),di(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Bn,eventId:r};if(t instanceof Ar){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Rr){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${Ys}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Ks}`;return wi(t,Gs)}(e)}?${Et(a).slice(1)}${c}`}const Xs="webStorageSupport";const Js=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qr,this._completeRedirectFn=Cs,this._overrideRedirectResult=Es}async _openPopup(e,t,n,i){var r;pi(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return qs(e,await Qs(e,t,n,gi(),i),Jr())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){es().location.href=e}(await Qs(e,t,n,gi(),i)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(pi(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await zs(e),n=es().gapi;return di(n,e,"internal-error"),t.open({where:document.body,url:$s(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vs,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=ci(e,"network-request-failed"),s=es().setTimeout((()=>{i(r)}),Us.get());function o(){es().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{i(r)}))}))))}(e),n=new As(e);return t.register("authEvent",(t=>{di(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xs,{type:Xs},(n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[Xs];void 0!==r&&t(!!r),li(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Os(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ir()||Yi()||tr()}};var Zs="@firebase/auth",eo="0.23.2";class to{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){di(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const no=mt("authIdTokenMaxAge")||300;let io=null;var ro;ro="Browser",jn(new Mt("auth",((e,t)=>{let{options:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;di(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:ro,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rr(ro)},c=new fr(i,r,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Bi);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),jn(new Mt("auth-internal",(e=>(e=>new to(e))(pr(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Wn(Zs,eo,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ro)),Wn(Zs,eo,"esm2017");var so,oo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ao={},lo=lo||{},co=oo||self;function uo(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ho(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var fo="closure_uid_"+(1e9*Math.random()>>>0),po=0;function go(e,t,n){return e.call.apply(e.bind,arguments)}function mo(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function yo(e,t,n){return(yo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?go:mo).apply(null,arguments)}function vo(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function bo(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function wo(){this.s=this.s,this.o=this.o}wo.prototype.s=!1,wo.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,fo)&&e[fo]||(e[fo]=++po))},wo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _o=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function xo(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function ko(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(uo(t)){const n=e.length||0,i=t.length||0;e.length=n+i;for(let r=0;r<i;r++)e[n+r]=t[r]}else e.push(t)}}function So(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}So.prototype.h=function(){this.defaultPrevented=!0};var Eo=function(){if(!co.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{co.addEventListener("test",(()=>{}),t),co.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function To(e){return/^[\s\xa0]*$/.test(e)}function Io(){var e=co.navigator;return e&&(e=e.userAgent)?e:""}function Co(e){return-1!=Io().indexOf(e)}function Ao(e){return Ao[" "](e),e}Ao[" "]=function(){};var Ro,Mo,No=Co("Opera"),Do=Co("Trident")||Co("MSIE"),Oo=Co("Edge"),Po=Oo||Do,Lo=Co("Gecko")&&!(-1!=Io().toLowerCase().indexOf("webkit")&&!Co("Edge"))&&!(Co("Trident")||Co("MSIE"))&&!Co("Edge"),Fo=-1!=Io().toLowerCase().indexOf("webkit")&&!Co("Edge");function jo(){var e=co.document;return e?e.documentMode:void 0}e:{var zo="",Uo=function(){var e=Io();return Lo?/rv:([^\);]+)(\)|;)/.exec(e):Oo?/Edge\/([\d\.]+)/.exec(e):Do?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Fo?/WebKit\/(\S+)/.exec(e):No?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Uo&&(zo=Uo?Uo[1]:""),Do){var Vo=jo();if(null!=Vo&&Vo>parseFloat(zo)){Ro=String(Vo);break e}}Ro=zo}if(co.document&&Do){var Bo=jo();Mo=Bo||(parseInt(Ro,10)||void 0)}else Mo=void 0;var $o=Mo;function Ho(e,t){if(So.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Lo){e:{try{Ao(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Wo[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ho.$.h.call(this)}}bo(Ho,So);var Wo={2:"touch",3:"pen",4:"mouse"};Ho.prototype.h=function(){Ho.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var qo="closure_listenable_"+(1e6*Math.random()|0),Ko=0;function Go(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.la=r,this.key=++Ko,this.fa=this.ia=!1}function Yo(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Qo(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function Xo(e){const t={};for(const n in e)t[n]=e[n];return t}const Jo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zo(e,t){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)e[n]=i[n];for(let t=0;t<Jo.length;t++)n=Jo[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function ea(e){this.src=e,this.g={},this.h=0}function ta(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=_o(r,t);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Yo(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function na(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==i)return r}return-1}ea.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=na(e,t,i,r);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Go(t,this.src,s,!!i,r)).ia=n,e.push(t)),t};var ia="closure_lm_"+(1e6*Math.random()|0),ra={};function sa(e,t,n,i,r){if(i&&i.once)return aa(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)sa(e,t[s],n,i,r);return null}return n=pa(n),e&&e[qo]?e.O(t,n,ho(i)?!!i.capture:!!i,r):oa(e,t,n,!1,i,r)}function oa(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var o=ho(r)?!!r.capture:!!r,a=da(e);if(a||(e[ia]=a=new ea(e)),(n=a.add(t,n,i,o,s)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ha;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)Eo||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(ua(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function aa(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)aa(e,t[s],n,i,r);return null}return n=pa(n),e&&e[qo]?e.P(t,n,ho(i)?!!i.capture:!!i,r):oa(e,t,n,!0,i,r)}function la(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)la(e,t[s],n,i,r);else i=ho(i)?!!i.capture:!!i,n=pa(n),e&&e[qo]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=na(s=e.g[t],n,i,r))&&(Yo(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=da(e))&&(t=e.g[t.toString()],e=-1,t&&(e=na(t,n,i,r)),(n=-1<e?t[e]:null)&&ca(n))}function ca(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[qo])ta(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(ua(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=da(t))?(ta(n,e),0==n.h&&(n.src=null,t[ia]=null)):Yo(e)}}}function ua(e){return e in ra?ra[e]:ra[e]="on"+e}function ha(e,t){if(e.fa)e=!0;else{t=new Ho(t,this);var n=e.listener,i=e.la||e.src;e.ia&&ca(e),e=n.call(i,t)}return e}function da(e){return(e=e[ia])instanceof ea?e:null}var fa="__closure_events_fn_"+(1e9*Math.random()>>>0);function pa(e){return"function"===typeof e?e:(e[fa]||(e[fa]=function(t){return e.handleEvent(t)}),e[fa])}function ga(){wo.call(this),this.i=new ea(this),this.S=this,this.J=null}function ma(e,t){var n,i=e.J;if(i)for(n=[];i;i=i.J)n.push(i);if(e=e.S,i=t.type||t,"string"===typeof t)t=new So(t,e);else if(t instanceof So)t.target=t.target||e;else{var r=t;Zo(t=new So(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=ya(o,i,!0,t)&&r}if(r=ya(o=t.g=e,i,!0,t)&&r,r=ya(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=ya(o=t.g=n[s],i,!1,t)&&r}function ya(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&ta(e.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}bo(ga,wo),ga.prototype[qo]=!0,ga.prototype.removeEventListener=function(e,t,n,i){la(this,e,t,n,i)},ga.prototype.N=function(){if(ga.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Yo(n[i]);delete t.g[e],t.h--}}this.J=null},ga.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},ga.prototype.P=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var va=co.JSON.stringify;function ba(){var e=Ta;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var wa=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new _a),(e=>e.reset()));class _a{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function xa(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ka(e){co.setTimeout((()=>{throw e}),0)}let Sa,Ea=!1,Ta=new class{constructor(){this.h=this.g=null}add(e,t){const n=wa.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ia=()=>{const e=co.Promise.resolve(void 0);Sa=()=>{e.then(Ca)}};var Ca=()=>{for(var e;e=ba();){try{e.h.call(e.g)}catch(n){ka(n)}var t=wa;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ea=!1};function Aa(e,t){ga.call(this),this.h=e||1,this.g=t||co,this.j=yo(this.qb,this),this.l=Date.now()}function Ra(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Ma(e,t,n){if("function"===typeof e)n&&(e=yo(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=yo(e.handleEvent,e)}return 2147483647<Number(t)?-1:co.setTimeout(e,t||0)}function Na(e){e.g=Ma((()=>{e.g=null,e.i&&(e.i=!1,Na(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}bo(Aa,ga),(so=Aa.prototype).ga=!1,so.T=null,so.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ma(this,"tick"),this.ga&&(Ra(this),this.start()))}},so.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},so.N=function(){Aa.$.N.call(this),Ra(this),delete this.g};class Da extends wo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Na(this)}N(){super.N(),this.g&&(co.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oa(e){wo.call(this),this.h=e,this.g={}}bo(Oa,wo);var Pa=[];function La(e,t,n,i){Array.isArray(n)||(n&&(Pa[0]=n.toString()),n=Pa);for(var r=0;r<n.length;r++){var s=sa(t,n[r],i||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Fa(e){Qo(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ca(e)}),e),e.g={}}function ja(){this.g=!0}function za(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return va(n)}catch(a){return t}}(e,n)+(i?" "+i:"")}))}Oa.prototype.N=function(){Oa.$.N.call(this),Fa(this)},Oa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ja.prototype.Ea=function(){this.g=!1},ja.prototype.info=function(){};var Ua={},Va=null;function Ba(){return Va=Va||new ga}function $a(e){So.call(this,Ua.Ta,e)}function Ha(e){const t=Ba();ma(t,new $a(t))}function Wa(e,t){So.call(this,Ua.STAT_EVENT,e),this.stat=t}function qa(e){const t=Ba();ma(t,new Wa(t,e))}function Ka(e,t){So.call(this,Ua.Ua,e),this.size=t}function Ga(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return co.setTimeout((function(){e()}),t)}Ua.Ta="serverreachability",bo($a,So),Ua.STAT_EVENT="statevent",bo(Wa,So),Ua.Ua="timingevent",bo(Ka,So);var Ya={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qa={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xa(){}function Ja(e){return e.h||(e.h=e.i())}function Za(){}Xa.prototype.h=null;var el,tl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function nl(){So.call(this,"d")}function il(){So.call(this,"c")}function rl(){}function sl(e,t,n,i){this.l=e,this.j=t,this.m=n,this.W=i||1,this.U=new Oa(this),this.P=al,e=Po?125:void 0,this.V=new Aa(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ol}function ol(){this.i=null,this.g="",this.h=!1}bo(nl,So),bo(il,So),bo(rl,Xa),rl.prototype.g=function(){return new XMLHttpRequest},rl.prototype.i=function(){return{}},el=new rl;var al=45e3,ll={},cl={};function ul(e,t,n){e.L=1,e.v=Al(Sl(t)),e.s=n,e.S=!0,hl(e,null)}function hl(e,t){e.G=Date.now(),gl(e),e.A=Sl(e.v);var n=e.A,i=e.W;Array.isArray(i)||(i=[String(i)]),Bl(n.i,"t",i),e.C=0,n=e.l.J,e.h=new ol,e.g=$c(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Da(yo(e.Pa,e,e.g),e.O)),La(e.U,e.g,"readystatechange",e.nb),t=e.I?Xo(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Ha(),function(e,t,n,i,r,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function dl(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function fl(e,t,n){let i,r=!0;for(;!e.J&&e.C<n.length;){if(i=pl(e,n),i==cl){4==t&&(e.o=4,qa(14),r=!1),za(e.j,e.m,null,"[Incomplete Response]");break}if(i==ll){e.o=4,qa(15),za(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}za(e.j,e.m,i,null),wl(e,i)}dl(e)&&i!=cl&&i!=ll&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,qa(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Pc(t),t.M=!0,qa(11))):(za(e.j,e.m,n,"[Invalid Chunked Response]"),bl(e),vl(e))}function pl(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?cl:(n=Number(t.substring(n,i)),isNaN(n)?ll:(i+=1)+n>t.length?cl:(t=t.slice(i,i+n),e.C=i+n,t))}function gl(e){e.Y=Date.now()+e.P,ml(e,e.P)}function ml(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ga(yo(e.lb,e),t)}function yl(e){e.B&&(co.clearTimeout(e.B),e.B=null)}function vl(e){0==e.l.H||e.J||jc(e.l,e)}function bl(e){yl(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ra(e.V),Fa(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function wl(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Yl(n.i,e)))if(!e.K&&Yl(n.i,e)&&3==n.H){try{var i=n.Ja.g.parse(t)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Fc(n),Ic(n)}Oc(n),qa(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ga(yo(n.ib,n),6e3));if(1>=Gl(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Uc(n,11)}else if((e.K||n.g==e)&&Fc(n),!To(t))for(r=n.Ja.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const r=c[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ql(s,s.h),s.h=null))}if(i.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.Da=e,Cl(i.I,i.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((i=n).wa=Bc(i,i.J?i.pa:null,i.Y),o.K){Xl(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.B&&(yl(a),gl(a)),i.g=o}else Dc(i);0<n.j.length&&Ac(n)}else"stop"!=c[0]&&"close"!=c[0]||Uc(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Uc(n,7):Tc(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Ha()}catch(c){}}function _l(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(uo(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(uo(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(uo(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],n&&n[s],e)}(so=sl.prototype).setTimeout=function(e){this.P=e},so.nb=function(e){e=e.target;const t=this.M;t&&3==wc(e)?t.l():this.Pa(e)},so.Pa=function(e){try{if(e==this.g)e:{const u=wc(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Po||this.g&&(this.h.h||this.g.ja()||_c(this.g)))){this.J||4!=u||7==t||Ha(),yl(this);var n=this.g.da();this.ca=n;t:if(dl(this)){var i=_c(this.g);e="";var r=i.length,s=4==wc(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){bl(this),vl(this);var o="";break t}this.h.i=new co.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,i,r,s,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!To(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,qa(12),bl(this),vl(this);break e}za(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wl(this,n)}this.S?(fl(this,u,o),Po&&this.i&&3==u&&(La(this.U,this.V,"tick",this.mb),this.V.start())):(za(this.j,this.m,o,null),wl(this,o)),4==u&&bl(this),this.i&&!this.J&&(4==u?jc(this.l,this):(this.i=!1,gl(this)))}else(function(e){const t={};e=(e.g&&2<=wc(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(To(e[i]))continue;var n=xa(e[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[r]||[];t[r]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,qa(12)):(this.o=0,qa(13)),bl(this),vl(this)}}}catch(u){}},so.mb=function(){if(this.g){var e=wc(this.g),t=this.g.ja();this.C<t.length&&(yl(this),fl(this,e,t),this.i&&4!=e&&gl(this))}},so.cancel=function(){this.J=!0,bl(this)},so.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Ha(),qa(17)),bl(this),this.o=2,vl(this)):ml(this,this.Y-e)};var xl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kl(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof kl){this.h=e.h,El(this,e.j),this.s=e.s,this.g=e.g,Tl(this,e.m),this.l=e.l;var t=e.i,n=new jl;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Il(this,n),this.o=e.o}else e&&(t=String(e).match(xl))?(this.h=!1,El(this,t[1]||"",!0),this.s=Rl(t[2]||""),this.g=Rl(t[3]||"",!0),Tl(this,t[4]),this.l=Rl(t[5]||"",!0),Il(this,t[6]||"",!0),this.o=Rl(t[7]||"")):(this.h=!1,this.i=new jl(null,this.h))}function Sl(e){return new kl(e)}function El(e,t,n){e.j=n?Rl(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Tl(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Il(e,t,n){t instanceof jl?(e.i=t,function(e,t){t&&!e.j&&(zl(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ul(this,t),Bl(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ml(t,Ll)),e.i=new jl(t,e.h))}function Cl(e,t,n){e.i.set(t,n)}function Al(e){return Cl(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Rl(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ml(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Nl),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Nl(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}kl.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ml(t,Dl,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ml(t,Dl,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ml(n,"/"==n.charAt(0)?Pl:Ol,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ml(n,Fl)),e.join("")};var Dl=/[#\/\?@]/g,Ol=/[#\?:]/g,Pl=/[#\?]/g,Ll=/[#\?@]/g,Fl=/#/g;function jl(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function zl(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ul(e,t){zl(e),t=$l(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Vl(e,t){return zl(e),t=$l(e,t),e.g.has(t)}function Bl(e,t,n){Ul(e,t),0<n.length&&(e.i=null,e.g.set($l(e,t),xo(n)),e.h+=n.length)}function $l(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(so=jl.prototype).add=function(e,t){zl(this),this.i=null,e=$l(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},so.forEach=function(e,t){zl(this),this.g.forEach((function(n,i){n.forEach((function(n){e.call(t,n,i,this)}),this)}),this)},so.ta=function(){zl(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},so.Z=function(e){zl(this);let t=[];if("string"===typeof e)Vl(this,e)&&(t=t.concat(this.g.get($l(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},so.set=function(e,t){return zl(this),this.i=null,Vl(this,e=$l(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},so.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},so.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),e.push(r)}}return this.i=e.join("&")};var Hl=class{constructor(e,t){this.g=e,this.map=t}};function Wl(e){this.l=e||ql,co.PerformanceNavigationTiming?e=0<(e=co.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(co.g&&co.g.Ka&&co.g.Ka()&&co.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ql=10;function Kl(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Gl(e){return e.h?1:e.g?e.g.size:0}function Yl(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ql(e,t){e.g?e.g.add(t):e.h=t}function Xl(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Jl(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return xo(e.i)}Wl.prototype.cancel=function(){if(this.i=Jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Zl,ec=class{stringify(e){return co.JSON.stringify(e,void 0)}parse(e){return co.JSON.parse(e,void 0)}};function tc(){this.g=new ec}function nc(e,t,n){const i=n||"";try{_l(e,(function(e,n){let r=e;ho(e)&&(r=va(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(jS){throw t.push(i+"type="+encodeURIComponent("_badmap")),jS}}function ic(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(s){}}function rc(e){this.l=e.fc||null,this.j=e.ob||!1}function sc(e,t){ga.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=oc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bo(rc,Xa),rc.prototype.g=function(){return new sc(this.l,this.j)},rc.prototype.i=(Zl={},function(){return Zl}),bo(sc,ga);var oc=0;function ac(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function lc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,cc(e)}function cc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(so=sc.prototype).open=function(e,t){if(this.readyState!=oc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,cc(this)},so.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||co).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},so.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,lc(this)),this.readyState=oc},so.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,cc(this)),this.g&&(this.readyState=3,cc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof co.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ac(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},so.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?lc(this):cc(this),3==this.readyState&&ac(this)}},so.Za=function(e){this.g&&(this.response=this.responseText=e,lc(this))},so.Ya=function(e){this.g&&(this.response=e,lc(this))},so.ka=function(){this.g&&lc(this)},so.setRequestHeader=function(e,t){this.v.append(e,t)},so.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},so.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(sc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var uc=co.JSON.parse;function hc(e){ga.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=dc,this.L=this.M=!1}bo(hc,ga);var dc="",fc=/^https?$/i,pc=["POST","PUT"];function gc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,mc(e),vc(e)}function mc(e){e.F||(e.F=!0,ma(e,"complete"),ma(e,"error"))}function yc(e){if(e.h&&"undefined"!=typeof lo&&(!e.C[1]||4!=wc(e)||2!=e.da()))if(e.v&&4==wc(e))Ma(e.La,0,e);else if(ma(e,"readystatechange"),4==wc(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===a){var r=String(e.I).match(xl)[1]||null;!r&&co.self&&co.self.location&&(r=co.self.location.protocol.slice(0,-1)),i=!fc.test(r?r.toLowerCase():"")}n=i}if(n)ma(e,"complete"),ma(e,"success");else{e.m=6;try{var s=2<wc(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",mc(e)}}finally{vc(e)}}}function vc(e,t){if(e.g){bc(e);const n=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ma(e,"ready");try{n.onreadystatechange=i}catch(jS){}}}function bc(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(co.clearTimeout(e.A),e.A=null)}function wc(e){return e.g?e.g.readyState:0}function _c(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case dc:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Tu){return null}}function xc(e){let t="";return Qo(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function kc(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=xc(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Cl(e,t,n))}function Sc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ec(e){this.Ga=0,this.j=[],this.l=new ja,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Sc("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Sc("baseRetryDelayMs",5e3,e),this.hb=Sc("retryDelaySeedMs",1e4,e),this.eb=Sc("forwardChannelMaxRetries",2,e),this.xa=Sc("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Wl(e&&e.concurrentRequestLimit),this.Ja=new tc,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Tc(e){if(Cc(e),3==e.H){var t=e.W++,n=Sl(e.I);if(Cl(n,"SID",e.K),Cl(n,"RID",t),Cl(n,"TYPE","terminate"),Mc(e,n),(t=new sl(e,e.l,t)).L=2,t.v=Al(Sl(n)),n=!1,co.navigator&&co.navigator.sendBeacon)try{n=co.navigator.sendBeacon(t.v.toString(),"")}catch(i){}!n&&co.Image&&((new Image).src=t.v,n=!0),n||(t.g=$c(t.l,null),t.g.ha(t.v)),t.G=Date.now(),gl(t)}Vc(e)}function Ic(e){e.g&&(Pc(e),e.g.cancel(),e.g=null)}function Cc(e){Ic(e),e.u&&(co.clearTimeout(e.u),e.u=null),Fc(e),e.i.cancel(),e.m&&("number"===typeof e.m&&co.clearTimeout(e.m),e.m=null)}function Ac(e){if(!Kl(e.i)&&!e.m){e.m=!0;var t=e.Na;Sa||Ia(),Ea||(Sa(),Ea=!0),Ta.add(t,e),e.C=0}}function Rc(e,t){var n;n=t?t.m:e.W++;const i=Sl(e.I);Cl(i,"SID",e.K),Cl(i,"RID",n),Cl(i,"AID",e.V),Mc(e,i),e.o&&e.s&&kc(i,e.o,e.s),n=new sl(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Nc(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ql(e.i,n),ul(n,i,t)}function Mc(e,t){e.na&&Qo(e.na,(function(e,n){Cl(t,n,e)})),e.h&&_l({},(function(e,n){Cl(t,n,e)}))}function Nc(e,t,n){n=Math.min(e.j.length,n);var i=e.h?yo(e.h.Va,e.h,e):null;e:{var r=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=t,0>n)t=Math.max(0,r[o].g-100),s=!1;else try{nc(a,e,"req"+n+"_")}catch(Fu){i&&i(a)}}if(s){i=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,i}function Dc(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Sa||Ia(),Ea||(Sa(),Ea=!0),Ta.add(t,e),e.A=0}}function Oc(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ga(yo(e.Ma,e),zc(e,e.A)),e.A++,!0)}function Pc(e){null!=e.B&&(co.clearTimeout(e.B),e.B=null)}function Lc(e){e.g=new sl(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Sl(e.wa);Cl(t,"RID","rpc"),Cl(t,"SID",e.K),Cl(t,"AID",e.V),Cl(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Cl(t,"TO",e.qa),Cl(t,"TYPE","xmlhttp"),Mc(e,t),e.o&&e.s&&kc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Al(Sl(t)),n.s=null,n.S=!0,hl(n,e)}function Fc(e){null!=e.v&&(co.clearTimeout(e.v),e.v=null)}function jc(e,t){var n=null;if(e.g==t){Fc(e),Pc(e),e.g=null;var i=2}else{if(!Yl(e.i,t))return;n=t.F,Xl(e.i,t),i=1}if(0!=e.H)if(t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.G;var r=e.C;ma(i=Ba(),new Ka(i,n)),Ac(e)}else Dc(e);else if(3==(r=t.o)||0==r&&0<t.ca||!(1==i&&function(e,t){return!(Gl(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Ga(yo(e.Na,e,t),zc(e,e.C)),e.C++,!0))}(e,t)||2==i&&Oc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:Uc(e,5);break;case 4:Uc(e,10);break;case 3:Uc(e,6);break;default:Uc(e,2)}}function zc(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Uc(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var i=yo(e.pb,e);n||(n=new kl("//www.google.com/images/cleardot.gif"),co.location&&"http"==co.location.protocol||El(n,"https"),Al(n)),function(e,t){const n=new ja;if(co.Image){const i=new Image;i.onload=vo(ic,n,i,"TestLoadImage: loaded",!0,t),i.onerror=vo(ic,n,i,"TestLoadImage: error",!1,t),i.onabort=vo(ic,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=vo(ic,n,i,"TestLoadImage: timeout",!1,t),co.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(n.toString(),i)}else qa(2);e.H=0,e.h&&e.h.za(t),Vc(e),Cc(e)}function Vc(e){if(e.H=0,e.ma=[],e.h){const t=Jl(e.i);0==t.length&&0==e.j.length||(ko(e.ma,t),ko(e.ma,e.j),e.i.i.length=0,xo(e.j),e.j.length=0),e.h.ya()}}function Bc(e,t,n){var i=n instanceof kl?Sl(n):new kl(n);if(""!=i.g)t&&(i.g=t+"."+i.g),Tl(i,i.m);else{var r=co.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new kl(null);i&&El(s,i),t&&(s.g=t),r&&Tl(s,r),n&&(s.l=n),i=s}return n=e.F,t=e.Da,n&&t&&Cl(i,n,t),Cl(i,"VER",e.ra),Mc(e,i),i}function $c(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new hc(new rc({ob:!0})):new hc(e.va)).Oa(e.J),t}function Hc(){}function Wc(){if(Do&&!(10<=Number($o)))throw Error("Environmental error: no available transport.")}function qc(e,t){ga.call(this),this.g=new Ec(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!To(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!To(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Yc(this)}function Kc(e){nl.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Gc(){il.call(this),this.status=1}function Yc(e){this.g=e}function Qc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Xc(e,t,n){n||(n=0);var i=Array(16);if("string"===typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var s=e.g[3],o=t+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(t^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}function Jc(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var s=0|e[r];i&&s==t||(n[r]=s,i=!1)}this.g=n}(so=hc.prototype).Oa=function(e){this.M=e},so.ha=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():el.g(),this.C=this.u?Ja(this.u):Ja(el),this.g.onreadystatechange=yo(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void gc(this,s)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),r=co.FormData&&e instanceof co.FormData,!(0<=_o(pc,t))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{bc(this),0<this.B&&((this.L=function(e){return Do&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yo(this.ua,this)):this.A=Ma(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){gc(this,s)}},so.ua=function(){"undefined"!=typeof lo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ma(this,"timeout"),this.abort(8))},so.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ma(this,"complete"),ma(this,"abort"),vc(this))},so.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vc(this,!0)),hc.$.N.call(this)},so.La=function(){this.s||(this.G||this.v||this.l?yc(this):this.kb())},so.kb=function(){yc(this)},so.isActive=function(){return!!this.g},so.da=function(){try{return 2<wc(this)?this.g.status:-1}catch(Zl){return-1}},so.ja=function(){try{return this.g?this.g.responseText:""}catch(Zl){return""}},so.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),uc(t)}},so.Ia=function(){return this.m},so.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(so=Ec.prototype).ra=8,so.H=1,so.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const r=new sl(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Xo(s),Zo(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Nc(this,r,t),Cl(n=Sl(this.I),"RID",e),Cl(n,"CVER",22),this.F&&Cl(n,"X-HTTP-Session-Id",this.F),Mc(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(xc(s)))+"&"+t:this.o&&kc(n,this.o,s)),Ql(this.i,r),this.bb&&Cl(n,"TYPE","init"),this.P?(Cl(n,"$req",t),Cl(n,"SID","null"),r.aa=!0,ul(r,n,null)):ul(r,n,t),this.H=2}}else 3==this.H&&(e?Rc(this,e):0==this.j.length||Kl(this.i)||Rc(this))},so.Ma=function(){if(this.u=null,Lc(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ga(yo(this.jb,this),e)}},so.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qa(10),Ic(this),Lc(this))},so.ib=function(){null!=this.v&&(this.v=null,Ic(this),Oc(this),qa(19))},so.pb=function(e){e?(this.l.info("Successfully pinged google.com"),qa(2)):(this.l.info("Failed to ping google.com"),qa(1))},so.isActive=function(){return!!this.h&&this.h.isActive(this)},(so=Hc.prototype).Ba=function(){},so.Aa=function(){},so.za=function(){},so.ya=function(){},so.isActive=function(){return!0},so.Va=function(){},Wc.prototype.g=function(e,t){return new qc(e,t)},bo(qc,ga),qc.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;qa(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Bc(e,null,e.Y),Ac(e)},qc.prototype.close=function(){Tc(this.g)},qc.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=va(e),e=n);t.j.push(new Hl(t.fb++,e)),3==t.H&&Ac(t)},qc.prototype.N=function(){this.g.h=null,delete this.j,Tc(this.g),delete this.g,qc.$.N.call(this)},bo(Kc,nl),bo(Gc,il),bo(Yc,Hc),Yc.prototype.Ba=function(){ma(this.g,"a")},Yc.prototype.Aa=function(e){ma(this.g,new Kc(e))},Yc.prototype.za=function(e){ma(this.g,new Gc)},Yc.prototype.ya=function(){ma(this.g,"b")},bo(Qc,(function(){this.blockSize=-1})),Qc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Qc.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=this.m,r=this.h,s=0;s<t;){if(0==r)for(;s<=n;)Xc(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[r++]=e.charCodeAt(s++),r==this.blockSize){Xc(this,i),r=0;break}}else for(;s<t;)if(i[r++]=e[s++],r==this.blockSize){Xc(this,i),r=0;break}}this.h=r,this.i+=t},Qc.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var Zc={};function eu(e){return-128<=e&&128>e?function(e,t){var n=Zc;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Jc([0|e],0>e?-1:0)})):new Jc([0|e],0>e?-1:0)}function tu(e){if(isNaN(e)||!isFinite(e))return iu;if(0>e)return lu(tu(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=nu;return new Jc(t,0)}var nu=4294967296,iu=eu(0),ru=eu(1),su=eu(16777216);function ou(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function au(e){return-1==e.h}function lu(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new Jc(n,~e.h).add(ru)}function cu(e,t){return e.add(lu(t))}function uu(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function hu(e,t){this.g=e,this.h=t}function du(e,t){if(ou(t))throw Error("division by zero");if(ou(e))return new hu(iu,iu);if(au(e))return t=du(lu(e),t),new hu(lu(t.g),lu(t.h));if(au(t))return t=du(e,lu(t)),new hu(lu(t.g),t.h);if(30<e.g.length){if(au(e)||au(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ru,i=t;0>=i.X(e);)n=fu(n),i=fu(i);var r=pu(n,1),s=pu(i,1);for(i=pu(i,2),n=pu(n,2);!ou(i);){var o=s.add(i);0>=o.X(e)&&(r=r.add(n),s=o),i=pu(i,1),n=pu(n,1)}return t=cu(e,r.R(t)),new hu(r,t)}for(r=iu;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(s=tu(n)).R(t);au(o)||0<o.X(e);)o=(s=tu(n-=i)).R(t);ou(s)&&(s=ru),r=r.add(s),e=cu(e,o)}return new hu(r,e)}function fu(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.D(i)<<1|e.D(i-1)>>>31;return new Jc(n,e.h)}function pu(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,r=[],s=0;s<i;s++)r[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Jc(r,e.h)}(so=Jc.prototype).ea=function(){if(au(this))return-lu(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.D(n);e+=(0<=i?i:nu+i)*t,t*=nu}return e},so.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(ou(this))return"0";if(au(this))return"-"+lu(this).toString(e);for(var t=tu(Math.pow(e,6)),n=this,i="";;){var r=du(n,t).g,s=((0<(n=cu(n,r.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(ou(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},so.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},so.X=function(e){return au(e=cu(this,e))?-1:ou(e)?0:1},so.abs=function(){return au(this)?lu(this):this},so.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,r=0;r<=t;r++){var s=i+(65535&this.D(r))+(65535&e.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(e.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new Jc(n,-2147483648&n[n.length-1]?-1:0)},so.R=function(e){if(ou(this)||ou(e))return iu;if(au(this))return au(e)?lu(this).R(lu(e)):lu(lu(this).R(e));if(au(e))return lu(this.R(lu(e)));if(0>this.X(su)&&0>e.X(su))return tu(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<e.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=e.D(r)>>>16,l=65535&e.D(r);n[2*i+2*r]+=o*l,uu(n,2*i+2*r),n[2*i+2*r+1]+=s*l,uu(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,uu(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,uu(n,2*i+2*r+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new Jc(n,0)},so.gb=function(e){return du(this,e).h},so.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)&e.D(i);return new Jc(n,this.h&e.h)},so.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)|e.D(i);return new Jc(n,this.h|e.h)},so.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)^e.D(i);return new Jc(n,this.h^e.h)},Wc.prototype.createWebChannel=Wc.prototype.g,qc.prototype.send=qc.prototype.u,qc.prototype.open=qc.prototype.m,qc.prototype.close=qc.prototype.close,Ya.NO_ERROR=0,Ya.TIMEOUT=8,Ya.HTTP_ERROR=6,Qa.COMPLETE="complete",Za.EventType=tl,tl.OPEN="a",tl.CLOSE="b",tl.ERROR="c",tl.MESSAGE="d",ga.prototype.listen=ga.prototype.O,hc.prototype.listenOnce=hc.prototype.P,hc.prototype.getLastError=hc.prototype.Sa,hc.prototype.getLastErrorCode=hc.prototype.Ia,hc.prototype.getStatus=hc.prototype.da,hc.prototype.getResponseJson=hc.prototype.Wa,hc.prototype.getResponseText=hc.prototype.ja,hc.prototype.send=hc.prototype.ha,hc.prototype.setWithCredentials=hc.prototype.Oa,Qc.prototype.digest=Qc.prototype.l,Qc.prototype.reset=Qc.prototype.reset,Qc.prototype.update=Qc.prototype.j,Jc.prototype.add=Jc.prototype.add,Jc.prototype.multiply=Jc.prototype.R,Jc.prototype.modulo=Jc.prototype.gb,Jc.prototype.compare=Jc.prototype.X,Jc.prototype.toNumber=Jc.prototype.ea,Jc.prototype.toString=Jc.prototype.toString,Jc.prototype.getBits=Jc.prototype.D,Jc.fromNumber=tu,Jc.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return lu(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=tu(Math.pow(n,8)),r=iu,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=tu(Math.pow(n,o)),r=r.R(o).add(tu(a))):r=(r=r.R(i)).add(tu(a))}return r};var gu=ao.createWebChannelTransport=function(){return new Wc},mu=ao.getStatEventTarget=function(){return Ba()},yu=ao.ErrorCode=Ya,vu=ao.EventType=Qa,bu=ao.Event=Ua,wu=ao.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},_u=ao.FetchXmlHttpFactory=rc,xu=ao.WebChannel=Za,ku=ao.XhrIo=hc,Su=ao.Md5=Qc,Eu=ao.Integer=Jc;const Tu="@firebase/firestore";class Iu{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Iu.UNAUTHENTICATED=new Iu(null),Iu.GOOGLE_CREDENTIALS=new Iu("google-credentials-uid"),Iu.FIRST_PARTY=new Iu("first-party-uid"),Iu.MOCK_USER=new Iu("mock-user");let Cu="9.23.0";const Au=new Vt("@firebase/firestore");function Ru(){return Au.logLevel}function Mu(e){if(Au.logLevel<=Lt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Ou);Au.debug(`Firestore (${Cu}): ${e}`,...r)}}function Nu(e){if(Au.logLevel<=Lt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Ou);Au.error(`Firestore (${Cu}): ${e}`,...r)}}function Du(e){if(Au.logLevel<=Lt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Ou);Au.warn(`Firestore (${Cu}): ${e}`,...r)}}function Ou(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Pu(){const e=`FIRESTORE (${Cu}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Nu(e),new Error(e)}function Lu(e,t){e||Pu()}function Fu(e,t){return e}const ju={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zu extends wt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Uu{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Vu{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Iu.UNAUTHENTICATED)))}shutdown(){}}class $u{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Hu{constructor(e){this.t=e,this.currentUser=Iu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Uu;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Uu,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},o=e=>{Mu("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Mu("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Uu)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Mu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Lu("string"==typeof t.accessToken),new Vu(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Lu(null===e||"string"==typeof e),new Iu(e)}}class Wu{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Iu.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class qu{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Wu(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Iu.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ku{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gu{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Mu("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,Mu("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{Mu("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?i(e):Mu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Lu("string"==typeof e.token),this.T=e.token,new Ku(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Yu(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}class Qu{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const i=Yu(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%62))}return n}}function Xu(e,t){return e<t?-1:e>t?1:0}function Ju(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}class Zu{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new zu(ju.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new zu(ju.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new zu(ju.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new zu(ju.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zu.fromMillis(Date.now())}static fromDate(e){return Zu.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Zu(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xu(this.nanoseconds,e.nanoseconds):Xu(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class eh{constructor(e){this.timestamp=e}static fromTimestamp(e){return new eh(e)}static min(){return new eh(new Zu(0,0))}static max(){return new eh(new Zu(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class th{constructor(e,t,n){void 0===t?t=0:t>e.length&&Pu(),void 0===n?n=e.length-t:n>e.length-t&&Pu(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===th.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof th?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nh extends th{construct(e,t,n){return new nh(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new zu(ju.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((e=>e.length>0)))}return new nh(e)}static emptyPath(){return new nh([])}}const ih=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rh extends th{construct(e,t,n){return new rh(e,t,n)}static isValidIdentifier(e){return ih.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rh.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rh(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new zu(ju.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new zu(ju.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new zu(ju.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(s=!s,i++):"."!==t||s?(n+=t,i++):(r(),i++)}if(r(),s)throw new zu(ju.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rh(t)}static emptyPath(){return new rh([])}}class sh{constructor(e){this.path=e}static fromPath(e){return new sh(nh.fromString(e))}static fromName(e){return new sh(nh.fromString(e).popFirst(5))}static empty(){return new sh(nh.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nh.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nh.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new sh(new nh(e.slice()))}}class oh{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}oh.UNKNOWN_ID=-1;function ah(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=eh.fromTimestamp(1e9===i?new Zu(n+1,0):new Zu(n,i));return new ch(r,sh.empty(),t)}function lh(e){return new ch(e.readTime,e.key,-1)}class ch{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ch(eh.min(),sh.empty(),-1)}static max(){return new ch(eh.max(),sh.empty(),-1)}}function uh(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=sh.comparator(e.documentKey,t.documentKey),0!==n?n:Xu(e.largestBatchId,t.largestBatchId))}const hh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function fh(e){if(e.code!==ju.FAILED_PRECONDITION||e.message!==hh)throw e;Mu("LocalStore","Unexpectedly lost primary lease")}class ph{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ph(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ph?t:ph.resolve(t)}catch(e){return ph.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ph.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ph.reject(t)}static resolve(e){return new ph(((t,n)=>{t(e)}))}static reject(e){return new ph(((t,n)=>{n(e)}))}static waitFor(e){return new ph(((t,n)=>{let i=0,r=0,s=!1;e.forEach((e=>{++i,e.next((()=>{++r,s&&r===i&&t()}),(e=>n(e)))})),s=!0,r===i&&t()}))}static or(e){let t=ph.resolve(!1);for(const n of e)t=t.next((e=>e?ph.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}static mapArray(e,t){return new ph(((n,i)=>{const r=e.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===r&&n(s)}),(e=>i(e)))}}))}static doWhile(e,t){return new ph(((n,i)=>{const r=()=>{!0===e()?t().next((()=>{r()}),i):n()};r()}))}}function gh(e){return"IndexedDbTransactionError"===e.name}class mh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function yh(e){return null==e}function vh(e){return 0===e&&1/e==-1/0}function bh(e){return"number"==typeof e&&Number.isInteger(e)&&!vh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}mh.ct=-1;const wh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_h=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xh=_h;function kh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Sh(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Eh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Th{constructor(e,t){this.comparator=e,this.root=t||Ch.EMPTY}insert(e,t){return new Th(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ch.BLACK,null,null))}remove(e){return new Th(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ch.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ih(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ih(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ih(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ih(this.root,e,this.comparator,!0)}}class Ih{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ch{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:Ch.RED,this.left=null!=i?i:Ch.EMPTY,this.right=null!=r?r:Ch.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new Ch(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ch.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ch.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ch.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ch.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pu();if(this.right.isRed())throw Pu();const e=this.left.check();if(e!==this.right.check())throw Pu();return e+(this.isRed()?0:1)}}Ch.EMPTY=null,Ch.RED=!0,Ch.BLACK=!1,Ch.EMPTY=new class{constructor(){this.size=0}get key(){throw Pu()}get value(){throw Pu()}get color(){throw Pu()}get left(){throw Pu()}get right(){throw Pu()}copy(e,t,n,i,r){return this}insert(e,t,n){return new Ch(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ah{constructor(e){this.comparator=e,this.data=new Th(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rh(this.data.getIterator())}getIteratorFrom(e){return new Rh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ah))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ah(this.comparator);return t.data=e,t}}class Rh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Mh{constructor(e){this.fields=e,e.sort(rh.comparator)}static empty(){return new Mh([])}unionWith(e){let t=new Ah(rh.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Mh(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ju(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Nh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Dh{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Nh("Invalid base64 string: "+e):e}}(e);return new Dh(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Dh(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xu(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dh.EMPTY_BYTE_STRING=new Dh("");const Oh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ph(e){if(Lu(!!e),"string"==typeof e){let t=0;const n=Oh.exec(e);if(Lu(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Lh(e.seconds),nanos:Lh(e.nanos)}}function Lh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Fh(e){return"string"==typeof e?Dh.fromBase64String(e):Dh.fromUint8Array(e)}function jh(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function zh(e){const t=e.mapValue.fields.__previous_value__;return jh(t)?zh(t):t}function Uh(e){const t=Ph(e.mapValue.fields.__local_write_time__.timestampValue);return new Zu(t.seconds,t.nanos)}class Vh{constructor(e,t,n,i,r,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Bh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Bh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Bh&&e.projectId===this.projectId&&e.database===this.database}}const $h={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Hh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?jh(e)?4:rd(e)?9007199254740991:10:Pu()}function Wh(e,t){if(e===t)return!0;const n=Hh(e);if(n!==Hh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Uh(e).isEqual(Uh(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ph(e.timestampValue),i=Ph(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Fh(e.bytesValue).isEqual(Fh(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Lh(e.geoPointValue.latitude)===Lh(t.geoPointValue.latitude)&&Lh(e.geoPointValue.longitude)===Lh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Lh(e.integerValue)===Lh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Lh(e.doubleValue),i=Lh(t.doubleValue);return n===i?vh(n)===vh(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Ju(e.arrayValue.values||[],t.arrayValue.values||[],Wh);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(kh(n)!==kh(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Wh(n[r],i[r])))return!1;return!0}(e,t);default:return Pu()}}function qh(e,t){return void 0!==(e.values||[]).find((e=>Wh(e,t)))}function Kh(e,t){if(e===t)return 0;const n=Hh(e),i=Hh(t);if(n!==i)return Xu(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xu(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Lh(e.integerValue||e.doubleValue),i=Lh(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return Gh(e.timestampValue,t.timestampValue);case 4:return Gh(Uh(e),Uh(t));case 5:return Xu(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Fh(e),i=Fh(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let r=0;r<n.length&&r<i.length;r++){const e=Xu(n[r],i[r]);if(0!==e)return e}return Xu(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Xu(Lh(e.latitude),Lh(t.latitude));return 0!==n?n:Xu(Lh(e.longitude),Lh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const e=Kh(n[r],i[r]);if(e)return e}return Xu(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===$h.mapValue&&t===$h.mapValue)return 0;if(e===$h.mapValue)return 1;if(t===$h.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const e=Xu(i[o],s[o]);if(0!==e)return e;const t=Kh(n[i[o]],r[s[o]]);if(0!==t)return t}return Xu(i.length,s.length)}(e.mapValue,t.mapValue);default:throw Pu()}}function Gh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Xu(e,t);const n=Ph(e),i=Ph(t),r=Xu(n.seconds,i.seconds);return 0!==r?r:Xu(n.nanos,i.nanos)}function Yh(e){return Qh(e)}function Qh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ph(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Fh(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,sh.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=Qh(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+=`${r}:${Qh(e.fields[r])}`;return n+"}"}(e.mapValue):Pu();var t,n}function Xh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Jh(e){return!!e&&"integerValue"in e}function Zh(e){return!!e&&"arrayValue"in e}function ed(e){return!!e&&"nullValue"in e}function td(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function nd(e){return!!e&&"mapValue"in e}function id(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Sh(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=id(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=id(e.arrayValue.values[n]);return t}return Object.assign({},e)}function rd(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class sd{constructor(e){this.value=e}static empty(){return new sd({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!nd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=id(t)}setAll(e){let t=rh.emptyPath(),n={},i=[];e.forEach(((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=id(e):i.push(r.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());nd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];nd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Sh(t,((t,n)=>e[t]=n));for(const i of n)delete e[i]}clone(){return new sd(id(this.value))}}function od(e){const t=[];return Sh(e.fields,((e,n)=>{const i=new rh([e]);if(nd(n)){const e=od(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new Mh(t)}class ad{constructor(e,t,n,i,r,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ad(e,0,eh.min(),eh.min(),eh.min(),sd.empty(),0)}static newFoundDocument(e,t,n,i){return new ad(e,1,t,eh.min(),n,i,0)}static newNoDocument(e,t){return new ad(e,2,t,eh.min(),eh.min(),sd.empty(),0)}static newUnknownDocument(e,t){return new ad(e,3,t,eh.min(),eh.min(),sd.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(eh.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sd.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sd.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=eh.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ad&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ad(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ld{constructor(e,t){this.position=e,this.inclusive=t}}function cd(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(i=s.field.isKeyField()?sh.comparator(sh.fromName(o.referenceValue),n.key):Kh(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function ud(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Wh(e.position[n],t.position[n]))return!1;return!0}class hd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function dd(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class fd{}class pd extends fd{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new xd(e,t,n):"array-contains"===t?new Td(e,n):"in"===t?new Id(e,n):"not-in"===t?new Cd(e,n):"array-contains-any"===t?new Ad(e,n):new pd(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new kd(e,n):new Sd(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Kh(t,this.value)):null!==t&&Hh(this.value)===Hh(t)&&this.matchesComparison(Kh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Pu()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class gd extends fd{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new gd(e,t)}matches(e){return md(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function md(e){return"and"===e.op}function yd(e){return vd(e)&&md(e)}function vd(e){for(const t of e.filters)if(t instanceof gd)return!1;return!0}function bd(e){if(e instanceof pd)return e.field.canonicalString()+e.op.toString()+Yh(e.value);if(yd(e))return e.filters.map((e=>bd(e))).join(",");{const t=e.filters.map((e=>bd(e))).join(",");return`${e.op}(${t})`}}function wd(e,t){return e instanceof pd?function(e,t){return t instanceof pd&&e.op===t.op&&e.field.isEqual(t.field)&&Wh(e.value,t.value)}(e,t):e instanceof gd?function(e,t){return t instanceof gd&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,i)=>e&&wd(n,t.filters[i])),!0)}(e,t):void Pu()}function _d(e){return e instanceof pd?function(e){return`${e.field.canonicalString()} ${e.op} ${Yh(e.value)}`}(e):e instanceof gd?function(e){return e.op.toString()+" {"+e.getFilters().map(_d).join(" ,")+"}"}(e):"Filter"}class xd extends pd{constructor(e,t,n){super(e,t,n),this.key=sh.fromName(n.referenceValue)}matches(e){const t=sh.comparator(e.key,this.key);return this.matchesComparison(t)}}class kd extends pd{constructor(e,t){super(e,"in",t),this.keys=Ed("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Sd extends pd{constructor(e,t){super(e,"not-in",t),this.keys=Ed("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ed(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>sh.fromName(e.referenceValue)))}class Td extends pd{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zh(t)&&qh(t.arrayValue,this.value)}}class Id extends pd{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qh(this.value.arrayValue,t)}}class Cd extends pd{constructor(e,t){super(e,"not-in",t)}matches(e){if(qh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!qh(this.value.arrayValue,t)}}class Ad extends pd{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>qh(this.value.arrayValue,e)))}}class Rd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.dt=null}}function Md(e){return new Rd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Nd(e){const t=Fu(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>bd(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),yh(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Yh(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Yh(e))).join(",")),t.dt=e}return t.dt}function Dd(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!dd(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!wd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ud(e.startAt,t.startAt)&&ud(e.endAt,t.endAt)}function Od(e){return sh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Pd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Ld(e,t,n,i,r,s,o,a){return new Pd(e,t,n,i,r,s,o,a)}function Fd(e){return new Pd(e)}function jd(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function zd(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ud(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Vd(e){return null!==e.collectionGroup}function Bd(e){const t=Fu(e);if(null===t.wt){t.wt=[];const e=Ud(t),n=zd(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new hd(e)),t.wt.push(new hd(rh.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new hd(rh.keyField(),e))}}}return t.wt}function $d(e){const t=Fu(e);if(!t._t)if("F"===t.limitType)t._t=Md(t.path,t.collectionGroup,Bd(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const r of Bd(t)){const t="desc"===r.dir?"asc":"desc";e.push(new hd(r.field,t))}const n=t.endAt?new ld(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ld(t.startAt.position,t.startAt.inclusive):null;t._t=Md(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}return t._t}function Hd(e,t){t.getFirstInequalityField(),Ud(e);const n=e.filters.concat([t]);return new Pd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Wd(e,t,n){return new Pd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function qd(e,t){return Dd($d(e),$d(t))&&e.limitType===t.limitType}function Kd(e){return`${Nd($d(e))}|lt:${e.limitType}`}function Gd(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>_d(e))).join(", ")}]`),yh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Yh(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Yh(e))).join(",")),`Target(${t})`}($d(e))}; limitType=${e.limitType})`}function Yd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):sh.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Bd(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=cd(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,Bd(e),t))&&!(e.endAt&&!function(e,t,n){const i=cd(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,Bd(e),t))}(e,t)}function Qd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Xd(e){return(t,n)=>{let i=!1;for(const r of Bd(e)){const e=Jd(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function Jd(e,t,n){const i=e.field.isKeyField()?sh.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?Kh(i,r):Pu()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Pu()}}class Zd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sh(this.inner,((t,n)=>{for(const[i,r]of n)e(i,r)}))}isEmpty(){return Eh(this.inner)}size(){return this.innerSize}}const ef=new Th(sh.comparator);function tf(){return ef}const nf=new Th(sh.comparator);function rf(){let e=nf;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.insert(r.key,r);return e}function sf(e){let t=nf;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function of(){return lf()}function af(){return lf()}function lf(){return new Zd((e=>e.toString()),((e,t)=>e.isEqual(t)))}const cf=new Th(sh.comparator),uf=new Ah(sh.comparator);function hf(){let e=uf;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.add(r);return e}const df=new Ah(Xu);function ff(){return df}function pf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(t)?"-0":t}}function gf(e){return{integerValue:""+e}}function mf(e,t){return bh(t)?gf(t):pf(e,t)}class yf{constructor(){this._=void 0}}function vf(e,t,n){return e instanceof _f?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&jh(t)&&(t=zh(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof xf?kf(e,t):e instanceof Sf?Ef(e,t):function(e,t){const n=wf(e,t),i=If(n)+If(e.gt);return Jh(n)&&Jh(e.gt)?gf(i):pf(e.serializer,i)}(e,t)}function bf(e,t,n){return e instanceof xf?kf(e,t):e instanceof Sf?Ef(e,t):n}function wf(e,t){return e instanceof Tf?Jh(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class _f extends yf{}class xf extends yf{constructor(e){super(),this.elements=e}}function kf(e,t){const n=Cf(t);for(const i of e.elements)n.some((e=>Wh(e,i)))||n.push(i);return{arrayValue:{values:n}}}class Sf extends yf{constructor(e){super(),this.elements=e}}function Ef(e,t){let n=Cf(t);for(const i of e.elements)n=n.filter((e=>!Wh(e,i)));return{arrayValue:{values:n}}}class Tf extends yf{constructor(e,t){super(),this.serializer=e,this.gt=t}}function If(e){return Lh(e.integerValue||e.doubleValue)}function Cf(e){return Zh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Af{constructor(e,t){this.field=e,this.transform=t}}class Rf{constructor(e,t){this.version=e,this.transformResults=t}}class Mf{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mf}static exists(e){return new Mf(void 0,e)}static updateTime(e){return new Mf(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Df{}function Of(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Hf(e.key,Mf.none()):new zf(e.key,e.data,Mf.none());{const n=e.data,i=sd.empty();let r=new Ah(rh.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new Uf(e.key,i,new Mh(r.toArray()),Mf.none())}}function Pf(e,t,n){e instanceof zf?function(e,t,n){const i=e.value.clone(),r=Bf(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof Uf?function(e,t,n){if(!Nf(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=Bf(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(Vf(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Lf(e,t,n,i){return e instanceof zf?function(e,t,n,i){if(!Nf(e.precondition,t))return n;const r=e.value.clone(),s=$f(e.fieldTransforms,i,t);return r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof Uf?function(e,t,n,i){if(!Nf(e.precondition,t))return n;const r=$f(e.fieldTransforms,i,t),s=t.data;return s.setAll(Vf(e)),s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,i):function(e,t,n){return Nf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ff(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=wf(i.transform,e||null);null!=r&&(null===n&&(n=sd.empty()),n.set(i.field,r))}return n||null}function jf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ju(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof xf&&t instanceof xf||e instanceof Sf&&t instanceof Sf?Ju(e.elements,t.elements,Wh):e instanceof Tf&&t instanceof Tf?Wh(e.gt,t.gt):e instanceof _f&&t instanceof _f}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class zf extends Df{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Uf extends Df{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Vf(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function Bf(e,t,n){const i=new Map;Lu(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,bf(o,a,n[r]))}return i}function $f(e,t,n){const i=new Map;for(const r of e){const e=r.transform,s=n.data.field(r.field);i.set(r.field,vf(e,s,t))}return i}class Hf extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wf extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qf{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&Pf(t,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Lf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Lf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=af();return this.mutations.forEach((i=>{const r=e.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=t.has(i.key)?null:o;const a=Of(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(eh.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),hf())}isEqual(e){return this.batchId===e.batchId&&Ju(this.mutations,e.mutations,((e,t)=>jf(e,t)))&&Ju(this.baseMutations,e.baseMutations,((e,t)=>jf(e,t)))}}class Kf{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Lu(e.mutations.length===n.length);let i=cf;const r=e.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Kf(e,t,n,i)}}class Gf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yf{constructor(e,t){this.count=e,this.unchangedNames=t}}var Qf,Xf;function Jf(e){switch(e){default:return Pu();case ju.CANCELLED:case ju.UNKNOWN:case ju.DEADLINE_EXCEEDED:case ju.RESOURCE_EXHAUSTED:case ju.INTERNAL:case ju.UNAVAILABLE:case ju.UNAUTHENTICATED:return!1;case ju.INVALID_ARGUMENT:case ju.NOT_FOUND:case ju.ALREADY_EXISTS:case ju.PERMISSION_DENIED:case ju.FAILED_PRECONDITION:case ju.ABORTED:case ju.OUT_OF_RANGE:case ju.UNIMPLEMENTED:case ju.DATA_LOSS:return!0}}function Zf(e){if(void 0===e)return Nu("GRPC error has no .code"),ju.UNKNOWN;switch(e){case Qf.OK:return ju.OK;case Qf.CANCELLED:return ju.CANCELLED;case Qf.UNKNOWN:return ju.UNKNOWN;case Qf.DEADLINE_EXCEEDED:return ju.DEADLINE_EXCEEDED;case Qf.RESOURCE_EXHAUSTED:return ju.RESOURCE_EXHAUSTED;case Qf.INTERNAL:return ju.INTERNAL;case Qf.UNAVAILABLE:return ju.UNAVAILABLE;case Qf.UNAUTHENTICATED:return ju.UNAUTHENTICATED;case Qf.INVALID_ARGUMENT:return ju.INVALID_ARGUMENT;case Qf.NOT_FOUND:return ju.NOT_FOUND;case Qf.ALREADY_EXISTS:return ju.ALREADY_EXISTS;case Qf.PERMISSION_DENIED:return ju.PERMISSION_DENIED;case Qf.FAILED_PRECONDITION:return ju.FAILED_PRECONDITION;case Qf.ABORTED:return ju.ABORTED;case Qf.OUT_OF_RANGE:return ju.OUT_OF_RANGE;case Qf.UNIMPLEMENTED:return ju.UNIMPLEMENTED;case Qf.DATA_LOSS:return ju.DATA_LOSS;default:return Pu()}}(Xf=Qf||(Qf={}))[Xf.OK=0]="OK",Xf[Xf.CANCELLED=1]="CANCELLED",Xf[Xf.UNKNOWN=2]="UNKNOWN",Xf[Xf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xf[Xf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xf[Xf.NOT_FOUND=5]="NOT_FOUND",Xf[Xf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xf[Xf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xf[Xf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xf[Xf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xf[Xf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xf[Xf.ABORTED=10]="ABORTED",Xf[Xf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xf[Xf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xf[Xf.INTERNAL=13]="INTERNAL",Xf[Xf.UNAVAILABLE=14]="UNAVAILABLE",Xf[Xf.DATA_LOSS=15]="DATA_LOSS";class ep{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return tp}static getOrCreateInstance(){return null===tp&&(tp=new ep),tp}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let tp=null;function np(){return new TextEncoder}const ip=new Eu([4294967295,4294967295],0);function rp(e){const t=np().encode(e),n=new Su;return n.update(t),new Uint8Array(n.digest())}function sp(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Eu([n,i],0),new Eu([r,s],0)]}class op{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ap(`Invalid padding: ${t}`);if(n<0)throw new ap(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new ap(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new ap(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Eu.fromNumber(this.It)}Et(e,t,n){let i=e.add(t.multiply(Eu.fromNumber(n)));return 1===i.compare(ip)&&(i=new Eu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=rp(e),[n,i]=sp(t);for(let r=0;r<this.hashCount;r++){const e=this.Et(n,i,r);if(!this.At(e))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),s=new op(r,i,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.It)return;const t=rp(e),[n,i]=sp(t);for(let r=0;r<this.hashCount;r++){const e=this.Et(n,i,r);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ap extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lp{constructor(e,t,n,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,cp.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new lp(eh.min(),i,new Th(Xu),tf(),hf())}}class cp{constructor(e,t,n,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new cp(n,t,hf(),hf(),hf())}}class up{constructor(e,t,n,i){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=i}}class hp{constructor(e,t){this.targetId=e,this.Vt=t}}class dp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dh.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class fp{constructor(){this.St=0,this.Dt=mp(),this.Ct=Dh.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=hf(),t=hf(),n=hf();return this.Dt.forEach(((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Pu()}})),new cp(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=mp()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class pp{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=tf(),this.zt=gp(),this.Wt=new Th(Xu)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Pu()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,i=e.Vt.count,r=this.se(n);if(r){const s=r.target;if(Od(s))if(0===i){const e=new sh(s.path);this.Yt(n,e,ad.newNoDocument(e,eh.min()))}else Lu(1===i);else{const r=this.ie(n);if(r!==i){const i=this.re(e,r);if(0!==i){this.ee(n);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=ep.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var i,r,s,o,a,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(i=null==u?void 0:u.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(o=null===(s=null===(r=null==u?void 0:u.bits)||void 0===r?void 0:r.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(l=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),c}(i,r,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:i}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let a,l;try{a=Fh(r).toUint8Array()}catch(e){if(e instanceof Nh)return Du("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new op(a,s,o)}catch(e){return Du(e instanceof ap?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:i!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let i=0;return n.forEach((n=>{const r=this.Gt.ue(),s=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;t.vt(s)||(this.Yt(e,n,null),i++)})),i}ce(e){const t=new Map;this.Qt.forEach(((n,i)=>{const r=this.se(i);if(r){if(n.current&&Od(r.target)){const t=new sh(r.target.path);null!==this.jt.get(t)||this.ae(i,t)||this.Yt(i,t,ad.newNoDocument(t,e))}n.Mt&&(t.set(i,n.Ot()),n.Ft())}}));let n=hf();this.zt.forEach(((e,t)=>{let i=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(i=!1,!1)})),i&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const i=new lp(e,t,this.Wt,this.jt,n);return this.jt=tf(),this.zt=gp(),this.Wt=new Th(Xu),i}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new fp,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Ah(Xu),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Mu("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new fp),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function gp(){return new Th(sh.comparator)}function mp(){return new Th(sh.comparator)}const yp={asc:"ASCENDING",desc:"DESCENDING"},vp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bp={and:"AND",or:"OR"};class wp{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _p(e,t){return e.useProto3Json||yh(t)?t:{value:t}}function xp(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function kp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Sp(e,t){return xp(e,t.toTimestamp())}function Ep(e){return Lu(!!e),eh.fromTimestamp(function(e){const t=Ph(e);return new Zu(t.seconds,t.nanos)}(e))}function Tp(e,t){return function(e){return new nh(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ip(e){const t=nh.fromString(e);return Lu(Kp(t)),t}function Cp(e,t){return Tp(e.databaseId,t.path)}function Ap(e,t){const n=Ip(t);if(n.get(1)!==e.databaseId.projectId)throw new zu(ju.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new zu(ju.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new sh(Dp(n))}function Rp(e,t){return Tp(e.databaseId,t)}function Mp(e){const t=Ip(e);return 4===t.length?nh.emptyPath():Dp(t)}function Np(e){return new nh(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Dp(e){return Lu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Op(e,t,n){return{name:Cp(e,t),fields:n.value.mapValue.fields}}function Pp(e,t){let n;if(t instanceof zf)n={update:Op(e,t.key,t.value)};else if(t instanceof Hf)n={delete:Cp(e,t.key)};else if(t instanceof Uf)n={update:Op(e,t.key,t.data),updateMask:qp(t.fieldMask)};else{if(!(t instanceof Wf))return Pu();n={verify:Cp(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof _f)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Sf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Tf)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Pu()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Sp(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Pu()}(e,t.precondition)),n}function Lp(e,t){return{documents:[Rp(e,t.path)]}}function Fp(e,t){const n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n.parent=Rp(e,i),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Rp(e,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(e){if(0!==e.length)return Wp(gd.create(e,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:$p(e.field),direction:Up(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=_p(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function jp(e){let t=Mp(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Lu(1===i);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=zp(e);return t instanceof gd&&yd(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new hd(Hp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,yh(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ld(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ld(n,t)}(n.endAt)),Ld(t,r,o,s,a,"F",l,c)}function zp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Hp(e.unaryFilter.field);return pd.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Hp(e.unaryFilter.field);return pd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Hp(e.unaryFilter.field);return pd.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Hp(e.unaryFilter.field);return pd.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Pu()}}(e):void 0!==e.fieldFilter?function(e){return pd.create(Hp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return gd.create(e.compositeFilter.filters.map((e=>zp(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Pu()}}(e.compositeFilter.op))}(e):Pu()}function Up(e){return yp[e]}function Vp(e){return vp[e]}function Bp(e){return bp[e]}function $p(e){return{fieldPath:e.canonicalString()}}function Hp(e){return rh.fromServerFormat(e.fieldPath)}function Wp(e){return e instanceof pd?function(e){if("=="===e.op){if(td(e.value))return{unaryFilter:{field:$p(e.field),op:"IS_NAN"}};if(ed(e.value))return{unaryFilter:{field:$p(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(td(e.value))return{unaryFilter:{field:$p(e.field),op:"IS_NOT_NAN"}};if(ed(e.value))return{unaryFilter:{field:$p(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$p(e.field),op:Vp(e.op),value:e.value}}}(e):e instanceof gd?function(e){const t=e.getFilters().map((e=>Wp(e)));return 1===t.length?t[0]:{compositeFilter:{op:Bp(e.op),filters:t}}}(e):Pu()}function qp(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Kp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Gp{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:eh.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:eh.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Dh.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Gp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Gp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Yp{constructor(e){this.fe=e}}function Qp(e){const t=jp({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Wd(t,t.limit,"L"):t}class Xp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Lh(e.integerValue));else if("doubleValue"in e){const n=Lh(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),vh(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie(`${n.seconds||""}`),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Fh(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?rd(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Pu()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const i of Object.keys(n))this.Te(i,t),this.me(n[i],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const i of n)this.me(i,t)}ve(e,t){this.ye(t,37),sh.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Xp.Ve=new Xp;class Jp{constructor(){this.rn=new Zp}addToCollectionParentIndex(e,t){return this.rn.add(t),ph.resolve()}getCollectionParents(e,t){return ph.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ph.resolve()}deleteFieldIndex(e,t){return ph.resolve()}getDocumentsMatchingTarget(e,t){return ph.resolve(null)}getIndexType(e,t){return ph.resolve(0)}getFieldIndexes(e,t){return ph.resolve([])}getNextCollectionGroupToUpdate(e){return ph.resolve(null)}getMinOffset(e,t){return ph.resolve(ch.min())}getMinOffsetFromCollectionGroup(e,t){return ph.resolve(ch.min())}updateCollectionGroup(e,t,n){return ph.resolve()}updateIndexEntries(e,t){return ph.resolve()}}class Zp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Ah(nh.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Ah(nh.comparator)).toArray()}}new Uint8Array(0);class eg{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new eg(e,eg.DEFAULT_COLLECTION_PERCENTILE,eg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}eg.DEFAULT_COLLECTION_PERCENTILE=10,eg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eg.DEFAULT=new eg(41943040,eg.DEFAULT_COLLECTION_PERCENTILE,eg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eg.DISABLED=new eg(-1,0,0);class tg{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new tg(0)}static Mn(){return new tg(-1)}}class ng{constructor(){this.changes=new Zd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ad.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ph.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ig{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class rg{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Lf(n.mutation,e,Mh.empty(),Zu.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,hf()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hf();const i=of();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((e=>{let t=rf();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=of();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,hf())))}populateOverlays(e,t,n){const i=[];return n.forEach((e=>{t.has(e)||i.push(e)})),this.documentOverlayCache.getOverlays(e,i).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,i){let r=tf();const s=lf(),o=lf();return t.forEach(((e,t)=>{const o=n.get(t.key);i.has(t.key)&&(void 0===o||o.mutation instanceof Uf)?r=r.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Lf(o.mutation,t,o.mutation.getFieldMask(),Zu.now())):s.set(t.key,Mh.empty())})),this.recalculateAndSaveOverlays(e,r).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new ig(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=lf();let i=new Th(((e,t)=>e-t)),r=hf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const r of e)r.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Mh.empty();o=r.applyToLocalView(s,o),n.set(e,o);const a=(i.get(r.batchId)||hf()).add(e);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,c=af();l.forEach((e=>{if(!r.has(e)){const i=Of(t.get(e),n.get(e));null!==i&&c.set(e,i),r=r.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return ph.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return sh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Vd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):ph.resolve(of());let o=-1,a=r;return s.next((t=>ph.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(t)?ph.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,r))).next((()=>this.computeViews(e,a,t,hf()))).next((e=>({batchId:o,changes:sf(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new sh(t)).next((e=>{let t=rf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const i=t.collectionGroup;let r=rf();return this.indexManager.getCollectionParents(e,i).next((s=>ph.forEach(s,(s=>{const o=function(e,t){return new Pd(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{r=r.insert(e,t)}))}))})).next((()=>r))))}getDocumentsMatchingCollectionQuery(e,t,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((r=>(i=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i)))).next((e=>{i.forEach(((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,ad.newInvalidDocument(i)))}));let n=rf();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Lf(s.mutation,r,Mh.empty(),Zu.now()),Yd(t,r)&&(n=n.insert(e,r))})),n}))}}class sg{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ph.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Ep(n.createTime)}),ph.resolve()}getNamedQuery(e,t){return ph.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Qp(e.bundledQuery),readTime:Ep(e.readTime)}}(t)),ph.resolve()}}class og{constructor(){this.overlays=new Th(sh.comparator),this.ls=new Map}getOverlay(e,t){return ph.resolve(this.overlays.get(t))}getOverlays(e,t){const n=of();return ph.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.we(e,t,i)})),ph.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.ls.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),ph.resolve()}getOverlaysForCollection(e,t,n){const i=of(),r=t.length+1,s=new sh(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return ph.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new Th(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=of(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=of(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=i)););return ph.resolve(o)}we(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.ls.get(i.largestBatchId).delete(n.key);this.ls.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Gf(t,n));let r=this.ls.get(t);void 0===r&&(r=hf(),this.ls.set(t,r)),this.ls.set(t,r.add(n.key))}}class ag{constructor(){this.fs=new Ah(lg.ds),this.ws=new Ah(lg._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new lg(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new lg(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new sh(new nh([])),n=new lg(t,e),i=new lg(t,e+1),r=[];return this.ws.forEachInRange([n,i],(e=>{this.ys(e),r.push(e.key)})),r}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new sh(new nh([])),n=new lg(t,e),i=new lg(t,e+1);let r=hf();return this.ws.forEachInRange([n,i],(e=>{r=r.add(e.key)})),r}containsKey(e){const t=new lg(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class lg{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return sh.comparator(e.key,t.key)||Xu(e.As,t.As)}static _s(e,t){return Xu(e.As,t.As)||sh.comparator(e.key,t.key)}}class cg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Ah(lg.ds)}checkEmpty(e){return ph.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new qf(r,t,n,i);this.mutationQueue.push(s);for(const o of i)this.Rs=this.Rs.add(new lg(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ph.resolve(s)}lookupMutationBatch(e,t){return ph.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.bs(n),r=i<0?0:i;return ph.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return ph.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ph.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new lg(t,0),i=new lg(t,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([n,i],(e=>{const t=this.Ps(e.As);r.push(t)})),ph.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ah(Xu);return t.forEach((e=>{const t=new lg(e,0),i=new lg(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,i],(e=>{n=n.add(e.As)}))})),ph.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;sh.isDocumentKey(r)||(r=r.child(""));const s=new lg(new sh(r),0);let o=new Ah(Xu);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.As)),!0)}),s),ph.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Lu(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return ph.forEach(t.mutations,(i=>{const r=new lg(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new lg(t,0),i=this.Rs.firstAfterOrEqual(n);return ph.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ph.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ug{constructor(e){this.Ds=e,this.docs=new Th(sh.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ph.resolve(n?n.document.mutableCopy():ad.newInvalidDocument(t))}getEntries(e,t){let n=tf();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ad.newInvalidDocument(e))})),ph.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=tf();const s=t.path,o=new sh(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||uh(lh(o),n)<=0||(i.has(o.key)||Yd(t,o))&&(r=r.insert(o.key,o.mutableCopy()))}return ph.resolve(r)}getAllFromCollectionGroup(e,t,n,i){Pu()}Cs(e,t){return ph.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new hg(this)}getSize(e){return ph.resolve(this.size)}}class hg extends ng{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(n)})),ph.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class dg{constructor(e){this.persistence=e,this.xs=new Zd((e=>Nd(e)),Dd),this.lastRemoteSnapshotVersion=eh.min(),this.highestTargetId=0,this.Ns=0,this.ks=new ag,this.targetCount=0,this.Ms=tg.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),ph.resolve()}getLastRemoteSnapshotVersion(e){return ph.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ph.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ph.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),ph.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new tg(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ph.resolve()}updateTargetData(e,t){return this.Fn(t),ph.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ph.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.xs.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),ph.waitFor(r).next((()=>i))}getTargetCount(e){return ph.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return ph.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),ph.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach((t=>{r.push(i.markPotentiallyOrphaned(e,t))})),ph.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ph.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return ph.resolve(n)}containsKey(e,t){return ph.resolve(this.ks.containsKey(t))}}class fg{constructor(e,t){this.$s={},this.overlays={},this.Os=new mh(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new dg(this),this.indexManager=new Jp,this.remoteDocumentCache=function(e){return new ug(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new Yp(t),this.qs=new sg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new og,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new cg(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Mu("MemoryPersistence","Starting transaction:",e);const i=new pg(this.Os.next());return this.referenceDelegate.Us(),n(i).next((e=>this.referenceDelegate.Ks(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Gs(e,t){return ph.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class pg extends dh{constructor(e){super(),this.currentSequenceNumber=e}}class gg{constructor(e){this.persistence=e,this.Qs=new ag,this.js=null}static zs(e){return new gg(e)}get Ws(){if(this.js)return this.js;throw Pu()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),ph.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),ph.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ph.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ph.forEach(this.Ws,(n=>{const i=sh.fromPath(n);return this.Hs(e,i).next((e=>{e||t.removeEntry(i,eh.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return ph.or([()=>ph.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class mg{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=i}static Li(e,t){let n=hf(),i=hf();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new mg(e,t.fromCache,n,i)}}class yg{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,i){return this.Ki(e,t).next((r=>r||this.Gi(e,t,i,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(jd(t))return ph.resolve(null);let n=$d(t);return this.indexManager.getIndexType(e,n).next((i=>0===i?null:(null!==t.limit&&1===i&&(t=Wd(t,null,"F"),n=$d(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const r=hf(...i);return this.Ui.getDocuments(e,r).next((i=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ji(t,i);return this.zi(t,s,r,n.readTime)?this.Ki(e,Wd(t,null,"F")):this.Wi(e,s,t,n)}))))})))))}Gi(e,t,n,i){return jd(t)||i.isEqual(eh.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((r=>{const s=this.ji(t,r);return this.zi(t,s,n,i)?this.Qi(e,t):(Ru()<=Lt.DEBUG&&Mu("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gd(t)),this.Wi(e,s,t,ah(i,-1)))}))}ji(e,t){let n=new Ah(Xd(e));return t.forEach(((t,i)=>{Yd(e,i)&&(n=n.add(i))})),n}zi(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Qi(e,t){return Ru()<=Lt.DEBUG&&Mu("QueryEngine","Using full collection scan to execute query:",Gd(t)),this.Ui.getDocumentsMatchingQuery(e,t,ch.min())}Wi(e,t,n,i){return this.Ui.getDocumentsMatchingQuery(e,n,i).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class vg{constructor(e,t,n,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Th(Xu),this.Yi=new Zd((e=>Nd(e)),Dd),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rg(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function bg(e,t,n,i){return new vg(e,t,n,i)}async function wg(e,t){const n=Fu(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next((r=>(i=r,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const r=[],s=[];let o=hf();for(const e of i){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({er:e,removedBatchIds:r,addedBatchIds:s})))}))}))}function _g(e){const t=Fu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function xg(e,t,n){let i=hf(),r=hf();return n.forEach((e=>i=i.add(e))),t.getEntries(e,i).next((e=>{let i=tf();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(eh.min())?(t.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),i=i.insert(n,s)):Mu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{nr:i,sr:r}}))}function kg(e,t){const n=Fu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Sg(e,t){const n=Fu(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let i;return n.Bs.getTargetData(e,t).next((r=>r?(i=r,ph.resolve(i)):n.Bs.allocateTargetId(e).next((r=>(i=new Gp(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,i).next((()=>i)))))))})).then((e=>{const i=n.Ji.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function Eg(e,t,n){const i=Fu(e),r=i.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(e=>i.persistence.referenceDelegate.removeTarget(e,r)))}catch(e){if(!gh(e))throw e;Mu("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}i.Ji=i.Ji.remove(t),i.Yi.delete(r.target)}function Tg(e,t,n){const i=Fu(e);let r=eh.min(),s=hf();return i.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const i=Fu(e),r=i.Yi.get(n);return void 0!==r?ph.resolve(i.Ji.get(r)):i.Bs.getTargetData(t,n)}(i,e,$d(t)).next((t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>i.Hi.getDocumentsMatchingQuery(e,t,n?r:eh.min(),n?s:hf()))).next((e=>(Ig(i,Qd(t),e),{documents:e,ir:s})))))}function Ig(e,t,n){let i=e.Xi.get(t)||eh.min();n.forEach(((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)})),e.Xi.set(t,i)}class Cg{constructor(){this.activeTargetIds=ff()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ag{constructor(){this.Hr=new Cg,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Cg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Rg{Yr(e){}shutdown(){}}class Mg{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Mu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Mu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ng=null;function Dg(){return null===Ng?Ng=268435456+Math.round(2147483648*Math.random()):Ng++,"0x"+Ng.toString(16)}const Og={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Pg{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Lg="WebChannelConnection";class Fg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,i,r){const s=Dg(),o=this.To(e,t);Mu("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={};return this.Eo(a,i,r),this.Ao(e,o,a,n).then((t=>(Mu("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Du("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}vo(e,t,n,i,r,s){return this.Io(e,t,n,i,r)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Cu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=Og[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,i){const r=Dg();return new Promise(((s,o)=>{const a=new ku;a.setWithCredentials(!0),a.listenOnce(vu.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case yu.NO_ERROR:const t=a.getResponseJson();Mu(Lg,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(t)),s(t);break;case yu.TIMEOUT:Mu(Lg,`RPC '${e}' ${r} timed out`),o(new zu(ju.DEADLINE_EXCEEDED,"Request time out"));break;case yu.HTTP_ERROR:const n=a.getStatus();if(Mu(Lg,`RPC '${e}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ju).indexOf(t)>=0?t:ju.UNKNOWN}(t.status);o(new zu(e,t.message))}else o(new zu(ju.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new zu(ju.UNAVAILABLE,"Connection failed."));break;default:Pu()}}finally{Mu(Lg,`RPC '${e}' ${r} completed.`)}}));const l=JSON.stringify(i);Mu(Lg,`RPC '${e}' ${r} sending request:`,i),a.send(t,"POST",l,n,15)}))}Ro(e,t,n){const i=Dg(),r=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=gu(),o=mu(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new _u({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=r.join("");Mu(Lg,`Creating RPC '${e}' stream ${i}: ${c}`,a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new Pg({ro:t=>{d?Mu(Lg,`Not sending because RPC '${e}' stream ${i} is closed:`,t):(h||(Mu(Lg,`Opening RPC '${e}' stream ${i} transport.`),u.open(),h=!0),Mu(Lg,`RPC '${e}' stream ${i} sending:`,t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,xu.EventType.OPEN,(()=>{d||Mu(Lg,`RPC '${e}' stream ${i} transport opened.`)})),p(u,xu.EventType.CLOSE,(()=>{d||(d=!0,Mu(Lg,`RPC '${e}' stream ${i} transport closed`),f.wo())})),p(u,xu.EventType.ERROR,(t=>{d||(d=!0,Du(Lg,`RPC '${e}' stream ${i} transport errored:`,t),f.wo(new zu(ju.UNAVAILABLE,"The operation could not be completed")))})),p(u,xu.EventType.MESSAGE,(t=>{var n;if(!d){const r=t.data[0];Lu(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Mu(Lg,`RPC '${e}' stream ${i} received error:`,o);const t=o.status;let n=function(e){const t=Qf[e];if(void 0!==t)return Zf(t)}(t),r=o.message;void 0===n&&(n=ju.INTERNAL,r="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new zu(n,r)),u.close()}else Mu(Lg,`RPC '${e}' stream ${i} received:`,r),f._o(r)}})),p(o,bu.STAT_EVENT,(t=>{t.stat===wu.PROXY?Mu(Lg,`RPC '${e}' stream ${i} detected buffering proxy`):t.stat===wu.NOPROXY&&Mu(Lg,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}function jg(){return"undefined"!=typeof document?document:null}function zg(e){return new wp(e,!0)}class Ug{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=i,this.Vo=r,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-n);i>0&&Mu("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Vg{constructor(e,t,n,i,r,s,o,a){this.ii=e,this.$o=n,this.Oo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Ug(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===ju.RESOURCE_EXHAUSTED?(Nu(t.toString()),Nu("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===ju.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,i]=e;this.Fo===t&&this.Zo(n,i)}),(t=>{e((()=>{const e=new zu(ju.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return Mu("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(Mu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Bg extends Vg{constructor(e,t,n,i,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Pu()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Lu(void 0===t||"string"==typeof t),Dh.fromBase64String(t||"")):(Lu(void 0===t||t instanceof Uint8Array),Dh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?ju.UNKNOWN:Zf(e.code);return new zu(t,e.message||"")}(o);n=new dp(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ap(e,i.document.name),s=Ep(i.document.updateTime),o=i.document.createTime?Ep(i.document.createTime):eh.min(),a=new sd({mapValue:{fields:i.document.fields}}),l=ad.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new up(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Ap(e,i.document),s=i.readTime?Ep(i.readTime):eh.min(),o=ad.newNoDocument(r,s),a=i.removedTargetIds||[];n=new up([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Ap(e,i.document),s=i.removedTargetIds||[];n=new up([],s,r,null)}else{if(!("filter"in t))return Pu();{t.filter;const e=t.filter;e.targetId;const{count:i=0,unchangedNames:r}=e,s=new Yf(i,r),o=e.targetId;n=new hp(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return eh.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?eh.min():t.readTime?Ep(t.readTime):eh.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=Np(this.serializer),t.addTarget=function(e,t){let n;const i=t.target;if(n=Od(i)?{documents:Lp(e,i)}:{query:Fp(e,i)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=kp(e,t.resumeToken);const i=_p(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(eh.min())>0){n.readTime=xp(e,t.snapshotVersion.toTimestamp());const i=_p(e,t.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pu()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=Np(this.serializer),t.removeTarget=e,this.Wo(t)}}class $g extends Vg{constructor(e,t,n,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Lu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Lu(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Ep(e.updateTime):Ep(t);return n.isEqual(eh.min())&&(n=Ep(t)),new Rf(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Ep(e.commitTime);return this.listener.cu(n,t)}return Lu(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Np(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Pp(this.serializer,e)))};this.Wo(t)}}class Hg extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new zu(ju.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[r,s]=i;return this.connection.Io(e,t,n,r,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ju.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new zu(ju.UNKNOWN,e.toString())}))}vo(e,t,n,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[s,o]=r;return this.connection.vo(e,t,n,s,o,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ju.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new zu(ju.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class Wg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Nu(t),this.mu=!1):Mu("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class qg{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=r,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{tm(this)&&(Mu("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Fu(e);t.vu.add(4),await Gg(t),t.bu.set("Unknown"),t.vu.delete(4),await Kg(t)}(this))}))})),this.bu=new Wg(n,i)}}async function Kg(e){if(tm(e))for(const t of e.Ru)await t(!0)}async function Gg(e){for(const t of e.Ru)await t(!1)}function Yg(e,t){const n=Fu(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),em(n)?Zg(n):bm(n).Ko()&&Xg(n,t))}function Qg(e,t){const n=Fu(e),i=bm(n);n.Au.delete(t),i.Ko()&&Jg(n,t),0===n.Au.size&&(i.Ko()?i.jo():tm(n)&&n.bu.set("Unknown"))}function Xg(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(eh.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}bm(e).su(t)}function Jg(e,t){e.Vu.qt(t),bm(e).iu(t)}function Zg(e){e.Vu=new pp({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),bm(e).start(),e.bu.gu()}function em(e){return tm(e)&&!bm(e).Uo()&&e.Au.size>0}function tm(e){return 0===Fu(e).vu.size}function nm(e){e.Vu=void 0}async function im(e){e.Au.forEach(((t,n)=>{Xg(e,t)}))}async function rm(e,t){nm(e),em(e)?(e.bu.Iu(t),Zg(e)):e.bu.set("Unknown")}async function sm(e,t,n){if(e.bu.set("Online"),t instanceof dp&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.Au.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.Au.delete(i),e.Vu.removeTarget(i))}(e,t)}catch(n){Mu("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await om(e,n)}else if(t instanceof up?e.Vu.Ht(t):t instanceof hp?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(eh.min()))try{const t=await _g(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.Au.get(i);r&&e.Au.set(i,r.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const i=e.Au.get(t);if(!i)return;e.Au.set(t,i.withResumeToken(Dh.EMPTY_BYTE_STRING,i.snapshotVersion)),Jg(e,t);const r=new Gp(i.target,t,n,i.sequenceNumber);Xg(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Mu("RemoteStore","Failed to raise snapshot:",t),await om(e,t)}}async function om(e,t,n){if(!gh(t))throw t;e.vu.add(1),await Gg(e),e.bu.set("Offline"),n||(n=()=>_g(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Mu("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await Kg(e)}))}function am(e,t){return t().catch((n=>om(e,n,t)))}async function lm(e){const t=Fu(e),n=wm(t);let i=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;cm(t);)try{const e=await kg(t.localStore,i);if(null===e){0===t.Eu.length&&n.jo();break}i=e.batchId,um(t,e)}catch(e){await om(t,e)}hm(t)&&dm(t)}function cm(e){return tm(e)&&e.Eu.length<10}function um(e,t){e.Eu.push(t);const n=wm(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function hm(e){return tm(e)&&!wm(e).Uo()&&e.Eu.length>0}function dm(e){wm(e).start()}async function fm(e){wm(e).hu()}async function pm(e){const t=wm(e);for(const n of e.Eu)t.uu(n.mutations)}async function gm(e,t,n){const i=e.Eu.shift(),r=Kf.from(i,t,n);await am(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await lm(e)}async function mm(e,t){t&&wm(e).ou&&await async function(e,t){if(Jf(n=t.code)&&n!==ju.ABORTED){const n=e.Eu.shift();wm(e).Qo(),await am(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await lm(e)}var n}(e,t),hm(e)&&dm(e)}async function ym(e,t){const n=Fu(e);n.asyncQueue.verifyOperationInProgress(),Mu("RemoteStore","RemoteStore received new credentials");const i=tm(n);n.vu.add(3),await Gg(n),i&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await Kg(n)}async function vm(e,t){const n=Fu(e);t?(n.vu.delete(2),await Kg(n)):t||(n.vu.add(2),await Gg(n),n.bu.set("Unknown"))}function bm(e){return e.Su||(e.Su=function(e,t,n){const i=Fu(e);return i.fu(),new Bg(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{uo:im.bind(null,e),ao:rm.bind(null,e),nu:sm.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),em(e)?Zg(e):e.bu.set("Unknown")):(await e.Su.stop(),nm(e))}))),e.Su}function wm(e){return e.Du||(e.Du=function(e,t,n){const i=Fu(e);return i.fu(),new $g(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{uo:fm.bind(null,e),ao:mm.bind(null,e),au:pm.bind(null,e),cu:gm.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await lm(e)):(await e.Du.stop(),e.Eu.length>0&&(Mu("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))}))),e.Du}class _m{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Uu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,o=new _m(e,t,s,i,r);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zu(ju.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xm(e,t){if(Nu("AsyncQueue",`${t}: ${e}`),gh(e))return new zu(ju.UNAVAILABLE,`${t}: ${e}`);throw e}class km{constructor(e){this.comparator=e?(t,n)=>e(t,n)||sh.comparator(t.key,n.key):(e,t)=>sh.comparator(e.key,t.key),this.keyedMap=rf(),this.sortedSet=new Th(this.comparator)}static emptySet(e){return new km(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof km))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new km;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Sm{constructor(){this.Cu=new Th(sh.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Pu():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Em{constructor(e,t,n,i,r,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,i,r){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Em(e,t,km.emptySet(t),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}class Tm{constructor(){this.Nu=void 0,this.listeners=[]}}class Im{constructor(){this.queries=new Zd((e=>Kd(e)),qd),this.onlineState="Unknown",this.ku=new Set}}async function Cm(e,t){const n=Fu(e),i=t.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new Tm),r)try{s.Nu=await n.onListen(i)}catch(e){const n=xm(e,`Initialization of query '${Gd(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&Nm(n)}async function Am(e,t){const n=Fu(e),i=t.query;let r=!1;const s=n.queries.get(i);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),r=0===s.listeners.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function Rm(e,t){const n=Fu(e);let i=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(r)&&(i=!0);t.Nu=r}}i&&Nm(n)}function Mm(e,t,n){const i=Fu(e),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(t)}function Nm(e){e.ku.forEach((e=>{e.next()}))}class Dm{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Em(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Em.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Om{constructor(e){this.key=e}}class Pm{constructor(e){this.key=e}}class Lm{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=hf(),this.mutatedKeys=hf(),this.tc=Xd(e),this.ec=new km(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Sm,i=t?t.ec:this.ec;let r=t?t.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((e,t)=>{const c=i.get(e),u=Yd(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||l&&this.tc(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),r=d?r.add(e):r.delete(e)):(s=s.delete(e),r=r.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:r}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const r=e.ic.xu();r.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pu()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==r.length||a?{snapshot:new Em(this.query,e.ec,i,r,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Sm,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=hf(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new Pm(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new Om(n))})),t}hc(e){this.Yu=e.ir,this.Zu=hf();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Em.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Fm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class jm{constructor(e){this.key=e,this.fc=!1}}class zm{constructor(e,t,n,i,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new Zd((e=>Kd(e)),qd),this._c=new Map,this.mc=new Set,this.gc=new Th(sh.comparator),this.yc=new Map,this.Ic=new ag,this.Tc={},this.Ec=new Map,this.Ac=tg.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Um(e,t){const n=ry(e);let i,r;const s=n.wc.get(t);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const e=await Sg(n.localStore,$d(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);i=e.targetId,r=await Vm(n,t,i,"current"===s,e.resumeToken),n.isPrimaryClient&&Yg(n.remoteStore,e)}return r}async function Vm(e,t,n,i,r){e.Rc=(t,n,i)=>async function(e,t,n,i){let r=t.view.sc(n);r.zi&&(r=await Tg(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,r)})));const s=i&&i.targetChanges.get(t.targetId),o=t.view.applyChanges(r,e.isPrimaryClient,s);return Jm(e,t.targetId,o.cc),o.snapshot}(e,t,n,i);const s=await Tg(e.localStore,t,!0),o=new Lm(t,s.ir),a=o.sc(s.documents),l=cp.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState,r),c=o.applyChanges(a,e.isPrimaryClient,l);Jm(e,n,c.cc);const u=new Fm(t,n,o);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function Bm(e,t){const n=Fu(e),i=n.wc.get(t),r=n._c.get(i.targetId);if(r.length>1)return n._c.set(i.targetId,r.filter((e=>!qd(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Eg(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),Qg(n.remoteStore,i.targetId),Qm(n,i.targetId)})).catch(fh)):(Qm(n,i.targetId),await Eg(n.localStore,i.targetId,!0))}async function $m(e,t){const n=Fu(e);try{const e=await function(e,t){const n=Fu(e),i=t.snapshotVersion;let r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;const o=[];t.targetChanges.forEach(((s,a)=>{const l=r.get(a);if(!l)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Dh.EMPTY_BYTE_STRING,eh.min()).withLastLimboFreeSnapshotVersion(eh.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,i)),r=r.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Bs.updateTargetData(e,c))}));let a=tf(),l=hf();if(t.documentUpdates.forEach((i=>{t.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),o.push(xg(e,s,t.documentUpdates).next((e=>{a=e.nr,l=e.sr}))),!i.isEqual(eh.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,i)));o.push(t)}return ph.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ji=r,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const i=n.yc.get(t);i&&(Lu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.fc=!0:e.modifiedDocuments.size>0?Lu(i.fc):e.removedDocuments.size>0&&(Lu(i.fc),i.fc=!1))})),await ty(n,e,t)}catch(e){await fh(e)}}function Hm(e,t,n){const i=Fu(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.wc.forEach(((n,i)=>{const r=i.view.Mu(t);r.snapshot&&e.push(r.snapshot)})),function(e,t){const n=Fu(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const r of n.listeners)r.Mu(t)&&(i=!0)})),i&&Nm(n)}(i.eventManager,t),e.length&&i.dc.nu(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Wm(e,t,n){const i=Fu(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.yc.get(t),s=r&&r.key;if(s){let e=new Th(sh.comparator);e=e.insert(s,ad.newNoDocument(s,eh.min()));const n=hf().add(s),r=new lp(eh.min(),new Map,new Th(Xu),e,n);await $m(i,r),i.gc=i.gc.remove(s),i.yc.delete(t),ey(i)}else await Eg(i.localStore,t,!1).then((()=>Qm(i,t,n))).catch(fh)}async function qm(e,t){const n=Fu(e),i=t.batch.batchId;try{const e=await function(e,t){const n=Fu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),r=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,s=r.keys();let o=ph.resolve();return s.forEach((e=>{o=o.next((()=>i.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Lu(null!==s),t.version.compareTo(s)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,r)))}(n,e,t,r).next((()=>r.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=hf();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(n.localStore,t);Ym(n,i,null),Gm(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await ty(n,e)}catch(e){await fh(e)}}async function Km(e,t,n){const i=Fu(e);try{const e=await function(e,t){const n=Fu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Lu(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(i.localStore,t);Ym(i,t,n),Gm(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await ty(i,e)}catch(n){await fh(n)}}function Gm(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function Ym(e,t,n){const i=Fu(e);let r=i.Tc[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.Tc[i.currentUser.toKey()]=r}}function Qm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const i of e._c.get(t))e.wc.delete(i),n&&e.dc.Pc(i,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||Xm(e,t)}))}function Xm(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Qg(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),ey(e))}function Jm(e,t,n){for(const i of n)i instanceof Om?(e.Ic.addReference(i.key,t),Zm(e,i)):i instanceof Pm?(Mu("SyncEngine","Document no longer in limbo: "+i.key),e.Ic.removeReference(i.key,t),e.Ic.containsKey(i.key)||Xm(e,i.key)):Pu()}function Zm(e,t){const n=t.key,i=n.path.canonicalString();e.gc.get(n)||e.mc.has(i)||(Mu("SyncEngine","New document in limbo: "+n),e.mc.add(i),ey(e))}function ey(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new sh(nh.fromString(t)),i=e.Ac.next();e.yc.set(i,new jm(n)),e.gc=e.gc.insert(n,i),Yg(e.remoteStore,new Gp($d(Fd(n.path)),i,"TargetPurposeLimboResolution",mh.ct))}}async function ty(e,t,n){const i=Fu(e),r=[],s=[],o=[];i.wc.isEmpty()||(i.wc.forEach(((e,a)=>{o.push(i.Rc(a,t,n).then((e=>{if((e||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){r.push(e);const t=mg.Li(a.targetId,e);s.push(t)}})))})),await Promise.all(o),i.dc.nu(r),await async function(e,t){const n=Fu(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ph.forEach(t,(t=>ph.forEach(t.Fi,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>ph.forEach(t.Bi,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!gh(e))throw e;Mu("LocalStore","Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Ji.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.Ji=n.Ji.insert(e,r)}}}(i.localStore,s))}async function ny(e,t){const n=Fu(e);if(!n.currentUser.isEqual(t)){Mu("SyncEngine","User change. New user:",t.toKey());const e=await wg(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new zu(ju.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ty(n,e.er)}}function iy(e,t){const n=Fu(e),i=n.yc.get(t);if(i&&i.fc)return hf().add(i.key);{let e=hf();const i=n._c.get(t);if(!i)return e;for(const t of i){const i=n.wc.get(t);e=e.unionWith(i.view.nc)}return e}}function ry(e){const t=Fu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=$m.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Wm.bind(null,t),t.dc.nu=Rm.bind(null,t.eventManager),t.dc.Pc=Mm.bind(null,t.eventManager),t}function sy(e){const t=Fu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Km.bind(null,t),t}class oy{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=zg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return bg(this.persistence,new yg,e.initialUser,this.serializer)}createPersistence(e){return new fg(gg.zs,this.serializer)}createSharedClientState(e){return new Ag}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ay{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Hm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ny.bind(null,this.syncEngine),await vm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Im}createDatastore(e){const t=zg(e.databaseInfo.databaseId),n=(i=e.databaseInfo,new Fg(i));var i;return function(e,t,n,i){return new Hg(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,i=e.asyncQueue,r=e=>Hm(this.syncEngine,e,0),s=Mg.D()?new Mg:new Rg,new qg(t,n,i,r,s);var t,n,i,r,s}createSyncEngine(e,t){return function(e,t,n,i,r,s,o){const a=new zm(e,t,n,i,r,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Fu(e);Mu("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Gg(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class ly{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Nu("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class cy{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Iu.UNAUTHENTICATED,this.clientId=Qu.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Mu("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Mu("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new zu(ju.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Uu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(jS){const n=xm(jS,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function uy(e,t){e.asyncQueue.verifyOperationInProgress(),Mu("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await wg(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function hy(e,t){e.asyncQueue.verifyOperationInProgress();const n=await fy(e);Mu("FirestoreClient","Initializing OnlineComponentProvider");const i=await e.getConfiguration();await t.initialize(n,i),e.setCredentialChangeListener((e=>ym(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>ym(t.remoteStore,n))),e._onlineComponents=t}function dy(e){return"FirebaseError"===e.name?e.code===ju.FAILED_PRECONDITION||e.code===ju.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function fy(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Mu("FirestoreClient","Using user provided OfflineComponentProvider");try{await uy(e,e._uninitializedComponentsProvider._offline)}catch(jS){const n=jS;if(!dy(n))throw n;Du("Error using user provided cache. Falling back to memory cache: "+n),await uy(e,new oy)}}else Mu("FirestoreClient","Using default OfflineComponentProvider"),await uy(e,new oy);return e._offlineComponents}async function py(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Mu("FirestoreClient","Using user provided OnlineComponentProvider"),await hy(e,e._uninitializedComponentsProvider._online)):(Mu("FirestoreClient","Using default OnlineComponentProvider"),await hy(e,new ay))),e._onlineComponents}function gy(e){return py(e).then((e=>e.syncEngine))}async function my(e){const t=await py(e),n=t.eventManager;return n.onListen=Um.bind(null,t.syncEngine),n.onUnlisten=Bm.bind(null,t.syncEngine),n}function yy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new Uu;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new ly({next:s=>{t.enqueueAndForget((()=>Am(e,o)));const a=s.docs.has(n);!a&&s.fromCache?r.reject(new zu(ju.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&i&&"server"===i.source?r.reject(new zu(ju.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:e=>r.reject(e)}),o=new Dm(Fd(n.path),s,{includeMetadataChanges:!0,Ku:!0});return Cm(e,o)}(await my(e),e.asyncQueue,t,n,i))),i.promise}function vy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new Uu;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new ly({next:n=>{t.enqueueAndForget((()=>Am(e,o))),n.fromCache&&"server"===i.source?r.reject(new zu(ju.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),o=new Dm(n,s,{includeMetadataChanges:!0,Ku:!0});return Cm(e,o)}(await my(e),e.asyncQueue,t,n,i))),i.promise}function by(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const wy=new Map;function _y(e,t,n){if(!n)throw new zu(ju.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function xy(e){if(!sh.isDocumentKey(e))throw new zu(ju.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ky(e){if(sh.isDocumentKey(e))throw new zu(ju.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Sy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Pu()}function Ey(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new zu(ju.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sy(e);throw new zu(ju.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Ty{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new zu(ju.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new zu(ju.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new zu(ju.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=by(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new zu(ju.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new zu(ju.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new zu(ju.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Iy{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ty({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new zu(ju.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new zu(ju.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ty(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Bu;switch(e.type){case"firstParty":return new qu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new zu(ju.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=wy.get(e);t&&(Mu("ComponentProvider","Removing Datastore"),wy.delete(e),t.terminate())}(this),Promise.resolve()}}function Cy(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r;const s=(e=Ey(e,Iy))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Du("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=Iu.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ut(JSON.stringify({alg:"none",type:"JWT"})),ut(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new zu(ju.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Iu(s)}e._authCredentials=new $u(new Vu(t,n))}}class Ay{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new My(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ay(this.firestore,e,this._key)}}class Ry{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ry(this.firestore,e,this._query)}}class My extends Ry{constructor(e,t,n){super(e,t,Fd(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ay(this.firestore,null,new sh(e))}withConverter(e){return new My(this.firestore,e,this._path)}}function Ny(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=Rt(e),_y("collection","path",t),e instanceof Iy){const n=nh.fromString(t,...i);return ky(n),new My(e,null,n)}{if(!(e instanceof Ay||e instanceof My))throw new zu(ju.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(nh.fromString(t,...i));return ky(n),new My(e.firestore,null,n)}}function Dy(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=Rt(e),1===arguments.length&&(t=Qu.A()),_y("doc","path",t),e instanceof Iy){const n=nh.fromString(t,...i);return xy(n),new Ay(e,null,new sh(n))}{if(!(e instanceof Ay||e instanceof My))throw new zu(ju.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(nh.fromString(t,...i));return xy(n),new Ay(e.firestore,e instanceof My?e.converter:null,new sh(n))}}class Oy{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Ug(this,"async_queue_retry"),this.Xc=()=>{const e=jg();e&&Mu("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=jg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=jg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new Uu;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!gh(e))throw e;Mu("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Nu("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=_m.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(i),i}Zc(){this.Wc&&Pu()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class Py extends Iy{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Oy,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Fy(this),this._firestoreClient.terminate()}}function Ly(e){return e._firestoreClient||Fy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Fy(e){var t,n,i;const r=e._freezeSettings(),s=function(e,t,n,i){return new Vh(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,by(i.experimentalLongPollingOptions),i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new cy(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=r.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.cache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}class jy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jy(Dh.fromBase64String(e))}catch(e){throw new zu(ju.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new jy(Dh.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zy{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let i=0;i<t.length;++i)if(0===t[i].length)throw new zu(ju.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rh(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uy{constructor(e){this._methodName=e}}class Vy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new zu(ju.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new zu(ju.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xu(this._lat,e._lat)||Xu(this._long,e._long)}}const By=/^__.*__$/;class $y{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Uf(e,this.data,this.fieldMask,t,this.fieldTransforms):new zf(e,this.data,t,this.fieldTransforms)}}class Hy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Uf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Wy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pu()}}class qy{constructor(e,t,n,i,r,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.ua(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new qy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:n,la:!1});return i.fa(e),i}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:n,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return lv(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Wy(this.ca)&&By.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Ky{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||zg(e)}ya(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new qy({ca:e,methodName:t,ga:n,path:rh.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gy(e){const t=e._freezeSettings(),n=zg(e._databaseId);return new Ky(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Yy(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(s.merge||s.mergeFields?2:0,t,n,r);rv("Data must be an object, but it was:",o,i);const a=nv(i,o);let l,c;if(s.merge)l=new Mh(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const i of s.mergeFields){const r=sv(t,i,n);if(!o.contains(r))throw new zu(ju.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);cv(e,r)||e.push(r)}l=new Mh(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new $y(new sd(a),l,c)}class Qy extends Uy{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qy}}class Xy extends Uy{_toFieldTransform(e){return new Af(e.path,new _f)}isEqual(e){return e instanceof Xy}}function Jy(e,t,n,i){const r=e.ya(1,t,n);rv("Data must be an object, but it was:",r,i);const s=[],o=sd.empty();Sh(i,((e,i)=>{const a=av(t,e,n);i=Rt(i);const l=r.da(a);if(i instanceof Qy)s.push(a);else{const e=tv(i,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Mh(s);return new Hy(o,a,r.fieldTransforms)}function Zy(e,t,n,i,r,s){const o=e.ya(1,t,n),a=[sv(t,i,n)],l=[r];if(s.length%2!=0)throw new zu(ju.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(sv(t,s[d])),l.push(s[d+1]);const c=[],u=sd.empty();for(let d=a.length-1;d>=0;--d)if(!cv(c,a[d])){const e=a[d];let t=l[d];t=Rt(t);const n=o.da(e);if(t instanceof Qy)c.push(e);else{const i=tv(t,n);null!=i&&(c.push(e),u.set(e,i))}}const h=new Mh(c);return new Hy(u,h,o.fieldTransforms)}function ev(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return tv(n,e.ya(i?4:3,t))}function tv(e,t){if(iv(e=Rt(e)))return rv("Unsupported field value:",t,e),nv(e,t);if(e instanceof Uy)return function(e,t){if(!Wy(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=tv(r,t.wa(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Rt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return mf(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Zu.fromDate(e);return{timestampValue:xp(t.serializer,n)}}if(e instanceof Zu){const n=new Zu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:xp(t.serializer,n)}}if(e instanceof Vy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof jy)return{bytesValue:kp(t.serializer,e._byteString)};if(e instanceof Ay){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t._a(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Tp(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${Sy(e)}`)}(e,t)}function nv(e,t){const n={};return Eh(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Sh(e,((e,i)=>{const r=tv(i,t.ha(e));null!=r&&(n[e]=r)})),{mapValue:{fields:n}}}function iv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Zu||e instanceof Vy||e instanceof jy||e instanceof Ay||e instanceof Uy)}function rv(e,t,n){if(!iv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=Sy(n);throw"an object"===i?t._a(e+" a custom object"):t._a(e+" "+i)}}function sv(e,t,n){if((t=Rt(t))instanceof zy)return t._internalPath;if("string"==typeof t)return av(e,t);throw lv("Field path arguments must be of type string or ",e,!1,void 0,n)}const ov=new RegExp("[~\\*/\\[\\]]");function av(e,t,n){if(t.search(ov)>=0)throw lv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new zy(...t.split("."))._internalPath}catch(i){throw lv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function lv(e,t,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new zu(ju.INVALID_ARGUMENT,a+e+l)}function cv(e,t){return e.some((e=>e.isEqual(t)))}class uv{constructor(e,t,n,i,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Ay(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hv extends uv{data(){return super.data()}}function dv(e,t){return"string"==typeof t?av(e,t):t instanceof zy?t._internalPath:t._delegate._internalPath}function fv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new zu(ju.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pv{}class gv extends pv{}function mv(e,t){let n=[];for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];t instanceof pv&&n.push(t),n=n.concat(r),function(e){const t=e.filter((e=>e instanceof bv)).length,n=e.filter((e=>e instanceof yv)).length;if(t>1||t>0&&n>0)throw new zu(ju.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class yv extends gv{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new yv(e,t,n)}_apply(e){const t=this._parse(e);return xv(e._query,t),new Ry(e.firestore,e.converter,Hd(e._query,t))}_parse(e){const t=Gy(e.firestore),n=function(e,t,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new zu(ju.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){_v(o,s);const t=[];for(const n of o)t.push(wv(i,e,n));a={arrayValue:{values:t}}}else a=wv(i,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||_v(o,s),a=ev(n,"where",o,"in"===s||"not-in"===s);return pd.create(r,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function vv(e,t,n){const i=t,r=dv("where",e);return yv._create(r,i,n)}class bv extends pv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bv(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:gd.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const i=t.getFlattenedFilters();for(const r of i)xv(n,r),n=Hd(n,r)}(e._query,t),new Ry(e.firestore,e.converter,Hd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function wv(e,t,n){if("string"==typeof(n=Rt(n))){if(""===n)throw new zu(ju.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vd(t)&&-1!==n.indexOf("/"))throw new zu(ju.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(nh.fromString(n));if(!sh.isDocumentKey(i))throw new zu(ju.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Xh(e,new sh(i))}if(n instanceof Ay)return Xh(e,n._key);throw new zu(ju.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sy(n)}.`)}function _v(e,t){if(!Array.isArray(e)||0===e.length)throw new zu(ju.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function xv(e,t){if(t.isInequality()){const n=Ud(e),i=t.field;if(null!==n&&!n.isEqual(i))throw new zu(ju.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${i.toString()}'`);const r=zd(e);null!==r&&kv(e,i,r)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new zu(ju.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new zu(ju.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function kv(e,t,n){if(!n.isEqual(t))throw new zu(ju.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Sv{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Hh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Pu()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Sh(e,((e,i)=>{n[e]=this.convertValue(i,t)})),n}convertGeoPoint(e){return new Vy(Lh(e.latitude),Lh(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=zh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Uh(e));default:return null}}convertTimestamp(e){const t=Ph(e);return new Zu(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=nh.fromString(e);Lu(Kp(n));const i=new Bh(n.get(1),n.get(3)),r=new sh(n.popFirst(5));return i.isEqual(t)||Nu(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}function Ev(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class Tv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Iv extends uv{constructor(e,t,n,i,r,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Cv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(dv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Cv extends Iv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Av{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Tv(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Cv(this._firestore,this._userDataWriter,n.key,n,new Tv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new zu(ju.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const i=new Cv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Tv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const i=new Cv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Tv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,s=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Rv(t.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Rv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pu()}}function Mv(e){e=Ey(e,Ay);const t=Ey(e.firestore,Py);return yy(Ly(t),e._key).then((n=>zv(t,e,n)))}class Nv extends Sv{constructor(e){super(),this.firestore=e}convertBytes(e){return new jy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ay(this.firestore,null,t)}}function Dv(e){e=Ey(e,Ry);const t=Ey(e.firestore,Py),n=Ly(t),i=new Nv(t);return fv(e._query),vy(n,e._query).then((n=>new Av(t,i,e,n)))}function Ov(e,t,n){e=Ey(e,Ay);const i=Ey(e.firestore,Py),r=Ev(e.converter,t,n);return jv(i,[Yy(Gy(i),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,Mf.none())])}function Pv(e,t,n){e=Ey(e,Ay);const i=Ey(e.firestore,Py),r=Gy(i);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Rt(t))||t instanceof zy?Zy(r,"updateDoc",e._key,t,n,a):Jy(r,"updateDoc",e._key,t),jv(i,[s.toMutation(e._key,Mf.exists(!0))])}function Lv(e){return jv(Ey(e.firestore,Py),[new Hf(e._key,Mf.none())])}function Fv(e,t){const n=Ey(e.firestore,Py),i=Dy(e),r=Ev(e.converter,t);return jv(n,[Yy(Gy(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,Mf.exists(!1))]).then((()=>i))}function jv(e,t){return function(e,t){const n=new Uu;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const i=sy(e);try{const e=await function(e,t){const n=Fu(e),i=Zu.now(),r=t.reduce(((e,t)=>e.add(t.key)),hf());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=tf(),l=hf();return n.Zi.getEntries(e,r).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((r=>{s=r;const o=[];for(const e of t){const t=Ff(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Uf(e.key,t,od(t.value.mapValue),Mf.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,o,t)})).next((t=>{o=t;const i=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:sf(s)})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.Tc[e.currentUser.toKey()];i||(i=new Th(Xu)),i=i.insert(t,n),e.Tc[e.currentUser.toKey()]=i}(i,e.batchId,n),await ty(i,e.changes),await lm(i.remoteStore)}catch(e){const t=xm(e,"Failed to persist write");n.reject(t)}}(await gy(e),t,n))),n.promise}(Ly(e),t)}function zv(e,t,n){const i=n.docs.get(t._key),r=new Nv(e);return new Iv(e,r,t._key,i,new Tv(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Cu=e}(Bn),jn(new Mt("firestore",((e,n)=>{let{instanceIdentifier:i,options:r}=n;const s=e.getProvider("app").getImmediate(),o=new Py(new Hu(e.getProvider("auth-internal")),new Gu(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new zu(ju.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bh(e.options.projectId,t)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o}),"PUBLIC").setMultipleInstances(!0)),Wn(Tu,"3.13.0",e),Wn(Tu,"3.13.0","esm2017")}();const Uv=$n({apiKey:"AIzaSyDeO-VEk-VryGgX0R_lcmz2eKMLIlbhjBM",authDomain:"otelsim-7fe1e.firebaseapp.com",projectId:"otelsim-7fe1e",storageBucket:"otelsim-7fe1e.firebasestorage.app",messagingSenderId:"333358315105",appId:"1:333358315105:web:c745d9a640890c177a5c20"}),Vv=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hn();const t=zn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=zn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(kt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;li(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Js,persistence:[hs,Gr,Qr]}),i=mt("authTokenSyncURL");if(i){const e=(r=i,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>no)return;const i=null===t||void 0===t?void 0:t.token;io!==i&&(io=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});!function(e,t,n){Rt(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,i){Rt(e).onIdTokenChanged(t,n,i)}(n,(t=>e(t)))}var r;const s=pt("auth");return s&&mr(n,`http://${s}`),n}(Uv),Bv=function(e,t){const n="string"==typeof e?e:t||"(default)",i=zn("object"==typeof e?e:Hn(),"firestore").getImmediate({identifier:n});if(!i._initialized){const e=(e=>{const t=pt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]})("firestore");e&&Cy(i,...e)}return i}(Uv);var $v=n(579);const Hv=()=>{const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)(!1),a=ee();return(0,$v.jsx)("div",{className:"login-container",children:(0,$v.jsxs)("div",{className:"login-box",children:[(0,$v.jsx)("h2",{className:"login-title",children:"Otel Simulasyon Admin Paneli"}),(0,$v.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),r("");try{await Hr(Vv,"admin@otelsim.com",e),console.log("Admin login ba\u015far\u0131l\u0131"),a("/admin/dashboard")}catch(n){console.error("Login error:",n),r("Giri\u015f ba\u015far\u0131s\u0131z. L\xfctfen \u015fifrenizi kontrol edin.")}},children:[(0,$v.jsx)("input",{type:"password",className:"input-field",placeholder:"\u015eifre",value:e,onChange:e=>t(e.target.value),disabled:s}),n&&(0,$v.jsx)("div",{className:"error-message",children:n}),(0,$v.jsx)("button",{type:"submit",className:"login-button",disabled:s,children:s?"Giri\u015f Yap\u0131l\u0131yor...":"Giri\u015f Yap"})]})]})})},Wv=()=>{const[e,t]=(0,i.useState)({text:"",department:"",difficulty:1,options:[{text:"",effects:{revenue:0,customerSatisfaction:0,staffSatisfaction:0,occupancyRate:0,sustainability:0}}]}),n={revenue:"Gelir",customerSatisfaction:"M\xfc\u015fteri Memnuniyeti",staffSatisfaction:"Personel Memnuniyeti",occupancyRate:"Doluluk Oran\u0131",sustainability:"S\xfcrd\xfcr\xfclebilirlik"};return(0,$v.jsxs)("form",{onSubmit:async n=>{n.preventDefault();try{await Fv(Ny(Bv,"questions"),e),alert("Soru ba\u015far\u0131yla eklendi!"),t({text:"",department:"",difficulty:1,options:[{text:"",effects:{revenue:0,customerSatisfaction:0,staffSatisfaction:0,occupancyRate:0,sustainability:0}}]})}catch(i){alert("Soru eklenirken bir hata olu\u015ftu!"),console.error("Error:",i)}},className:"question-form",children:[(0,$v.jsxs)("div",{className:"form-group",children:[(0,$v.jsx)("label",{children:"Soru Metni:"}),(0,$v.jsx)("textarea",{value:e.text,onChange:n=>t({...e,text:n.target.value}),required:!0})]}),(0,$v.jsxs)("div",{className:"form-group",children:[(0,$v.jsx)("label",{children:"Departman:"}),(0,$v.jsxs)("select",{value:e.department,onChange:n=>t({...e,department:n.target.value}),required:!0,children:[(0,$v.jsx)("option",{value:"",children:"Se\xe7iniz"}),[{id:"reservation",label:"Rezervasyon"},{id:"customer_relations",label:"M\xfc\u015fteri \u0130li\u015fkileri"},{id:"hr",label:"Personel Y\xf6netimi"},{id:"financial",label:"Gelir Y\xf6netimi"},{id:"operations",label:"Operasyon Y\xf6netimi"},{id:"sustainability",label:"S\xfcrd\xfcr\xfclebilirlik"}].map((e=>(0,$v.jsx)("option",{value:e.id,children:e.label},e.id)))]})]}),(0,$v.jsxs)("div",{className:"form-group",children:[(0,$v.jsx)("label",{children:"Zorluk Seviyesi:"}),(0,$v.jsxs)("select",{value:e.difficulty,onChange:n=>t({...e,difficulty:Number(n.target.value)}),required:!0,children:[(0,$v.jsx)("option",{value:1,children:"Kolay"}),(0,$v.jsx)("option",{value:2,children:"Orta"}),(0,$v.jsx)("option",{value:3,children:"Zor"})]})]}),(0,$v.jsxs)("div",{className:"options-section",children:[(0,$v.jsx)("h3",{children:"Se\xe7enekler"}),e.options.map(((i,r)=>(0,$v.jsxs)("div",{className:"option-group",children:[(0,$v.jsxs)("label",{children:["Se\xe7enek ",r+1,":"]}),(0,$v.jsx)("input",{type:"text",value:i.text,onChange:n=>{const i=[...e.options];i[r].text=n.target.value,t({...e,options:i})},required:!0}),(0,$v.jsxs)("div",{className:"effects-group",children:[(0,$v.jsx)("h4",{children:"Etki De\u011ferleri:"}),Object.entries(i.effects).map((i=>{let[s,o]=i;return(0,$v.jsxs)("div",{className:"effect-input",children:[(0,$v.jsxs)("label",{children:[n[s],":"]}),(0,$v.jsx)("input",{type:"range",min:"-100",max:"100",value:o,onChange:n=>{const i=[...e.options];i[r].effects[s]=Number(n.target.value),t({...e,options:i})}}),(0,$v.jsx)("span",{children:o})]},s)}))]})]},r))),e.options.length<4&&(0,$v.jsx)("button",{type:"button",onClick:()=>{e.options.length<4&&t({...e,options:[...e.options,{text:"",effects:{revenue:0,customerSatisfaction:0,staffSatisfaction:0,occupancyRate:0,sustainability:0}}]})},className:"add-option-button",children:"Se\xe7enek Ekle"})]}),(0,$v.jsx)("button",{type:"submit",className:"submit-button",children:"Soruyu Kaydet"})]})},qv=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),s={revenue:"Gelir",customerSatisfaction:"M\xfc\u015fteri Memnuniyeti",staffSatisfaction:"Personel Memnuniyeti",occupancyRate:"Doluluk Oran\u0131",sustainability:"S\xfcrd\xfcr\xfclebilirlik"};(0,i.useEffect)((()=>{o().catch((e=>console.error("Sorular y\xfcklenirken bir hata olu\u015ftu:",e)))}),[]);const o=async()=>{try{const e=(await Dv(Ny(Bv,"questions"))).docs.map((e=>({id:e.id,...e.data()})));t(e)}catch(e){console.error("Sorular y\xfcklenirken hata:",e)}finally{r(!1)}};return n?(0,$v.jsx)("div",{className:"loading",children:"Sorular y\xfckleniyor..."}):(0,$v.jsx)("div",{className:"questions-list",children:0===e.length?(0,$v.jsx)("p",{className:"no-questions",children:"Hen\xfcz soru eklenmemi\u015f."}):e.map((n=>(0,$v.jsxs)("div",{className:"question-card",children:[(0,$v.jsxs)("div",{className:"question-header",children:[(0,$v.jsx)("span",{className:`difficulty difficulty-${n.difficulty}`,children:1===n.difficulty?"Kolay":2===n.difficulty?"Orta":"Zor"}),(0,$v.jsx)("span",{className:"department",children:n.department})]}),(0,$v.jsx)("p",{className:"question-text",children:n.text}),(0,$v.jsxs)("div",{className:"options-list",children:[(0,$v.jsx)("h4",{children:"Se\xe7enekler:"}),n.options.map(((e,t)=>(0,$v.jsxs)("div",{className:"option-item",children:[(0,$v.jsx)("p",{children:`${t+1}. ${e.text}`}),(0,$v.jsx)("div",{className:"effects",children:Object.entries(e.effects).map((e=>{let[t,n]=e;return(0,$v.jsxs)("span",{className:"effect-tag",children:[s[t],": ",n]},t)}))})]},t)))]}),(0,$v.jsx)("div",{className:"question-actions",children:(0,$v.jsx)("button",{className:"delete-button",onClick:()=>(async n=>{if(window.confirm("Bu soruyu silmek istedi\u011finizden emin misiniz?"))try{await Lv(Dy(Bv,"questions",n)),t(e.filter((e=>e.id!==n))),alert("Soru ba\u015far\u0131yla silindi!")}catch(i){console.error("Soru silinirken hata:",i),alert("Soru silinirken bir hata olu\u015ftu!")}})(n.id),children:"Sil"})})]},n.id)))})},Kv=()=>{const[e,t]=(0,i.useState)("5_star"),[n,r]=(0,i.useState)({revenue:1e3,customerSatisfaction:70,staffSatisfaction:80,occupancyRate:60,sustainability:75}),s={revenue:"Gelir (x1000\u20ba)",customerSatisfaction:"M\xfc\u015fteri Memnuniyeti (%)",staffSatisfaction:"Personel Memnuniyeti (%)",occupancyRate:"Doluluk Oran\u0131 (%)",sustainability:"S\xfcrd\xfcr\xfclebilirlik (%)"};(0,i.useEffect)((()=>{(async()=>{try{await o()}catch(e){console.error("Metrikler y\xfcklenirken hata:",e)}})()}),[e]);const o=async()=>{const t=Dy(Bv,"hotelMetrics",e),n=await Mv(t);if(n.exists()){const e=n.data();r(e.metrics)}};return(0,$v.jsxs)("div",{className:"metrics-manager",children:[(0,$v.jsxs)("div",{className:"metrics-header",children:[(0,$v.jsx)("h2",{children:"Otel Tipi Metrikleri"}),(0,$v.jsx)("select",{value:e,onChange:e=>t(e.target.value),className:"hotel-type-select",children:[{id:"5_star",label:"5 Y\u0131ld\u0131zl\u0131 Otel"},{id:"boutique",label:"Butik Otel"},{id:"resort",label:"Tatil K\xf6y\xfc"}].map((e=>(0,$v.jsx)("option",{value:e.id,children:e.label},e.id)))})]}),(0,$v.jsx)("div",{className:"metrics-grid",children:Object.entries(n).map((e=>{let[t,i]=e;return(0,$v.jsxs)("div",{className:"metric-item",children:[(0,$v.jsx)("label",{children:s[t]}),(0,$v.jsxs)("div",{className:"metric-input-group",children:[(0,$v.jsx)("input",{type:"range",min:"0",max:"revenue"===t?1e4:100,value:i,onChange:e=>r({...n,[t]:Number(e.target.value)})}),(0,$v.jsx)("input",{type:"number",value:i,onChange:e=>r({...n,[t]:Number(e.target.value)}),min:"0",max:"revenue"===t?1e4:100})]})]},t)}))}),(0,$v.jsx)("button",{onClick:async()=>{try{await Ov(Dy(Bv,"hotelMetrics",e),{type:e,metrics:n}),alert("Metrikler ba\u015far\u0131yla kaydedildi!")}catch(t){console.error("Metrikler kaydedilirken hata:",t),alert("Metrikler kaydedilirken bir hata olu\u015ftu!")}},className:"save-metrics-button",children:"Metrikleri Kaydet"})]})},Gv=()=>{const[e,t]=(0,i.useState)([]);(0,i.useEffect)((()=>{n()}),[]);const n=async()=>{try{const e=Ny(Bv,"hotelMetrics"),n=(await Dv(e)).docs.map((e=>({id:e.id,...e.data()})));t(n)}catch(e){console.error("Oteller y\xfcklenirken hata olu\u015ftu:",e)}};return(0,$v.jsx)("div",{className:"hotel-list-container",children:0===e.length?(0,$v.jsx)("p",{children:"Hi\xe7 otel kayd\u0131 bulunamad\u0131."}):(0,$v.jsxs)("table",{children:[(0,$v.jsx)("thead",{children:(0,$v.jsxs)("tr",{children:[(0,$v.jsx)("th",{children:"Otel Tipi"}),(0,$v.jsx)("th",{children:"Gelir"}),(0,$v.jsx)("th",{children:"M\xfc\u015fteri Memnuniyeti"}),(0,$v.jsx)("th",{children:"Personel Memnuniyeti"}),(0,$v.jsx)("th",{children:"Doluluk Oran\u0131"}),(0,$v.jsx)("th",{children:"S\xfcrd\xfcr\xfclebilirlik"}),(0,$v.jsx)("th",{children:"\u0130\u015flem"})]})}),(0,$v.jsx)("tbody",{children:e.map((e=>(0,$v.jsxs)("tr",{children:[(0,$v.jsx)("td",{children:e.type}),(0,$v.jsx)("td",{children:e.metrics.revenue}),(0,$v.jsx)("td",{children:e.metrics.customerSatisfaction}),(0,$v.jsx)("td",{children:e.metrics.staffSatisfaction}),(0,$v.jsx)("td",{children:e.metrics.occupancyRate}),(0,$v.jsx)("td",{children:e.metrics.sustainability}),(0,$v.jsx)("td",{children:(0,$v.jsx)("button",{onClick:()=>(async e=>{try{await Lv(Dy(Bv,"hotelMetrics",e)),t((t=>t.filter((t=>t.id!==e)))),alert("Otel ba\u015far\u0131yla silindi!")}catch(n){console.error("Otel silinirken hata olu\u015ftu:",n),alert("Otel silinirken bir hata olu\u015ftu!")}})(e.id),children:"Sil"})})]},e.id)))})]})})},Yv=()=>{const e=ee(),[t,n]=(0,i.useState)("questions"),[r,s]=(0,i.useState)(!1);return(0,$v.jsxs)("div",{className:"dashboard-container",children:[(0,$v.jsxs)("div",{className:"sidebar",children:[(0,$v.jsx)("div",{className:"logo",children:"Otel Simulasyon Admin"}),(0,$v.jsxs)("nav",{children:[(0,$v.jsx)("button",{className:"questions"===t?"active":"",onClick:()=>{n("questions"),s(!1)},children:"Soru/Senaryo Y\xf6netimi"}),(0,$v.jsx)("button",{className:"metrics"===t?"active":"",onClick:()=>{n("metrics"),s(!1)},children:"Metrik Y\xf6netimi"})]}),(0,$v.jsx)("button",{className:"logout-button",onClick:async()=>{try{await Vv.signOut(),e("/")}catch(t){console.error("\xc7\u0131k\u0131\u015f yap\u0131l\u0131rken hata olu\u015ftu:",t)}},children:"\xc7\u0131k\u0131\u015f Yap"})]}),(0,$v.jsxs)("div",{className:"main-content",children:["questions"===t&&(0,$v.jsxs)("div",{className:"questions-section",children:[(0,$v.jsxs)("div",{className:"section-header",children:[(0,$v.jsx)("h2",{children:"Soru/Senaryo Y\xf6netimi"}),(0,$v.jsx)("button",{className:"add-button",onClick:()=>s(!r),children:r?"Soru Listesi":"Yeni Soru Ekle"})]}),r?(0,$v.jsx)(Wv,{}):(0,$v.jsx)(qv,{})]}),"metrics"===t&&(0,$v.jsxs)("div",{className:"metrics-section",children:[(0,$v.jsx)("h2",{children:"Metrik Y\xf6netimi"}),(0,$v.jsx)(Kv,{}),(0,$v.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,$v.jsx)("h2",{children:"Kay\u0131tl\u0131 Oteller"}),(0,$v.jsx)(Gv,{})]})]})]})]})},Qv=()=>{const e=ee(),[t,n]=(0,i.useState)(!0),[r,s]=(0,i.useState)({email:"",password:"",name:""}),[o,a]=(0,i.useState)(""),[l,c]=(0,i.useState)(!1);return(0,$v.jsx)("div",{className:"game-login",children:(0,$v.jsxs)("div",{className:"game-login-content",children:[(0,$v.jsxs)("div",{className:"game-info",children:[(0,$v.jsx)("h1",{children:"Otel Y\xf6netim Simulasyonu"}),(0,$v.jsx)("p",{children:"Ger\xe7ek otel senaryolar\u0131yla y\xf6netim deneyimi kazan\u0131n!"}),(0,$v.jsxs)("div",{className:"feature-list",children:[(0,$v.jsxs)("div",{className:"feature-item",children:[(0,$v.jsx)("span",{className:"feature-icon",children:"\ud83c\udfe8"}),(0,$v.jsx)("p",{children:"Farkl\u0131 otel tipleri"})]}),(0,$v.jsxs)("div",{className:"feature-item",children:[(0,$v.jsx)("span",{className:"feature-icon",children:"\ud83c\udfaf"}),(0,$v.jsx)("p",{children:"Ger\xe7ek\xe7i senaryolar"})]}),(0,$v.jsxs)("div",{className:"feature-item",children:[(0,$v.jsx)("span",{className:"feature-icon",children:"\ud83d\udcc8"}),(0,$v.jsx)("p",{children:"Performans takibi"})]})]})]}),(0,$v.jsxs)("div",{className:"game-login-form",children:[(0,$v.jsx)("h2",{children:t?"Oyuna Giri\u015f":"Yeni Kay\u0131t"}),(0,$v.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),a(""),c(!0);try{t?await Hr(Vv,r.email,r.password):await async function(e,t,n){var i;const r=pr(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const e=await hr(r,s,"signUpPassword");o=Pr(r,e)}else o=Pr(r,s).catch((async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await hr(r,s,"signUpPassword");return Pr(r,e)}return Promise.reject(e)}));const a=await o.catch((e=>Promise.reject(e))),l=await Lr._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}(Vv,r.email,r.password),e("/game-setup")}catch(o){a(t?"Giri\u015f ba\u015far\u0131s\u0131z!":"Kay\u0131t ba\u015far\u0131s\u0131z!")}finally{c(!1)}},children:[!t&&(0,$v.jsxs)("div",{className:"form-group",children:[(0,$v.jsx)("label",{children:"\u0130sim Soyisim"}),(0,$v.jsx)("input",{type:"text",value:r.name,onChange:e=>s({...r,name:e.target.value}),required:!0})]}),(0,$v.jsxs)("div",{className:"form-group",children:[(0,$v.jsx)("label",{children:"E-posta"}),(0,$v.jsx)("input",{type:"email",value:r.email,onChange:e=>s({...r,email:e.target.value}),required:!0})]}),(0,$v.jsxs)("div",{className:"form-group",children:[(0,$v.jsx)("label",{children:"\u015eifre"}),(0,$v.jsx)("input",{type:"password",value:r.password,onChange:e=>s({...r,password:e.target.value}),required:!0})]}),o&&(0,$v.jsx)("div",{className:"error-message",children:o}),(0,$v.jsx)("button",{type:"submit",disabled:l,children:l?"\u0130\u015flem yap\u0131l\u0131yor...":t?"Giri\u015f Yap":"Kay\u0131t Ol"})]}),(0,$v.jsx)("button",{className:"toggle-form",onClick:()=>n(!t),children:t?"Yeni hesap olu\u015ftur":"Giri\u015f yap"})]})]})})},Xv=async e=>{try{const t=Dy(Bv,"users",e),n=await Mv(t);return n.exists()?n.data():null}catch(t){throw console.error("Kullan\u0131c\u0131 verisi getirme hatas\u0131:",t),t}},Jv=()=>{const e=ee(),[t,n]=(0,i.useState)(""),[r,s]=(0,i.useState)(""),[o,a]=(0,i.useState)(!1);return console.log("\ud83d\udccc localStorage 'gameSetup' i\xe7eri\u011fi:",localStorage.getItem("gameSetup")),(0,$v.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)",padding:"40px 20px"},children:(0,$v.jsxs)("div",{style:{maxWidth:"1000px",margin:"0 auto",background:"rgba(255, 255, 255, 0.95)",borderRadius:"20px",padding:"40px",boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},children:[(0,$v.jsx)("h1",{style:{color:"#1e3c72",textAlign:"center",fontSize:"2.5em",marginBottom:"40px",textShadow:"2px 2px 4px rgba(0,0,0,0.1)"},children:"Otel Y\xf6netim Simulasyonu"}),(0,$v.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,$v.jsx)("h2",{style:{color:"#2a5298",marginBottom:"20px",fontSize:"1.8em"},children:"Otel Tipini Se\xe7in"}),(0,$v.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px"},children:[{id:"5_star",name:"5 Y\u0131ld\u0131zl\u0131 Otel",icon:"\ud83c\udfe8",description:"L\xfcks hizmet, tam donan\u0131ml\u0131 tesisler"},{id:"boutique",name:"Butik Otel",icon:"\ud83c\udff0",description:"\xd6zel konsept, ki\u015fiselle\u015ftirilmi\u015f deneyim"},{id:"resort",name:"Tatil K\xf6y\xfc",icon:"\ud83c\udf34",description:"Geni\u015f aktivite yelpazesi, e\u011flence merkezi"}].map((e=>(0,$v.jsxs)("div",{onClick:()=>n(e.id),style:{padding:"25px",borderRadius:"15px",background:t===e.id?"linear-gradient(135deg, #2193b0, #6dd5ed)":"white",color:t===e.id?"white":"#333",cursor:"pointer",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",transform:t===e.id?"translateY(-5px)":"none",transition:"all 0.3s ease",border:"2px solid transparent",borderColor:t===e.id?"#fff":"transparent"},children:[(0,$v.jsx)("div",{style:{fontSize:"40px",marginBottom:"15px"},children:e.icon}),(0,$v.jsx)("h3",{style:{marginBottom:"10px",fontSize:"1.3em"},children:e.name}),(0,$v.jsx)("p",{style:{opacity:.9},children:e.description})]},e.id)))})]}),(0,$v.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,$v.jsx)("h2",{style:{color:"#2a5298",marginBottom:"20px",fontSize:"1.8em"},children:"Rol\xfcn\xfcz\xfc Se\xe7in"}),(0,$v.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[{id:"reservation",name:"Rezervasyon M\xfcd\xfcr\xfc",icon:"\ud83d\udcc5",description:"Doluluk oran\u0131n\u0131 optimize edin"},{id:"customer_relations",name:"M\xfc\u015fteri \u0130li\u015fkileri Y\xf6neticisi",icon:"\ud83e\udd1d",description:"Misafir memnuniyetini en \xfcst d\xfczeye \xe7\u0131kar\u0131n"},{id:"operations",name:"Operasyon M\xfcd\xfcr\xfc",icon:"\u2699\ufe0f",description:"G\xfcnl\xfck operasyonlar\u0131 y\xf6netin"},{id:"financial",name:"Gelir Y\xf6neticisi",icon:"\ud83d\udcb0",description:"Karl\u0131l\u0131\u011f\u0131 maksimize edin"},{id:"hr",name:"Personel M\xfcd\xfcr\xfc",icon:"\ud83d\udc65",description:"Ekip performans\u0131n\u0131 art\u0131r\u0131n"}].map((e=>(0,$v.jsxs)("div",{onClick:()=>s(e.id),style:{padding:"20px",borderRadius:"15px",background:r===e.id?"linear-gradient(135deg, #2193b0, #6dd5ed)":"white",color:r===e.id?"white":"#333",cursor:"pointer",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",transform:r===e.id?"translateY(-5px)":"none",transition:"all 0.3s ease",border:"2px solid transparent",borderColor:r===e.id?"#fff":"transparent"},children:[(0,$v.jsx)("div",{style:{fontSize:"30px",marginBottom:"10px"},children:e.icon}),(0,$v.jsx)("h3",{style:{marginBottom:"8px",fontSize:"1.2em"},children:e.name}),(0,$v.jsx)("p",{style:{fontSize:"0.9em",opacity:.9},children:e.description})]},e.id)))})]}),(0,$v.jsx)("button",{onClick:async()=>{if(t&&r&&Vv.currentUser){a(!0);try{const n=Dy(Bv,"hotelMetrics",t),i=await Mv(n),s=i.exists()?i.data().metrics:{revenue:50,customerSatisfaction:50,staffSatisfaction:50,occupancyRate:50,sustainability:50};await(async(e,t)=>{try{const n=Dy(Bv,"users",e);await Ov(n,{...t,createdAt:Zu.now(),lastLoginDate:Zu.now()})}catch(n){throw console.error("Kullan\u0131c\u0131 olu\u015fturma hatas\u0131:",n),n}})(Vv.currentUser.uid,{email:Vv.currentUser.email||"",name:Vv.currentUser.displayName||"",currentRole:r,hotelType:t,currentDay:1,completedScenarios:0,metrics:s,achievements:[]}),localStorage.setItem("gameSetup",JSON.stringify({hotelType:t,role:r})),e("/game-dashboard")}catch(n){console.error("Oyun ba\u015flatma hatas\u0131:",n),alert("Oyun ba\u015flat\u0131l\u0131rken bir hata olu\u015ftu!")}finally{a(!1)}}},disabled:!t||!r||o,style:{width:"100%",padding:"20px",fontSize:"1.2em",borderRadius:"12px",border:"none",background:t&&r&&!o?"linear-gradient(135deg, #1e3c72, #2a5298)":"#cccccc",color:"white",cursor:t&&r&&!o?"pointer":"not-allowed",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0,0,0,0.2)",transform:t&&r?"translateY(0)":"none"},children:o?"\u23f3 Oyun Ba\u015flat\u0131l\u0131yor...":t&&r?"\ud83c\udfae Oyuna Ba\u015fla":"L\xfctfen se\xe7imlerinizi tamamlay\u0131n"})]})})};function Zv(e){return e+.5|0}const eb=(e,t,n)=>Math.max(Math.min(e,n),t);function tb(e){return eb(Zv(2.55*e),0,255)}function nb(e){return eb(Zv(255*e),0,255)}function ib(e){return eb(Zv(e/2.55)/100,0,1)}function rb(e){return eb(Zv(100*e),0,100)}const sb={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ob=[..."0123456789ABCDEF"],ab=e=>ob[15&e],lb=e=>ob[(240&e)>>4]+ob[15&e],cb=e=>(240&e)>>4===(15&e);function ub(e){var t=(e=>cb(e.r)&&cb(e.g)&&cb(e.b)&&cb(e.a))(e)?ab:lb;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const hb=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function db(e,t,n){const i=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function fb(e,t,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function pb(e,t,n){const i=db(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function gb(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),s=Math.min(t,n,i),o=(r+s)/2;let a,l,c;return r!==s&&(c=r-s,l=o>.5?c/(2-r-s):c/(r+s),a=function(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}(t,n,i,c,r),a=60*a+.5),[0|a,l||0,o]}function mb(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(nb)}function yb(e,t,n){return mb(db,e,t,n)}function vb(e){return(e%360+360)%360}function bb(e){const t=hb.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?tb(+t[5]):nb(+t[5]));const r=vb(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return mb(pb,e,t,n)}(r,s,o):"hsv"===t[1]?function(e,t,n){return mb(fb,e,t,n)}(r,s,o):yb(r,s,o),{r:n[0],g:n[1],b:n[2],a:i}}const wb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},_b={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let xb;function kb(e){xb||(xb=function(){const e={},t=Object.keys(_b),n=Object.keys(wb);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,wb[s]);s=parseInt(_b[o],16),e[a]=[s>>16&255,s>>8&255,255&s]}return e}(),xb.transparent=[0,0,0,0]);const t=xb[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Sb=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Eb=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Tb=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Ib(e,t,n){if(e){let i=gb(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=yb(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Cb(e,t){return e?Object.assign(t||{},e):e}function Ab(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=nb(e[3]))):(t=Cb(e,{r:0,g:0,b:0,a:1})).a=nb(t.a),t}function Rb(e){return"r"===e.charAt(0)?function(e){const t=Sb.exec(e);let n,i,r,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?tb(e):eb(255*e,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?tb(n):eb(n,0,255)),i=255&(t[4]?tb(i):eb(i,0,255)),r=255&(t[6]?tb(r):eb(r,0,255)),{r:n,g:i,b:r,a:s}}}(e):bb(e)}class Mb{constructor(e){if(e instanceof Mb)return e;const t=typeof e;let n;"object"===t?n=Ab(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*sb[e[1]],g:255&17*sb[e[2]],b:255&17*sb[e[3]],a:5===n?17*sb[e[4]]:255}:7!==n&&9!==n||(t={r:sb[e[1]]<<4|sb[e[2]],g:sb[e[3]]<<4|sb[e[4]],b:sb[e[5]]<<4|sb[e[6]],a:9===n?sb[e[7]]<<4|sb[e[8]]:255})),t}(e)||kb(e)||Rb(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Cb(this._rgb);return e&&(e.a=ib(e.a)),e}set rgb(e){this._rgb=Ab(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${ib(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}(this._rgb):void 0}hexString(){return this._valid?ub(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=gb(e),n=t[0],i=rb(t[1]),r=rb(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${r}%, ${ib(e.a)})`:`hsl(${n}, ${i}%, ${r}%)`}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const s=t===r?.5:t,o=2*s-1,a=n.a-i.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=Tb(ib(e.r)),r=Tb(ib(e.g)),s=Tb(ib(e.b));return{r:nb(Eb(i+n*(Tb(ib(t.r))-i))),g:nb(Eb(r+n*(Tb(ib(t.g))-r))),b:nb(Eb(s+n*(Tb(ib(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Mb(this.rgb)}alpha(e){return this._rgb.a=nb(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Zv(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ib(this._rgb,2,e),this}darken(e){return Ib(this._rgb,2,-e),this}saturate(e){return Ib(this._rgb,1,e),this}desaturate(e){return Ib(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=gb(e);n[0]=vb(n[0]+t),n=yb(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function Nb(){}const Db=(()=>{let e=0;return()=>e++})();function Ob(e){return null===e||void 0===e}function Pb(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Lb(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Fb(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function jb(e,t){return Fb(e)?e:t}function zb(e,t){return"undefined"===typeof e?t:e}const Ub=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Vb(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Bb(e,t,n,i){let r,s,o;if(Pb(e))if(s=e.length,i)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(Lb(e))for(o=Object.keys(e),s=o.length,r=0;r<s;r++)t.call(n,e[o[r]],o[r])}function $b(e,t){let n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Hb(e){if(Pb(e))return e.map(Hb);if(Lb(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=Hb(e[n[r]]);return t}return e}function Wb(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function qb(e,t,n,i){if(!Wb(e))return;const r=t[e],s=n[e];Lb(r)&&Lb(s)?Kb(r,s,i):t[e]=Hb(s)}function Kb(e,t,n){const i=Pb(t)?t:[t],r=i.length;if(!Lb(e))return e;const s=(n=n||{}).merger||qb;let o;for(let a=0;a<r;++a){if(o=i[a],!Lb(o))continue;const t=Object.keys(o);for(let i=0,r=t.length;i<r;++i)s(t[i],e,o,n)}return e}function Gb(e,t){return Kb(e,t,{merger:Yb})}function Yb(e,t,n){if(!Wb(e))return;const i=t[e],r=n[e];Lb(i)&&Lb(r)?Gb(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Hb(r))}const Qb={"":e=>e,x:e=>e.x,y:e=>e.y};function Xb(e,t){const n=Qb[t]||(Qb[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Jb(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Zb=e=>"undefined"!==typeof e,ew=e=>"function"===typeof e,tw=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const nw=Math.PI,iw=2*nw,rw=Number.POSITIVE_INFINITY,sw=nw/180,ow=nw/2,aw=nw/4,lw=2*nw/3,cw=Math.log10,uw=Math.sign;function hw(e,t,n){return Math.abs(e-t)<n}function dw(e){const t=Math.round(e);e=hw(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(cw(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function fw(e){return!isNaN(parseFloat(e))&&isFinite(e)}function pw(e,t,n){let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function gw(e){return e*(nw/180)}function mw(e){return e*(180/nw)}function yw(e){if(!Fb(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function vw(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*nw&&(s+=iw),{angle:s,distance:r}}function bw(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ww(e){return(e%iw+iw)%iw}function _w(e,t,n,i){const r=ww(e),s=ww(t),o=ww(n),a=ww(s-r),l=ww(o-r),c=ww(r-s),u=ww(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function xw(e,t,n){return Math.max(t,Math.min(n,e))}function kw(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function Sw(e,t,n){n=n||(n=>e[n]<t);let i,r=e.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Ew=(e,t,n,i)=>Sw(e,n,i?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),Tw=(e,t,n)=>Sw(e,n,(i=>e[i][t]>=n));const Iw=["push","pop","shift","splice","unshift"];function Cw(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(Iw.forEach((t=>{delete e[t]})),delete e._chartjs)}function Aw(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Rw="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Mw(e,t){let n=[],i=!1;return function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];n=s,i||(i=!0,Rw.call(window,(()=>{i=!1,e.apply(t,n)})))}}const Nw=e=>"start"===e?"left":"end"===e?"right":"center",Dw=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;const Ow=e=>0===e||1===e,Pw=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*iw/n),Lw=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*iw/n)+1,Fw={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*ow),easeOutSine:e=>Math.sin(e*ow),easeInOutSine:e=>-.5*(Math.cos(nw*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Ow(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Ow(e)?e:Pw(e,.075,.3),easeOutElastic:e=>Ow(e)?e:Lw(e,.075,.3),easeInOutElastic(e){const t=.1125;return Ow(e)?e:e<.5?.5*Pw(2*e,t,.45):.5+.5*Lw(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Fw.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*Fw.easeInBounce(2*e):.5*Fw.easeOutBounce(2*e-1)+.5};function jw(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function zw(e){return jw(e)?e:new Mb(e)}function Uw(e){return jw(e)?e:new Mb(e).saturate(.5).darken(.1).hexString()}const Vw=["x","y","borderWidth","radius","tension"],Bw=["color","borderColor","backgroundColor"];const $w=new Map;function Hw(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=$w.get(n);return i||(i=new Intl.NumberFormat(e,t),$w.set(n,i)),i}(t,n).format(e)}const Ww={values:e=>Pb(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let r,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const o=cw(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Hw(e,i,l)},logarithmic(e,t,n){if(0===e)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(cw(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?Ww.numeric.call(this,e,t,n):""}};var qw={formatters:Ww};const Kw=Object.create(null),Gw=Object.create(null);function Yw(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function Qw(e,t,n){return"string"===typeof t?Kb(Yw(e,t),n):Kb(Yw(e,""),t)}class Xw{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Uw(t.backgroundColor),this.hoverBorderColor=(e,t)=>Uw(t.borderColor),this.hoverColor=(e,t)=>Uw(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Qw(this,e,t)}get(e){return Yw(this,e)}describe(e,t){return Qw(Gw,e,t)}override(e,t){return Qw(Kw,e,t)}route(e,t,n,i){const r=Yw(this,e),s=Yw(this,n),o="_"+t;Object.defineProperties(r,{[o]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=s[i];return Lb(e)?Object.assign({},t,e):zb(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach((e=>e(this)))}}var Jw=new Xw({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Bw},numbers:{type:"number",properties:Vw}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:qw.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Zw(e,t,n,i,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function e_(e,t,n){const i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function t_(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function n_(e,t,n,i){i_(e,t,n,i,null)}function i_(e,t,n,i,r){let s,o,a,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*sw;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,i),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:r?e.ellipse(n,i,r/2,g,0,0,iw):e.arc(n,i,g,0,iw),e.closePath();break;case"triangle":u=r?r/2:g,e.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=lw,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=lw,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,o=Math.cos(m+aw)*l,h=Math.cos(m+aw)*(r?r/2-c:l),a=Math.sin(m+aw)*l,d=Math.sin(m+aw)*(r?r/2-c:l),e.arc(n-h,i-a,c,m-nw,m-ow),e.arc(n+d,i-o,c,m-ow,m),e.arc(n+h,i+a,c,m,m+ow),e.arc(n-d,i+o,c,m+ow,m+nw),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=r?r/2:l,e.rect(n-u,i-l,2*u,2*l);break}m+=aw;case"rectRot":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+d,i-o),e.lineTo(n+h,i+a),e.lineTo(n-d,i+o),e.closePath();break;case"crossRot":m+=aw;case"cross":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o);break;case"star":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o),m+=aw,h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o);break;case"line":o=r?r/2:Math.cos(m)*g,a=Math.sin(m)*g,e.moveTo(n-o,i-a),e.lineTo(n+o,i+a);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function r_(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function s_(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function o_(e){e.restore()}function a_(e,t,n,i,r){if(r.strikethrough||r.underline){const s=e.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function l_(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function c_(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=Pb(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ob(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&l_(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),Ob(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,i,s.maxWidth)),e.fillText(c,n,i,s.maxWidth),a_(e,n,i,c,s),i+=Number(r.lineHeight);e.restore()}function u_(e,t){const{x:n,y:i,w:r,h:s,radius:o}=t;e.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*nw,nw,!0),e.lineTo(n,i+s-o.bottomLeft),e.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,nw,ow,!0),e.lineTo(n+r-o.bottomRight,i+s),e.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,ow,0,!0),e.lineTo(n+r,i+o.topRight),e.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-ow,!0),e.lineTo(n+o.topLeft,i)}const h_=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,d_=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function f_(e,t){const n=(""+e).match(h_);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const p_=e=>+e||0;function g_(e,t){const n={},i=Lb(t),r=i?Object.keys(t):t,s=Lb(e)?i?n=>zb(e[n],e[t[n]]):t=>e[t]:()=>e;for(const o of r)n[o]=p_(s(o));return n}function m_(e){return g_(e,{top:"y",right:"x",bottom:"y",left:"x"})}function y_(e){return g_(e,["topLeft","topRight","bottomLeft","bottomRight"])}function v_(e){const t=m_(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function b_(e,t){e=e||{},t=t||Jw.font;let n=zb(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=zb(e.style,t.style);i&&!(""+i).match(d_)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:zb(e.family,t.family),lineHeight:f_(zb(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:zb(e.weight,t.weight),string:""};return r.string=function(e){return!e||Ob(e.size)||Ob(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function w_(e,t,n,i){let r,s,o,a=!0;for(r=0,s=e.length;r<s;++r)if(o=e[r],void 0!==o&&(void 0!==t&&"function"===typeof o&&(o=o(t),a=!1),void 0!==n&&Pb(o)&&(o=o[n%o.length],a=!1),void 0!==o))return i&&!a&&(i.cacheable=!1),o}function __(e,t){return Object.assign(Object.create(e),t)}function x_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=D_("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>x_([i,...e],t,r,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>I_(n,i,(()=>function(e,t,n,i){let r;for(const s of t)if(r=D_(E_(s,e),n),"undefined"!==typeof r)return T_(e,r)?M_(n,i,e,r):r}(i,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>O_(e).includes(t),ownKeys:e=>O_(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function k_(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:S_(e,i),setContext:t=>k_(e,t,n,i),override:r=>k_(e.override(r),t,n,i)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>I_(e,t,(()=>function(e,t,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=e;let a=i[t];ew(a)&&o.isScriptable(t)&&(a=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(s,o||i);a.delete(e),T_(e,l)&&(l=M_(r._scopes,r,e,l));return l}(t,a,e,n));Pb(a)&&a.length&&(a=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&i(e))return t[s.index%t.length];if(Lb(t[0])){const n=t,i=r._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=M_(i,r,e,l);t.push(k_(n,s,o&&o[e],a))}}return t}(t,a,e,o.isIndexable));T_(t,a)&&(a=k_(a,r,s&&s[t],o));return a}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function S_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:ew(n)?n:()=>n,isIndexable:ew(i)?i:()=>i}}const E_=(e,t)=>e?e+Jb(t):t,T_=(e,t)=>Lb(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function I_(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const i=n();return e[t]=i,i}function C_(e,t,n){return ew(e)?e(t,n):e}const A_=(e,t)=>!0===e?t:"string"===typeof e?Xb(t,e):void 0;function R_(e,t,n,i,r){for(const s of t){const t=A_(n,s);if(t){e.add(t);const s=C_(t._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===t&&"undefined"!==typeof i&&n!==i)return null}return!1}function M_(e,t,n,i){const r=t._rootScopes,s=C_(t._fallback,n,i),o=[...e,...r],a=new Set;a.add(i);let l=N_(a,o,n,s||n,i);return null!==l&&(("undefined"===typeof s||s===n||(l=N_(a,o,s,l,i),null!==l))&&x_(Array.from(a),[""],r,s,(()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];if(Pb(r)&&Lb(n))return n;return r||{}}(t,n,i))))}function N_(e,t,n,i,r){for(;n;)n=R_(e,t,n,i,r);return n}function D_(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function O_(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}Number.EPSILON;function P_(){return"undefined"!==typeof window&&"undefined"!==typeof document}function L_(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function F_(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const j_=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const z_=["top","right","bottom","left"];function U_(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=z_[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function V_(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=j_(n),s="border-box"===r.boxSizing,o=U_(r,"padding"),a=U_(r,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=i;let o,a,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(r,s,e.target))o=r,a=s;else{const e=t.getBoundingClientRect();o=i.clientX-e.left,a=i.clientY-e.top,l=!0}return{x:o,y:a,box:l}}(e,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=t;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}const B_=e=>Math.round(10*e)/10;function $_(e,t,n,i){const r=j_(e),s=U_(r,"margin"),o=F_(r.maxWidth,e,"clientWidth")||rw,a=F_(r.maxHeight,e,"clientHeight")||rw,l=function(e,t,n){let i,r;if(void 0===t||void 0===n){const s=e&&L_(e);if(s){const e=s.getBoundingClientRect(),o=j_(s),a=U_(o,"border","width"),l=U_(o,"padding");t=e.width-l.width-a.width,n=e.height-l.height-a.height,i=F_(o.maxWidth,s,"clientWidth"),r=F_(o.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||rw,maxHeight:r||rw}}(e,t,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=U_(r,"border","width"),t=U_(r,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=B_(Math.min(c,o,l.maxWidth)),u=B_(Math.min(u,a,l.maxHeight)),c&&!u&&(u=B_(c/2));return(void 0!==t||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=B_(Math.floor(u*i))),{width:c,height:u}}function H_(e,t,n){const i=t||1,r=Math.floor(e.height*i),s=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(e.currentDevicePixelRatio=i,o.height=r,o.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0)}const W_=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};P_()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(jS){}return e}();function q_(e,t){const n=function(e,t){return j_(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function K_(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function G_(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function Y_(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}class Q_{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],s=t.duration;r.forEach((i=>i({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=Rw.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,o=r.length-1,a=!1;for(;o>=0;--o)s=r[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var X_=new Q_;const J_="transparent",Z_={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=zw(e||J_),r=i.valid&&zw(t||J_);return r&&r.valid?r.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class ex{constructor(e,t,n,i){const r=t[n];i=w_([e.to,i,r,e.from]);const s=w_([e.from,r,i]);this._active=!0,this._fn=e.fn||Z_[e.type||typeof s],this._easing=Fw[e.easing]||Fw.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=w_([e.to,t,i,e.from]),this._from=w_([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,o=this._to;let a;if(this._active=r!==o&&(s||t<n),!this._active)return this._target[i]=o,void this._notify(!0);t<0?this._target[i]=r:(a=t/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(r,o,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class tx{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Lb(e))return;const t=Object.keys(Jw.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((i=>{const r=e[i];if(!Lb(r))return;const s={};for(const e of t)s[e]=r[e];(Pb(r.properties)&&r.properties||[i]).forEach((e=>{e!==i&&n.has(e)||n.set(e,s)}))}))}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const t=e[i[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const c=t[l];let u=r[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,o);continue}u.cancel()}h&&h.duration?(r[l]=u=new ex(h,e,l,c),i.push(u)):e[l]=c}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(X_.add(this._chart,n),!0):void 0}}function nx(e,t){const n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:i?s:r,end:i?r:s}}function ix(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function rx(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,s="single"===i.mode;let o,a,l,c;if(null===t)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,i.all)continue;break}c=e.values[l],Fb(c)&&(s||0===t||uw(t)===uw(c))&&(t+=c)}return u||i.all?t:0}function sx(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function ox(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function ax(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function lx(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=function(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}(s,o,i),h=t.length;let d;for(let f=0;f<h;++f){const e=t[f],{[l]:n,[c]:s}=e;d=(e._stacks||(e._stacks={}))[c]=ox(r,u,n),d[a]=s,d._top=ax(d,o,!0,i.type),d._bottom=ax(d,o,!1,i.type);(d._visualValues||(d._visualValues={}))[a]=s}}function cx(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function ux(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n],void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[n]&&delete t[i]._visualValues[n]}}}const hx=e=>"reset"===e||"none"===e,dx=(e,t)=>t?e:Object.assign({},e);class fx{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=sx(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ux(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,r=t.xAxisID=zb(n.xAxisID,cx(e,"x")),s=t.yAxisID=zb(n.yAxisID,cx(e,"y")),o=t.rAxisID=zb(n.rAxisID,cx(e,"r")),a=t.indexAxis,l=t.iAxisID=i(a,r,s,o),c=t.vAxisID=i(a,s,r,o);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Cw(this._data,this),e._stacked&&ux(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Lb(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:i}=t,r="x"===n.axis?"x":"y",s="x"===i.axis?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:e[u]};return a}(t,e)}else if(n!==t){if(n){Cw(n,this);const e=this._cachedMeta;ux(e),e._parsed=[]}t&&Object.isExtensible(t)&&(r=this,(i=t)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),Iw.forEach((e=>{const t="_onData"+Jb(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];const o=n.apply(this,r);return i._chartjs.listeners.forEach((e=>{"function"===typeof e[t]&&e[t](...r)})),o}})})))),this._syncList=[],this._data=t}var i,r}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=sx(t.vScale,t),t.stack!==n.stack&&(i=!0,ux(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&(lx(this,t._parsed),t._stacked=sx(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,o=r.axis;let a,l,c,u=0===e&&t===i.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=Pb(i[e])?this.parseArrayData(n,i,e,t):Lb(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const r=()=>null===l[o]||h&&l[o]<h[o];for(a=0;a<t;++a)n._parsed[a+e]=l=c[a],u&&(r()&&(u=!1),h=l);n._sorted=u}s&&lx(this,c)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:s}=e,o=r.axis,a=s.axis,l=r.getLabels(),c=r===s,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[o]:c||r.parse(l[f],f),[a]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,i){const{xScale:r,yScale:s}=e,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=t[c],o[a]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return o}parseObjectData(e,t,n,i){const{xScale:r,yScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=t[h],l[c]={x:r.parse(Xb(d,o),h),y:s.parse(Xb(d,a),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,s=t[e.axis];return rx({keys:ix(i,!0),values:t._stacks[e.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let s=null===r?NaN:r;const o=i&&n._stacks[t.axis];i&&o&&(i.values=o,s=rx(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,s=i.length,o=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:ix(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(o);let h,d;function f(){d=i[h];const t=d[o.axis];return!Fb(d[e.axis])||c>t||u<t}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,e,d,a),!r));++h);if(r)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,e,d,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i][e.axis],Fb(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,r;return Lb(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}(zb(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=nx(e,n),r=nx(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||i.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,o,a),c=o;c<o+a;++c){const t=i[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,r))}for(c=0;c<s.length;++c)s[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return __(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return __(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,r=this._cachedDataOpts,s=e+"-"+t,o=r[s],a=this.enableOptionSharing&&Zb(n);if(o)return dx(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=i?[`${e}Hover`,"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(Jw.elements[e]),f=l.resolveNamedOptions(h,d,(()=>this.getContext(n,i,t)),u);return f.$shared&&(f.$shared=a,r[s]=Object.freeze(dx(f,a))),f}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,s=`animation-${t}`,o=r[s];if(o)return o;let a;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,t),s=i.getOptionScopes(this.getDataset(),r);a=i.createResolver(s,this.getContext(e,n,t))}const l=new tx(i,a&&a.animations);return a&&a._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||hx(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:s}}updateElement(e,t,n,i){hx(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!hx(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const i=n.length,r=t.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=e+t;let o;const a=e=>{for(e.length+=t,o=e.length-1;o>=s;o--)e[o]=e[o-t]};for(a(r),o=e;o<s;++o)r[o]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&ux(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class px extends fx{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map(((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,o=e=>+n[e];if(Lb(n[e])){const{key:e="value"}=this._parsing;o=t=>+Xb(n[t],e)}for(r=e,s=e+t;r<s;++r)i._parsed[r]=o(r)}}_getRotation(){return gw(this.options.rotation-90)}_getCircumference(){return gw(this.options.circumference)}_getRotationExtents(){let e=iw,t=-iw;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(e,t,n){let i=1,r=1,s=0,o=0;if(t<iw){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(e,t,i)=>_w(e,a,l,!0)?1:Math.max(t,t*n,i,i*n),p=(e,t,i)=>_w(e,a,l,!0)?-1:Math.min(t,t*n,i,i*n),g=f(0,c,h),m=f(ow,u,d),y=p(nw,c,h),v=p(nw+ow,u,d);i=(g-y)/2,r=(m-v)/2,s=-(g+y)/2,o=-(m+v)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(d,h,a),y=(n.width-s)/f,v=(n.height-s)/p,b=Math.max(Math.min(y,v)/2,0),w=Ub(this.options.radius,b),_=(w-Math.max(w*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=m*w,i.total=this.calculateTotal(),this.outerRadius=w-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*u,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/iw)}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,u=r&&a.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,i);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,r);for(g=t;g<t+n;++g){const t=this._circumference(g,r),n=e[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":i)),m+=t,this.updateElement(n,g,s,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?iw*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Hw(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,r,s,o,a;if(!e)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),e=s.data,o=s.controller;break}if(!e)return 0;for(i=0,r=e.length;i<r;++i)a=o.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(zb(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}function gx(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class mx{static override(e){Object.assign(mx.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return gx()}parse(){return gx()}format(){return gx()}add(){return gx()}diff(){return gx()}startOf(){return gx()}endOf(){return gx()}}var yx=mx;function vx(e,t,n,i){const{controller:r,data:s,_sorted:o}=e,a=r._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&o&&s.length){const e=a._reversePixels?Tw:Ew;if(!i)return e(s,t,n);if(r._sharedOptions){const i=s[0],r="function"===typeof i.getRange&&i.getRange(t);if(r){const i=e(s,t,n-r),o=e(s,t,n+r);return{lo:i.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}function bx(e,t,n,i,r){const s=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=s.length;a<l;++a){const{index:e,data:n}=s[a],{lo:l,hi:c}=vx(s[a],t,o,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||i(r,e,t)}}}function wx(e,t,n,i,r){const s=[];if(!r&&!e.isPointInArea(t))return s;return bx(e,n,t,(function(n,o,a){(r||r_(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&s.push({element:n,datasetIndex:o,index:a})}),!0),s}function _x(e,t,n,i,r,s){let o=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const r=t?Math.abs(e.x-i.x):0,s=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return bx(e,n,t,(function(n,c,u){const h=n.inRange(t.x,t.y,r);if(i&&!h)return;const d=n.getCenterPoint(r);if(!(!!s||e.isPointInArea(d))&&!h)return;const f=a(t,d);f<l?(o=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:u})})),o}function xx(e,t,n,i,r,s){return s||e.isPointInArea(t)?"r"!==n||i?_x(e,t,n,i,r,s):function(e,t,n,i){let r=[];return bx(e,n,t,(function(e,n,s){const{startAngle:o,endAngle:a}=e.getProps(["startAngle","endAngle"],i),{angle:l}=vw(e,{x:t.x,y:t.y});_w(l,o,a)&&r.push({element:e,datasetIndex:n,index:s})})),r}(e,t,n,r):[]}function kx(e,t,n,i,r){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return bx(e,n,t,((e,i,l)=>{e[o]&&e[o](t[n],r)&&(s.push({element:e,datasetIndex:i,index:l}),a=a||e.inRange(t.x,t.y,r))})),i&&!a?[]:s}var Sx={evaluateInteractionItems:bx,modes:{index(e,t,n,i){const r=V_(t,e),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?wx(e,r,s,i,o):xx(e,r,s,!1,i,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,i){const r=V_(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?wx(e,r,s,i,o):xx(e,r,s,!1,i,o);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,i)=>wx(e,V_(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const r=V_(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return xx(e,r,s,n.intersect,i,o)},x:(e,t,n,i)=>kx(e,V_(t,e),"x",n.intersect,i),y:(e,t,n,i)=>kx(e,V_(t,e),"y",n.intersect,i)}};const Ex=["left","top","right","bottom"];function Tx(e,t){return e.filter((e=>e.pos===t))}function Ix(e,t){return e.filter((e=>-1===Ex.indexOf(e.pos)&&e.box.axis===t))}function Cx(e,t){return e.sort(((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function Ax(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:r}=n;if(!e||!Ex.includes(i))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=e.length;s<o;++s){a=e[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*i:o&&t.availableWidth,a.height=r):(a.width=i,a.height=c?c*r:o&&t.availableHeight)}return n}function Rx(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function Mx(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Nx(e,t,n,i){const{pos:r,box:s}=n,o=e.maxPadding;if(!Lb(r)){n.size&&(e[r]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[r]+=n.size}s.getPadding&&Mx(o,s.getPadding());const a=Math.max(0,t.outerWidth-Rx(o,e,"left","right")),l=Math.max(0,t.outerHeight-Rx(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Dx(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{i[e]=Math.max(t[e],n[e])})),i}return i(e?["left","right"]:["top","bottom"])}function Ox(e,t,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=e.length,c=0;s<o;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,Dx(a.horizontal,t));const{same:o,other:h}=Nx(t,n,a,i);c|=o&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&Ox(r,t,n,i)||u}function Px(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function Lx(e,t,n,i){const r=n.padding;let{x:s,y:o}=t;for(const a of e){const e=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const i=t.w*c,s=l.size||e.height;Zb(l.start)&&(o=l.start),e.fullSize?Px(e,r.left,o,n.outerWidth-r.right-r.left,s):Px(e,t.left+l.placed,o,i,s),l.start=o,l.placed+=i,o=e.bottom}else{const i=t.h*c,o=l.size||e.width;Zb(l.start)&&(s=l.start),e.fullSize?Px(e,s,r.top,o,n.outerHeight-r.bottom-r.top):Px(e,s,t.top+l.placed,o,i),l.start=s,l.placed+=i,s=e.right}}t.x=s,t.y=o}var Fx={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=v_(e.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(n-r.height,0),a=function(e){const t=function(e){const t=[];let n,i,r,s,o,a;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],({position:s,options:{stack:o,stackWeight:a=1}}=r),t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}(e),n=Cx(t.filter((e=>e.box.fullSize)),!0),i=Cx(Tx(t,"left"),!0),r=Cx(Tx(t,"right")),s=Cx(Tx(t,"top"),!0),o=Cx(Tx(t,"bottom")),a=Ix(t,"x"),l=Ix(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Tx(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;Bb(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);Mx(d,v_(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),p=Ax(l.concat(c),h);Ox(a.fullSize,f,h,p),Ox(l,f,h,p),Ox(c,f,h,p)&&Ox(l,f,h,p),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),Lx(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,Lx(a.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Bb(a.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class jx{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class zx extends jx{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ux="$chartjs",Vx={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Bx=e=>null===e||""===e;const $x=!!W_&&{passive:!0};function Hx(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,$x)}function Wx(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function qx(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Wx(n.addedNodes,i),t=t&&!Wx(n.removedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function Kx(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Wx(n.removedNodes,i),t=t&&!Wx(n.addedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const Gx=new Map;let Yx=0;function Qx(){const e=window.devicePixelRatio;e!==Yx&&(Yx=e,Gx.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function Xx(e,t,n){const i=e.canvas,r=i&&L_(i);if(!r)return;const s=Mw(((e,t)=>{const i=r.clientWidth;n(e,t),i<r.clientWidth&&n()}),window),o=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||s(n,i)}));return o.observe(r),function(e,t){Gx.size||window.addEventListener("resize",Qx),Gx.set(e,t)}(e,s),o}function Jx(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){Gx.delete(e),Gx.size||window.removeEventListener("resize",Qx)}(e)}function Zx(e,t,n){const i=e.canvas,r=Mw((t=>{null!==e.ctx&&n(function(e,t){const n=Vx[e.type]||e.type,{x:i,y:r}=V_(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==r?r:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,$x)}(i,t,r),r}class ek extends jx{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[Ux]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Bx(r)){const t=q_(e,"width");void 0!==t&&(e.width=t)}if(Bx(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=q_(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[Ux])return!1;const n=t[Ux].initial;["height","width"].forEach((e=>{const i=n[e];Ob(i)?t.removeAttribute(e):t.setAttribute(e,i)}));const i=n.style||{};return Object.keys(i).forEach((e=>{t.style[e]=i[e]})),t.width=t.width,delete t[Ux],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),r={attach:qx,detach:Kx,resize:Xx}[t]||Zx;i[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:Jx,detach:Jx,resize:Jx}[t]||Hx)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return $_(e,t,n,i)}isAttached(e){const t=e&&L_(e);return!(!t||!t.isConnected)}}class tk{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return fw(this.x)&&fw(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach((e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),i}}function nk(e,t){const n=e.options.ticks,i=function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return function(e,t,n,i){let r,s=0,o=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===o&&(t.push(e[r]),s++,o=n[s*i])}(t,c,s,o/r),c;const u=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),r=t.length/n;if(!i)return Math.max(r,1);const s=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(i);for(let o=0,a=s.length-1;o<a;o++){const e=s[o];if(e>r)return e}return Math.max(r,1)}(s,t,r);if(o>0){let e,n;const i=o>1?Math.round((l-a)/(o-1)):null;for(ik(t,c,u,Ob(i)?0:a-i,a),e=0,n=o-1;e<n;e++)ik(t,c,u,s[e],s[e+1]);return ik(t,c,u,l,Ob(i)?t.length:l+i),c}return ik(t,c,u),c}function ik(e,t,n,i,r){const s=zb(i,0),o=Math.min(zb(r,e.length),e.length);let a,l,c,u=0;for(n=Math.ceil(n),r&&(a=r-i,n=a/Math.floor(a/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<o;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}const rk=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,sk=(e,t)=>Math.min(t||e,e);function ok(e,t){const n=[],i=e.length/t,r=e.length;let s=0;for(;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function ak(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),s=e._startPixel,o=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<s-a||c>o+a)))return c}function lk(e){return e.drawTicks?e.tickLength:0}function ck(e,t){if(!e.display)return 0;const n=b_(e.font,t),i=v_(e.padding);return(Pb(e.text)?e.text.length:1)*n.lineHeight+i.height}function uk(e,t,n){let i=Nw(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class hk extends tk{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=jb(e,Number.POSITIVE_INFINITY),t=jb(t,Number.NEGATIVE_INFINITY),n=jb(n,Number.POSITIVE_INFINITY),i=jb(i,Number.NEGATIVE_INFINITY),{min:jb(e,n),max:jb(t,i),minDefined:Fb(e),maxDefined:Fb(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)t=o[a].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),s||(i=Math.max(i,t.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:jb(n,jb(i,n)),max:jb(i,jb(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Vb(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:r}=e,s=Ub(t,(r-i)/2),o=(e,t)=>n&&0===e?0:e+t;return{min:o(i,-Math.abs(s)),max:o(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?ok(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=nk(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Vb(this.options.afterUpdate,[this])}beforeSetDimensions(){Vb(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Vb(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Vb(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Vb(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=Vb(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){Vb(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Vb(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=sk(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let s,o,a,l=i;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=xw(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(e.offset?.5:1)),o=this.maxHeight-lk(e.grid)-t.padding-ck(e.title,this.chart.options.font),a=Math.sqrt(u*u+h*h),l=mw(Math.min(Math.asin(xw((c.highest.height+6)/s,-1,1)),Math.asin(xw(o/a,-1,1))-Math.asin(xw(h/a,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){Vb(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Vb(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=ck(i,t.options.font);if(o?(e.width=this.maxWidth,e.height=lk(r)+s):(e.height=this.maxHeight,e.width=lk(r)+s),n.display&&this.ticks.length){const{first:t,last:i,widest:r,highest:s}=this._getLabelSizes(),a=2*n.padding,l=gw(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const t=n.mirror?0:u*r.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:c*r.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,i,u,c)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;a?l?(u=i*e.width,h=n*t.height):(u=n*e.height,h=i*t.width):"start"===r?h=t.width:"end"===r?u=e.width:"inner"!==r&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,i=e.height/2;"start"===r?(n=0,i=e.height):"end"===r&&(n=t.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Vb(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)Ob(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=ok(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:r}=this,s=[],o=[],a=Math.floor(t/sk(t,n));let l,c,u,h,d,f,p,g,m,y,v,b=0,w=0;for(l=0;l<t;l+=a){if(h=e[l].label,d=this._resolveTickFontOptions(l),i.font=f=d.string,p=r[f]=r[f]||{data:{},gc:[]},g=d.lineHeight,m=y=0,Ob(h)||Pb(h)){if(Pb(h))for(c=0,u=h.length;c<u;++c)v=h[c],Ob(v)||Pb(v)||(m=Zw(i,p.data,p.gc,m,v),y+=g)}else m=Zw(i,p.data,p.gc,m,h),y=g;s.push(m),o.push(y),b=Math.max(m,b),w=Math.max(y,w)}!function(e,t){Bb(e,(e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}}))}(r,t);const _=s.indexOf(b),x=o.indexOf(w),k=e=>({width:s[e]||0,height:o[e]||0});return{first:k(0),last:k(t-1),widest:k(_),highest:k(x),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return xw(this._alignToPixels?e_(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return __(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=__(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=gw(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,o=r?r.widest.width+s:0,a=r?r.highest.height+s:0;return this.isHorizontal()?a*n>o*i?o/n:a/i:a*i<o*n?a/n:o/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:o}=i,a=r.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=lk(r),h=[],d=o.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(e){return e_(n,e,f)};let m,y,v,b,w,_,x,k,S,E,T,I;if("top"===s)m=g(this.bottom),_=this.bottom-u,k=m-p,E=g(e.top)+p,I=e.bottom;else if("bottom"===s)m=g(this.top),E=e.top,I=g(e.bottom)-p,_=m+p,k=this.top+u;else if("left"===s)m=g(this.right),w=this.right-u,x=m-p,S=g(e.left)+p,T=e.right;else if("right"===s)m=g(this.left),S=e.left,T=g(e.right)-p,w=m+p,x=this.left+u;else if("x"===t){if("center"===s)m=g((e.top+e.bottom)/2+.5);else if(Lb(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}E=e.top,I=e.bottom,_=m+p,k=_+u}else if("y"===t){if("center"===s)m=g((e.left+e.right)/2);else if(Lb(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}w=m-p,x=w-u,S=e.left,T=e.right}const C=zb(i.ticks.maxTicksLimit,c),A=Math.max(1,Math.ceil(c/C));for(y=0;y<c;y+=A){const e=this.getContext(y),t=r.setContext(e),i=o.setContext(e),s=t.lineWidth,c=t.color,u=i.dash||[],d=i.dashOffset,f=t.tickWidth,p=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;v=ak(this,y,a),void 0!==v&&(b=e_(n,v,s),l?w=x=S=T=b:_=k=E=I=b,h.push({tx1:w,ty1:_,tx2:x,ty2:k,x1:S,y1:E,x2:T,y2:I,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=r,h=lk(n.grid),d=h+c,f=u?-c:d,p=-gw(this.labelRotation),g=[];let m,y,v,b,w,_,x,k,S,E,T,I,C="middle";if("top"===i)_=this.bottom-f,x=this._getXAxisLabelAlignment();else if("bottom"===i)_=this.top+f,x=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(h);x=e.textAlign,w=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(h);x=e.textAlign,w=e.x}else if("x"===t){if("center"===i)_=(e.top+e.bottom)/2+d;else if(Lb(i)){const e=Object.keys(i)[0],t=i[e];_=this.chart.scales[e].getPixelForValue(t)+d}x=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)w=(e.left+e.right)/2-d;else if(Lb(i)){const e=Object.keys(i)[0],t=i[e];w=this.chart.scales[e].getPixelForValue(t)}x=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===a?C="top":"end"===a&&(C="bottom"));const A=this._getLabelSizes();for(m=0,y=o.length;m<y;++m){v=o[m],b=v.label;const e=r.setContext(this.getContext(m));k=this.getPixelForTick(m)+r.labelOffset,S=this._resolveTickFontOptions(m),E=S.lineHeight,T=Pb(b)?b.length:1;const t=T/2,n=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let h,d=x;if(s?(w=k,"inner"===x&&(d=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),I="top"===i?"near"===l||0!==p?-T*E+E/2:"center"===l?-A.highest.height/2-t*E+E:-A.highest.height+E/2:"near"===l||0!==p?E/2:"center"===l?A.highest.height/2-t*E:A.highest.height-T*E,u&&(I*=-1),0===p||e.showLabelBackdrop||(w+=E/2*Math.sin(p))):(_=k,I=(1-T)*E/2),e.showLabelBackdrop){const t=v_(e.backdropPadding),n=A.heights[m],i=A.widths[m];let r=I-t.top,s=0-t.left;switch(C){case"middle":r-=n/2;break;case"bottom":r-=n}switch(x){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":m===y-1?s-=i:m>0&&(s-=i/2)}h={left:s,top:r,width:i+t.width,height:n+t.height,color:e.backdropColor}}g.push({label:b,font:S,textOffset:I,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:d,textBaseline:C,translation:[w,_],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-gw(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=e+r,o=this._getLabelSizes().widest.width;let a,l;return"left"===t?i?(l=this.right+r,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===t?i?(l=this.left+r,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,s;const o=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,s=i.length;r<s;++r){const e=i[r];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=e_(e,this.left,s)-s/2,c=e_(e,this.right,o)+o/2,u=h=a):(u=e_(e,this.top,s)-s/2,h=e_(e,this.bottom,o)+o/2,l=c=a),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&s_(t,n);const i=this.getLabelItems(e);for(const r of i){const e=r.options,n=r.font;c_(t,r.label,0,r.textOffset,n,e)}n&&o_(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=b_(n.font),s=v_(n.padding),o=n.align;let a=r.lineHeight/2;"bottom"===t||"center"===t||Lb(t)?(a+=s.bottom,Pb(n.text)&&(a+=r.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,f,p=0;const g=o-r,m=a-s;if(e.isHorizontal()){if(d=Dw(i,s,a),Lb(n)){const e=Object.keys(n)[0],i=n[e];f=u[e].getPixelForValue(i)+g-t}else f="center"===n?(c.bottom+c.top)/2+g-t:rk(e,n,t);h=a-s}else{if(Lb(n)){const e=Object.keys(n)[0],i=n[e];d=u[e].getPixelForValue(i)-m+t}else d="center"===n?(c.left+c.right)/2-m+t:rk(e,n,t);f=Dw(i,o,r),p="left"===n?-ow:ow}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,a,t,o);c_(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:h,textAlign:uk(o,t,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=zb(e.grid&&e.grid.z,-1),i=zb(e.border&&e.border.z,0);return this._isVisible()&&this.draw===hk.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];s[n]!==this.id||e&&s.type!==e||i.push(s)}return i}_resolveTickFontOptions(e){return b_(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class dk{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){const i=Kb(Object.create(null),[n?Jw.get(n):{},Jw.get(t),e.defaults]);Jw.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");Jw.route(s,r,l,a)}))}(t,e.defaultRoutes);e.descriptors&&Jw.describe(t,e.descriptors)}(e,s,n),this.override&&Jw.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in Jw[i]&&(delete Jw[i][n],this.override&&delete Kw[n])}}class fk{constructor(){this.controllers=new dk(fx,"datasets",!0),this.elements=new dk(tk,"elements"),this.plugins=new dk(Object,"plugins"),this.scales=new dk(hk,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):Bb(t,(t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)}))}))}_exec(e,t,n){const i=Jb(e);Vb(n["before"+i],[],n),t[e](n),Vb(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var pk=new fk;class gk{constructor(){this._init=[]}notify(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,i){i=i||{};for(const r of e){const e=r.plugin;if(!1===Vb(e[n],[t,i,r.options],e)&&i.cancelable)return!1}return!0}invalidate(){Ob(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=zb(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],i=Object.keys(pk.plugins.items);for(let s=0;s<i.length;s++)n.push(pk.getPlugin(i[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const e=r[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:r,localIds:s}=t;const o=[],a=e.getContext();for(const l of r){const t=l.id,r=mk(n[t],i);null!==r&&o.push({plugin:l,options:yk(e.config,{plugin:l,local:s[t]},r,a)})}return o}(e,r,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function mk(e,t){return t||!1!==e?!0===e?{}:e:null}function yk(e,t,n,i){let{plugin:r,local:s}=t;const o=e.pluginScopeKeys(r),a=e.getOptionScopes(n,o);return s&&r.defaults&&a.push(r.defaults),e.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function vk(e,t){const n=Jw.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function bk(e){if("x"===e||"y"===e||"r"===e)return e}function wk(e){if(bk(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const s of n){const t=s.axis||("top"===(r=s.position)||"bottom"===r?"x":"left"===r||"right"===r?"y":void 0)||e.length>1&&bk(e[0].toLowerCase());if(t)return t}var r;throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function _k(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function xk(e,t){const n=Kw[e.type]||{scales:{}},i=t.scales||{},r=vk(e.type,t),s=Object.create(null);return Object.keys(i).forEach((t=>{const o=i[t];if(!Lb(o))return console.error(`Invalid scale configuration for scale: ${t}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const a=wk(t,o,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return _k(e,"x",n[0])||_k(e,"y",n[0])}return{}}(t,e),Jw.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(a,r),c=n.scales||{};s[t]=Gb(Object.create(null),[{axis:a},o,c[a],c[l]])})),e.data.datasets.forEach((n=>{const r=n.type||e.type,o=n.indexAxis||vk(r,t),a=(Kw[r]||{}).scales||{};Object.keys(a).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),r=n[t+"AxisID"]||t;s[r]=s[r]||Object.create(null),Gb(s[r],[{axis:t},i[r],a[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];Gb(t,[Jw.scales[t.type],Jw.scale])})),s}function kk(e){const t=e.options||(e.options={});t.plugins=zb(t.plugins,{}),t.scales=xk(e,t)}function Sk(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Ek=new Map,Tk=new Set;function Ik(e,t){let n=Ek.get(e);return n||(n=t(),Ek.set(e,n),Tk.add(n)),n}const Ck=(e,t,n)=>{const i=Xb(t,n);void 0!==i&&e.add(i)};class Ak{constructor(e){this._config=function(e){return(e=e||{}).data=Sk(e.data),kk(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Sk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),kk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ik(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,t){return Ik(`${e}.transition.${t}`,(()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,t){return Ik(`${e}-${t}`,(()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]]))}pluginScopeKeys(e){const t=e.id;return Ik(`${this.type}-plugin-${t}`,(()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,s=this._cachedScopes(e,n),o=s.get(t);if(o)return o;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>Ck(a,e,t)))),t.forEach((e=>Ck(a,i,e))),t.forEach((e=>Ck(a,Kw[r]||{},e))),t.forEach((e=>Ck(a,Jw,e))),t.forEach((e=>Ck(a,Gw,e)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),Tk.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Kw[t]||{},Jw.datasets[t]||{},{type:t},Jw,Gw]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:o}=Rk(this._resolverCache,e,i);let a=s;if(function(e,t){const{isScriptable:n,isIndexable:i}=S_(e);for(const r of t){const t=n(r),s=i(r),o=(s||t)&&e[r];if(t&&(ew(o)||Mk(o))||s&&Pb(o))return!0}return!1}(s,t)){r.$shared=!1;a=k_(s,n=ew(n)?n():n,this.createResolver(e,n,o))}for(const l of t)r[l]=a[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=Rk(this._resolverCache,e,n);return Lb(t)?k_(r,t,void 0,i):r}}function Rk(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:x_(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},i.set(r,s)}return s}const Mk=e=>Lb(e)&&Object.getOwnPropertyNames(e).some((t=>ew(e[t])));const Nk=["top","bottom","left","right","chartArea"];function Dk(e,t){return"top"===e||"bottom"===e||-1===Nk.indexOf(e)&&"x"===t}function Ok(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function Pk(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Vb(n&&n.onComplete,[e],t)}function Lk(e){const t=e.chart,n=t.options.animation;Vb(n&&n.onProgress,[e],t)}function Fk(e){return P_()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const jk={},zk=e=>{const t=Fk(e);return Object.values(jk).filter((e=>e.canvas===t)).pop()};function Uk(e,t,n){const i=Object.keys(e);for(const r of i){const i=+r;if(i>=t){const s=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=s)}}}function Vk(e,t,n){return e.options.clip?e[n]:t[n]}class Bk{static defaults=(()=>Jw)();static instances=(()=>jk)();static overrides=(()=>Kw)();static registry=(()=>pk)();static version="4.4.7";static getChart=(()=>zk)();static register(){pk.add(...arguments),$k()}static unregister(){pk.remove(...arguments),$k()}constructor(e,t){const n=this.config=new Ak(t),i=Fk(e),r=zk(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!P_()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?zx:ek}(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=Db(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new gk,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],jk[this.id]=this,o&&a?(X_.listen(this,"complete",Pk),X_.listen(this,"progress",Lk),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return Ob(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return pk}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():H_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return t_(this.canvas,this.ctx),this}stop(){return X_.stop(this),this}resize(e,t){X_.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,t,r),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,H_(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Vb(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){Bb(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let r=[];t&&(r=r.concat(Object.keys(t).map((e=>{const n=t[e],i=wk(e,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}})))),Bb(r,(t=>{const r=t.options,s=r.id,o=wk(s,r),a=zb(r.type,t.dtype);void 0!==r.position&&Dk(r.position,o)===Dk(t.dposition)||(r.position=t.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(pk.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)})),Bb(i,((e,t)=>{e||delete n[t]})),Bb(n,(e=>{Fx.configure(this,e,e.options),Fx.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Ok("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||vk(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=pk.getController(s),{datasetElementType:i,dataElementType:o}=Jw.datasets[s];Object.assign(t,{dataElementType:pk.getElement(o),datasetElementType:i&&pk.getElement(i)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){Bb(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||Bb(r,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Ok("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Bb(this.scales,(e=>{Fx.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);tw(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){Uk(e,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),i=n(0);for(let r=1;r<t;r++)if(!tw(i,n(r)))return;return Array.from(i).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Fx.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Bb(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,ew(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(X_.has(this)?this.attached&&!X_.running(this)&&X_.start(this):(this.draw(),Pk({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const r=t[i];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,i=!n.disabled,r=function(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:Vk(n,t,"left"),right:Vk(n,t,"right"),top:Vk(i,t,"top"),bottom:Vk(i,t,"bottom")}:t}(e,this.chartArea),s={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(i&&s_(t,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),e.controller.draw(),i&&o_(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return r_(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=Sx.modes[t];return"function"===typeof r?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter((e=>e&&e._dataset===t)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=__(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,i);Zb(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(r,{visible:n}),this.update((t=>t.datasetIndex===e?i:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),X_.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),t_(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete jk[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Bb(this.options.events,(e=>n(e,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():s()}unbindEvents(){Bb(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},Bb(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,s,o,a;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,a=e.length;o<a;++o){s=e[o];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}));!$b(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=r(t,e),o=n?e:r(e,t);s.length&&this.updateHoverStyle(s,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,s=t,o=this._getActiveElements(e,i,n,s),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,Vb(r.onHover,[e,o,this],this),a&&Vb(r.onClick,[e,o,this],this));const c=!$b(o,i);return(c||t)&&(this._active=o,this._updateHoverStyles(o,i,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}function $k(){return Bb(Bk.instances,(e=>e._plugins.invalidate()))}function Hk(e,t,n,i){const r=g_(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,o=Math.min(s,i*t/2),a=e=>{const t=(n-Math.min(s,e))*i/2;return xw(e,0,Math.min(s,t))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:xw(r.innerStart,0,o),innerEnd:xw(r.innerEnd,0,o)}}function Wk(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function qk(e,t,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const e=((u>0?u-i:0)+(h>0?h-i:0))/2;f=(p-(0!==e?p*e/(e+i):p))/2}const g=(p-Math.max(.001,p*h-n/nw)/h)/2,m=l+g+f,y=r-g-f,{outerStart:v,outerEnd:b,innerStart:w,innerEnd:_}=Hk(t,d,h,y-m),x=h-v,k=h-b,S=m+v/x,E=y-b/k,T=d+w,I=d+_,C=m+w/T,A=y-_/I;if(e.beginPath(),s){const t=(S+E)/2;if(e.arc(o,a,h,S,t),e.arc(o,a,h,t,E),b>0){const t=Wk(k,E,o,a);e.arc(t.x,t.y,b,E,y+ow)}const n=Wk(I,y,o,a);if(e.lineTo(n.x,n.y),_>0){const t=Wk(I,A,o,a);e.arc(t.x,t.y,_,y+ow,A+Math.PI)}const i=(y-_/d+(m+w/d))/2;if(e.arc(o,a,d,y-_/d,i,!0),e.arc(o,a,d,i,m+w/d,!0),w>0){const t=Wk(T,C,o,a);e.arc(t.x,t.y,w,C+Math.PI,m-ow)}const r=Wk(x,m,o,a);if(e.lineTo(r.x,r.y),v>0){const t=Wk(x,S,o,a);e.arc(t.x,t.y,v,m-ow,S)}}else{e.moveTo(o,a);const t=Math.cos(S)*h+o,n=Math.sin(S)*h+a;e.lineTo(t,n);const i=Math.cos(E)*h+o,r=Math.sin(E)*h+a;e.lineTo(i,r)}e.closePath()}function Kk(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,f?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(s){qk(e,t,n,i,p,r);for(let t=0;t<s;++t)e.stroke();isNaN(a)||(p=o+(a%iw||iw))}f&&function(e,t,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=r/a;e.beginPath(),e.arc(s,o,a,i-c,n+c),l>r?(c=r/l,e.arc(s,o,l,n+c,i-c,!0)):e.arc(s,o,r,n+ow,i-ow),e.closePath(),e.clip()}(e,t,p),s||(qk(e,t,n,i,p,r),e.stroke())}class Gk extends tk{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=vw(i,{x:e,y:t}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=zb(u,a-o),f=_w(r,o,a)&&o!==a,p=d>=iw||f,g=kw(s,l+h,c+h);return p&&g}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(i+r)/2,u=(s+o+l+a)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>iw?Math.floor(n/iw):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*i,Math.sin(o)*i);const a=i*(1-Math.sin(Math.min(nw,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){qk(e,t,n,i,l,r);for(let t=0;t<s;++t)e.fill();isNaN(a)||(l=o+(a%iw||iw))}qk(e,t,n,i,l,r),e.fill()}(e,this,a,r,s),Kk(e,this,a,r,s),e.restore()}}const Yk=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}};class Qk extends tk{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Vb(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,i=b_(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=Yk(n,r);let l,c;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,o,a)+10):(c=this.maxHeight,l=this._fitCols(s,i,o,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+o;let u=e;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach(((e,f)=>{const p=n+t/2+r.measureText(e.text).width;(0===f||l[l.length-1]+p+2*o>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),a[f]={left:0,top:d,row:h,width:p,height:i},l[l.length-1]+=p+o})),u}_fitCols(e,t,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=o,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((e,s)=>{const{itemWidth:g,itemHeight:m}=function(e,t,n,i,r){const s=function(e,t,n,i){let r=e.text;r&&"string"!==typeof r&&(r=r.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+i.measureText(r).width}(i,e,t,n),o=function(e,t,n){let i=e;"string"!==typeof t.text&&(i=Xk(t,n));return i}(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}(n,t,r,e,i);s>0&&d+m+2*o>c&&(u+=h+o,l.push({width:h,height:d}),f+=h+o,p++,h=d=0),a[s]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+o})),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:r}}=this,s=K_(r,this.left,this.width);if(this.isHorizontal()){let r=0,o=Dw(n,this.left+i,this.right-this.lineWidths[r]);for(const a of t)r!==a.row&&(r=a.row,o=Dw(n,this.left+i,this.right-this.lineWidths[r])),a.top+=this.top+e+i,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+i}else{let r=0,o=Dw(n,this.top+e+i,this.bottom-this.columnSizes[r].height);for(const a of t)a.col!==r&&(r=a.col,o=Dw(n,this.top+e+i,this.bottom-this.columnSizes[r].height)),a.top=o,a.left+=this.left+i,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;s_(e,this),this._draw(),o_(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:r,labels:s}=e,o=Jw.color,a=K_(e.rtl,this.left,this.width),l=b_(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),i.textAlign=a.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=Yk(s,u),m=this.isHorizontal(),y=this._computeTitleHeight();d=m?{x:Dw(r,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:Dw(r,this.top+y+c,this.bottom-t[0].height),line:0},G_(this.ctx,e.textDirection);const v=g+c;this.legendItems.forEach(((b,w)=>{i.strokeStyle=b.fontColor,i.fillStyle=b.fontColor;const _=i.measureText(b.text).width,x=a.textAlign(b.textAlign||(b.textAlign=s.textAlign)),k=f+h+_;let S=d.x,E=d.y;a.setWidth(this.width),m?w>0&&S+k+c>this.right&&(E=d.y+=v,d.line++,S=d.x=Dw(r,this.left+c,this.right-n[d.line])):w>0&&E+v>this.bottom&&(S=d.x=S+t[d.line].width+c,d.line++,E=d.y=Dw(r,this.top+y+c,this.bottom-t[d.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const r=zb(n.lineWidth,1);if(i.fillStyle=zb(n.fillStyle,o),i.lineCap=zb(n.lineCap,"butt"),i.lineDashOffset=zb(n.lineDashOffset,0),i.lineJoin=zb(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=zb(n.strokeStyle,o),i.setLineDash(zb(n.lineDash,[])),s.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=a.xPlus(e,f/2);i_(i,o,l,t+h,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),o=a.leftForLtr(e,f),l=y_(n.borderRadius);i.beginPath(),Object.values(l).some((e=>0!==e))?u_(i,{x:o,y:s,w:f,h:p,radius:l}):i.rect(o,s,f,p),i.fill(),0!==r&&i.stroke()}i.restore()}(a.x(S),E,b),S=((e,t,n,i)=>e===(i?"left":"right")?n:"center"===e?(t+n)/2:t)(x,S+f+h,m?S+k:this.right,e.rtl),function(e,t,n){c_(i,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(S),E,b),m)d.x+=k+c;else if("string"!==typeof b.text){const e=l.lineHeight;d.y+=Xk(b,e)+c}else d.y+=v})),Y_(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=b_(t.font),i=v_(t.padding);if(!t.display)return;const r=K_(e.rtl,this.left,this.width),s=this.ctx,o=t.position,a=n.size/2,l=i.top+a;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=Dw(e.align,u,this.right-h);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+Dw(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=Dw(o,u,u+h);s.textAlign=r.textAlign(Nw(o)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,c_(s,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=b_(e.font),n=v_(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,r;if(kw(e,this.left,this.right)&&kw(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],kw(e,i.left,i.left+i.width)&&kw(t,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,r=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(i,n);i&&!r&&Vb(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!r&&Vb(t.onHover,[e,n,this],this)}else n&&Vb(t.onClick,[e,n,this],this)}}function Xk(e,t){return t*(e.text?e.text.length:0)}var Jk={id:"legend",_element:Qk,start(e,t,n){const i=e.legend=new Qk({ctx:e.ctx,options:n,chart:e});Fx.configure(e,i,n),Fx.addBox(e,i)},stop(e){Fx.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Fx.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=v_(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};new WeakMap;const Zk={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i.add(e.x),r+=e.y,++s}}if(0===s||0===i.size)return!1;const o=[...i].reduce(((e,t)=>e+t))/i.size;return{x:o,y:r/s}},nearest(e,t){if(!e.length)return!1;let n,i,r,s=t.x,o=t.y,a=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=bw(t,i.getCenterPoint());e<a&&(a=e,r=i)}}if(r){const e=r.tooltipPosition();s=e.x,o=e.y}return{x:s,y:o}}};function eS(e,t){return t&&(Pb(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function tS(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function nS(e,t){const{element:n,datasetIndex:i,index:r}=t,s=e.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:e,label:o,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function iS(e,t){const n=e.chart.ctx,{body:i,footer:r,title:s}=e,{boxWidth:o,boxHeight:a}=t,l=b_(t.bodyFont),c=b_(t.titleFont),u=b_(t.footerFont),h=s.length,d=r.length,f=i.length,p=v_(t.padding);let g=p.height,m=0,y=i.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(y+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),y){g+=f*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let v=0;const b=function(e){m=Math.max(m,n.measureText(e).width+v)};return n.save(),n.font=c.string,Bb(e.title,b),n.font=l.string,Bb(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?o+2+t.boxPadding:0,Bb(i,(e=>{Bb(e.before,b),Bb(e.lines,b),Bb(e.after,b)})),v=0,n.font=u.string,Bb(e.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function rS(e,t,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return"center"===i?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),function(e,t,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;return"left"===e&&r+s+o>t.width||"right"===e&&r-s-o<0||void 0}(c,e,t,n)&&(c="center"),c}function sS(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||rS(e,t,n,i),yAlign:i}}function oS(e,t,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=y_(o);let p=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,a);const g=function(e,t,n){let{y:i,height:r}=e;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,d)+r:"right"===a&&(p+=Math.max(h,f)+r),{x:xw(p,0,i.width-t.width),y:xw(g,0,i.height-t.height)}}function aS(e,t,n){const i=v_(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function lS(e){return eS([],tS(e))}function cS(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const uS={beforeTitle:Nb,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Nb,beforeBody:Nb,beforeLabel:Nb,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Ob(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Nb,afterBody:Nb,beforeFooter:Nb,footer:Nb,afterFooter:Nb};function hS(e,t,n,i){const r=e[t].call(n,i);return"undefined"===typeof r?uS[t].call(n,i):r}class dS extends tk{static positioners=(()=>Zk)();constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new tx(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,__(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=hS(n,"beforeTitle",this,e),r=hS(n,"title",this,e),s=hS(n,"afterTitle",this,e);let o=[];return o=eS(o,tS(i)),o=eS(o,tS(r)),o=eS(o,tS(s)),o}getBeforeBody(e,t){return lS(hS(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return Bb(e,(e=>{const t={before:[],lines:[],after:[]},r=cS(n,e);eS(t.before,tS(hS(r,"beforeLabel",this,e))),eS(t.lines,hS(r,"label",this,e)),eS(t.after,tS(hS(r,"afterLabel",this,e))),i.push(t)})),i}getAfterBody(e,t){return lS(hS(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=hS(n,"beforeFooter",this,e),r=hS(n,"footer",this,e),s=hS(n,"afterFooter",this,e);let o=[];return o=eS(o,tS(i)),o=eS(o,tS(r)),o=eS(o,tS(s)),o}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],s=[];let o,a,l=[];for(o=0,a=t.length;o<a;++o)l.push(nS(this.chart,t[o]));return e.filter&&(l=l.filter(((t,i,r)=>e.filter(t,i,r,n)))),e.itemSort&&(l=l.sort(((t,i)=>e.itemSort(t,i,n)))),Bb(l,(t=>{const n=cS(e.callbacks,t);i.push(hS(n,"labelColor",this,t)),r.push(hS(n,"labelPointStyle",this,t)),s.push(hS(n,"labelTextColor",this,t))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const e=Zk[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=iS(this,n),o=Object.assign({},e,t),a=sS(this.chart,n,o),l=oS(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=y_(o),{x:h,y:d}=e,{width:f,height:p}=t;let g,m,y,v,b,w;return"center"===r?(b=d+p/2,"left"===i?(g=h,m=g-s,v=b+s,w=b-s):(g=h+f,m=g+s,v=b-s,w=b+s),y=g):(m="left"===i?h+Math.max(a,c)+s:"right"===i?h+f-Math.max(l,u)-s:this.caretX,"top"===r?(v=d,b=v-s,g=m-s,y=m+s):(v=d+p,b=v+s,g=m+s,y=m-s),w=v),{x1:g,x2:m,x3:y,y1:v,y2:b,y3:w}}drawTitle(e,t,n){const i=this.title,r=i.length;let s,o,a;if(r){const l=K_(n.rtl,this.x,this.width);for(e.x=aS(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=b_(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,a=0;a<r;++a)t.fillText(i[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,a+1===r&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,i,r){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=r,c=b_(r.bodyFont),u=aS(this,"left",r),h=i.x(u),d=a<c.lineHeight?(c.lineHeight-a)/2:0,f=t.y+d;if(r.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=f+a/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,n_(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,n_(e,t,n,c)}else{e.lineWidth=Lb(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=i.leftForLtr(h,l),n=i.leftForLtr(i.xPlus(h,1),l-2),o=y_(s.borderRadius);Object.values(o).some((e=>0!==e))?(e.beginPath(),e.fillStyle=r.multiKeyBackground,u_(e,{x:t,y:f,w:l,h:a,radius:o}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),u_(e,{x:n,y:f+1,w:l-2,h:a-2,radius:o}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=b_(n.bodyFont);let h=u.lineHeight,d=0;const f=K_(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+d),e.y+h/2),e.y+=h+r},g=f.textAlign(s);let m,y,v,b,w,_,x;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=aS(this,g,n),t.fillStyle=n.bodyColor,Bb(this.beforeBody,p),d=o&&"right"!==g?"center"===s?l/2+c:l+2+c:0,b=0,_=i.length;b<_;++b){for(m=i[b],y=this.labelTextColors[b],t.fillStyle=y,Bb(m.before,p),v=m.lines,o&&v.length&&(this._drawColorBox(t,e,b,f,n),h=Math.max(u.lineHeight,a)),w=0,x=v.length;w<x;++w)p(v[w]),h=u.lineHeight;Bb(m.after,p)}d=0,h=u.lineHeight,Bb(this.afterBody,p),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let s,o;if(r){const a=K_(n.rtl,this.x,this.width);for(e.x=aS(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",s=b_(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,o=0;o<r;++o)t.fillText(i[o],a.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:s}=this,{x:o,y:a}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=y_(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(o+u,a),"top"===s&&this.drawCaret(e,t,n,i),t.lineTo(o+l-h,a),t.quadraticCurveTo(o+l,a,o+l,a+h),"center"===s&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(o+l,a+c-f),t.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(e,t,n,i),t.lineTo(o+d,a+c),t.quadraticCurveTo(o,a+c,o,a+c-d),"center"===s&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(o,a+u),t.quadraticCurveTo(o,a,o+u,a),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=Zk[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=iS(this,e),o=Object.assign({},n,this._size),a=sS(t,e,o),l=oS(e,o,a,t);i._to===l.x&&r._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=v_(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),G_(e,t.textDirection),r.y+=s.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),Y_(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}})),r=!$b(n,i),s=this._positionChanged(i,t);(r||s)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(e,r,t,n),o=this._positionChanged(s,e),a=t||!$b(s,r)||o;return a&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,i){const r=this.options;if("mouseout"===e.type)return[];if(!i)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const s=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,s=Zk[r.position].call(this,e,t);return!1!==s&&(n!==s.x||i!==s.y)}}var fS={id:"tooltip",_element:dS,positioners:Zk,afterInit(e,t,n){n&&(e.tooltip=new dS({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:uS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function pS(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}function gS(e,t){const n=[],{bounds:i,step:r,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=r||1,f=c-1,{min:p,max:g}=t,m=!Ob(s),y=!Ob(o),v=!Ob(l),b=(g-p)/(u+1);let w,_,x,k,S=dw((g-p)/f/d)*d;if(S<1e-14&&!m&&!y)return[{value:p},{value:g}];k=Math.ceil(g/S)-Math.floor(p/S),k>f&&(S=dw(k*S/f/d)*d),Ob(a)||(w=Math.pow(10,a),S=Math.ceil(S*w)/w),"ticks"===i?(_=Math.floor(p/S)*S,x=Math.ceil(g/S)*S):(_=p,x=g),m&&y&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((o-s)/r,S/1e3)?(k=Math.round(Math.min((o-s)/S,c)),S=(o-s)/k,_=s,x=o):v?(_=m?s:_,x=y?o:x,k=l-1,S=(x-_)/k):(k=(x-_)/S,k=hw(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const E=Math.max(yw(S),yw(_));w=Math.pow(10,Ob(a)?E:a),_=Math.round(_*w)/w,x=Math.round(x*w)/w;let T=0;for(m&&(h&&_!==s?(n.push({value:s}),_<s&&T++,hw(Math.round((_+T*S)*w)/w,s,mS(s,b,e))&&T++):_<s&&T++);T<k;++T){const e=Math.round((_+T*S)*w)/w;if(y&&e>o)break;n.push({value:e})}return y&&h&&x!==o?n.length&&hw(n[n.length-1].value,o,mS(o,b,e))?n[n.length-1].value=o:n.push({value:o}):y&&x!==o||n.push({value:x}),n}function mS(e,t,n){let{horizontal:i,minRotation:r}=n;const s=gw(r),o=(i?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/o,a)}class yS extends hk{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Ob(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=e=>i=t?i:e,o=e=>r=n?r:e;if(e){const e=uw(i),t=uw(r);e<0&&t<0?o(0):e>0&&t>0&&s(0)}if(i===r){let t=0===r?1:Math.abs(.05*r);o(r+t),e||s(i-t)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=gS({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&pw(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Hw(e,this.chart.options.locale,this.options.ticks.format)}}qw.formatters.numeric;qw.formatters.logarithmic;qw.formatters.numeric;const vS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},bS=Object.keys(vS);function wS(e,t){return e-t}function _S(e,t){if(Ob(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:s}=e._parseOpts;let o=t;return"function"===typeof i&&(o=i(o)),Fb(o)||(o="string"===typeof i?n.parse(o,i):n.parse(o)),null===o?null:(r&&(o="week"!==r||!fw(s)&&!0!==s?n.startOf(o,r):n.startOf(o,"isoWeek",s)),+o)}function xS(e,t,n,i){const r=bS.length;for(let s=bS.indexOf(e);s<r-1;++s){const e=vS[bS[s]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=i)return bS[s]}return bS[r-1]}function kS(e,t,n){if(n){if(n.length){const{lo:i,hi:r}=Sw(n,t);e[n[i]>=t?n[i]:n[r]]=!0}}else e[t]=!0}function SS(e,t,n){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,i){const r=e._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(t[l].major=!0);return t}(e,i,r,n):i}class ES extends hk{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),i=this._adapter=new yx(e.adapters.date);i.init(t),Gb(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:_S(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:o}=this.getUserBounds();function a(e){s||isNaN(e.min)||(i=Math.min(i,e.min)),o||isNaN(e.max)||(r=Math.max(r,e.max))}s&&o||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),i=Fb(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=Fb(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?xS(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(let s=bS.length-1;s>=bS.indexOf(n);s--){const n=bS[s];if(vS[n].common&&e._adapter.diff(r,i,n)>=t-1)return n}return bS[n?bS.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=bS.indexOf(e)+1,n=bS.length;t<n;++t)if(vS[bS[t]].common)return bS[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&s.reverse(),SS(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),i=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;i=xw(i,0,s),r=xw(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||xS(r.minUnit,t,n,this._getLabelCapacity(t)),o=zb(i.ticks.stepSize,1),a="week"===s&&r.isoWeekday,l=fw(a)||!0===a,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",a)),d=+e.startOf(d,l?"day":s),e.diff(n,t,s)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+e.add(u,o,s),h++)kS(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==h||kS(c,u,f),Object.keys(c).sort(wS).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,r=t||n[i];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,i){const r=this.options,s=r.ticks.callback;if(s)return Vb(s,[e,t,n],this);const o=r.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,i||(d?u:c))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=gw(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),s=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*r+o*s,h:n*s+o*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,SS(this,[e],this._majorUnit),i),s=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(_S(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Aw(e.sort(wS))}}const TS="label";function IS(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function CS(e,t){e.labels=t}function AS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TS;const i=[];e.datasets=t.map((t=>{const r=e.datasets.find((e=>e[n]===t[n]));return r&&t.data&&!i.includes(r)?(i.push(r),Object.assign(r,t),r):{...t}}))}function RS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TS;const n={labels:[],datasets:[]};return CS(n,e.labels),AS(n,e.datasets,t),n}function MS(e,t){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:o,type:a,data:l,options:c,plugins:u=[],fallbackContent:h,updateMode:d,...f}=e,p=(0,i.useRef)(null),g=(0,i.useRef)(null),m=()=>{p.current&&(g.current=new Bk(p.current,{type:a,data:RS(l,o),options:c&&{...c},plugins:u}),IS(t,g.current))},y=()=>{IS(t,null),g.current&&(g.current.destroy(),g.current=null)};return(0,i.useEffect)((()=>{!s&&g.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(g.current,c)}),[s,c]),(0,i.useEffect)((()=>{!s&&g.current&&CS(g.current.config.data,l.labels)}),[s,l.labels]),(0,i.useEffect)((()=>{!s&&g.current&&l.datasets&&AS(g.current.config.data,l.datasets,o)}),[s,l.datasets]),(0,i.useEffect)((()=>{g.current&&(s?(y(),setTimeout(m)):g.current.update(d))}),[s,c,l.labels,l.datasets,d]),(0,i.useEffect)((()=>{g.current&&(y(),setTimeout(m))}),[a]),(0,i.useEffect)((()=>(m(),()=>y())),[]),i.createElement("canvas",{ref:p,role:"img",height:n,width:r,...f},h)}const NS=(0,i.forwardRef)(MS);function DS(e,t){return Bk.register(t),(0,i.forwardRef)(((t,n)=>i.createElement(NS,{...t,ref:n,type:e})))}const OS=DS("doughnut",px);Bk.register(Gk,fS,Jk);const PS=()=>{const e=ee(),[t,n]=(0,i.useState)(null),[r,s]=(0,i.useState)(null),[o,a]=(0,i.useState)(!1),[l,c]=(0,i.useState)(null),[u,h]=(0,i.useState)([]),[d,f]=(0,i.useState)(0),[p,g]=(0,i.useState)([]),[m,y]=(0,i.useState)(!0),[v,b]=(0,i.useState)(null),w=async()=>{if(t&&t.role){console.log("\ud83d\udd0d Senaryolar \xe7ekiliyor... Departman:",t.role);try{const e=mv(Ny(Bv,"questions"),vv("department","==",t.role)),n=await Dv(e);if(n.empty)return console.warn("\u274c Bu role ait senaryo bulunamad\u0131:",t.role),void h([]);let i=n.docs.map((e=>{var t;const n=e.data();return{id:e.id,text:n.text||"Senaryo metni eksik!",department:n.department||"Bilinmeyen Departman",difficulty:null!==(t=n.difficulty)&&void 0!==t?t:1,options:n.options||[]}}));i.sort((()=>.5-Math.random()));const r=Math.floor(3*Math.random())+1,s=i.slice(0,r);h(s),f(0),console.log("\u2705 Bug\xfcn\xfcn senaryolar\u0131:",s)}catch(v){console.error("\ud83d\udd25 Senaryo y\xfckleme hatas\u0131:",v)}}else console.log("\u26a0\ufe0f Game Setup veya role yok, senaryo \xe7ekilemez!")},_=async()=>{if(Vv.currentUser)try{const e=mv(Ny(Bv,"userDecisions"),vv("userId","==",Vv.currentUser.uid)),t=(await Dv(e)).docs.map((e=>({id:e.id,userId:e.data().userId,questionId:e.data().questionId,selectedOption:e.data().selectedOption,metrics:e.data().metrics,createdAt:e.data().createdAt})));g(t)}catch(v){console.error("Karar ge\xe7mi\u015fi y\xfckleme hatas\u0131:",v)}},x=async(t,n)=>{if(l&&Vv.currentUser&&r){y(!0);try{const i=u.find((e=>e.id===t));if(!i)return void console.warn("Senaryo bulunamad\u0131, ID:",t);const o=i.options[n];if(!o)return;const a={...r},p={...r};Object.keys(o.effects).forEach((e=>{const t=e;p[t]=Math.min(100,Math.max(0,p[t]+o.effects[t]))})),await(async(e,t)=>{try{const n=Dy(Bv,"users",e);await Pv(n,{metrics:t})}catch(v){throw console.error("Metrik g\xfcncelleme hatas\u0131:",v),v}})(Vv.currentUser.uid,p),await(async e=>{try{await Fv(Ny(Bv,"userDecisions"),{...e,createdAt:Zu.now()})}catch(v){throw console.error("Karar kaydetme hatas\u0131:",v),v}})({userId:Vv.currentUser.uid,questionId:i.id,selectedOption:n,metrics:{before:a,after:p}}),await(async e=>{if(!l||!Vv.currentUser)return;const t=[...l.achievements];if(e.customerSatisfaction>=90&&!t.includes("HAPPY_CUSTOMERS")&&t.push("HAPPY_CUSTOMERS"),e.revenue>=80&&!t.includes("REVENUE_MASTER")&&t.push("REVENUE_MASTER"),e.staffSatisfaction>=85&&!t.includes("STAFF_CHAMPION")&&t.push("STAFF_CHAMPION"),t.length>l.achievements.length){const e=Dy(Bv,"users",Vv.currentUser.uid);await Pv(e,{achievements:t}),c((e=>e?{...e,achievements:t}:null))}})(p),s(p),c((e=>e?{...e,metrics:p}:null));const g=u.length,m=u.filter((e=>e.id!==t));h(m);const y=d+1;f(y),y>=g&&(console.log("\ud83d\udd1a Bug\xfcnk\xfc sorular bitti, yeni g\xfcne (tura) ge\xe7iliyor..."),c((t=>{if(!t)return null;const n=t.completedScenarios+1;return n>=10?(console.log("\u2705 10 tur tamamland\u0131, Oyun bitti! /game-over sayfas\u0131na y\xf6nlendiriliyor..."),e("/game-over"),{...t,completedScenarios:n}):{...t,completedScenarios:n,currentDay:t.currentDay+1}})),await w()),await _()}catch(v){console.error("Karar i\u015fleme hatas\u0131:",v),b("Karar i\u015flenirken hata olu\u015ftu")}finally{y(!1)}}};console.log("\ud83d\udcbe localStorage'dan \xe7ekilen Game Setup:",localStorage.getItem("gameSetup")),console.log("\ud83d\udcbe localStorage'dan \xe7ekilen Game Setup:",localStorage.getItem("gameSetup"));const k=localStorage.getItem("gameSetup");if(console.log("\ud83d\udd0d localStorage'tan gelen Game Setup:",k),(0,i.useEffect)((()=>{(async()=>{y(!0);try{const i=localStorage.getItem("gameSetup");if(!i)return console.warn("\u26a0\ufe0f localStorage'dan 'gameSetup' y\xfcklenemedi!"),void e("/game-setup");const r=JSON.parse(i);if(console.log("\u2705 localStorage'dan Y\xfcklenen Game Setup:",r),!r.hotelType||!r.role)return console.warn("\u26a0\ufe0f Game Setup eksik veya hatal\u0131:",r),void e("/game-setup");n(r),await(async()=>{if(Vv.currentUser)try{const e=await Xv(Vv.currentUser.uid);if(!e)throw new Error("Kullan\u0131c\u0131 verisi bulunamad\u0131");c(e),s(e.metrics)}catch(v){console.error("Kullan\u0131c\u0131 verisi y\xfckleme hatas\u0131:",v)}else e("/")})(),setTimeout((async()=>{console.log("\ud83d\udd25 Oyun verileri y\xfckleniyor..."),await(async()=>{if(null!==t&&void 0!==t&&t.hotelType){console.log(`\ud83c\udfe8 Otel metrikleri y\xfckleniyor: ${t.hotelType}`);try{const e=Dy(Bv,"hotelMetrics",t.hotelType),n=await Mv(e);n.exists()?(console.log("\u2705 Otel metrikleri bulundu:",n.data()),s(n.data().metrics)):console.error("\u274c Otel metrikleri bulunamad\u0131!")}catch(v){console.error("\ud83d\udd25 Otel metrikleri y\xfcklenirken hata olu\u015ftu:",v)}}else console.warn("\u26a0\ufe0f Otel tipi tan\u0131mlanmam\u0131\u015f.")})(),await _()}),400)}catch(v){console.error("\u274c Dashboard ba\u015flatma hatas\u0131:",v),b("Oyun y\xfcklenirken bir hata olu\u015ftu.")}finally{y(!1)}})()}),[]),(0,i.useEffect)((()=>{t&&t.role&&(async()=>{await w()})()}),[t]),(0,i.useEffect)((()=>{if(l&&l.lastLoginDate)try{const e=l.lastLoginDate.toDate(),t=new Date;if((e.getDate()!==t.getDate()||e.getMonth()!==t.getMonth()||e.getFullYear()!==t.getFullYear())&&Vv.currentUser){Pv(Dy(Bv,"users",Vv.currentUser.uid),{lastLoginDate:new Xy("serverTimestamp")}).catch(console.error)}}catch(v){console.error("Tarih kontrol\xfc hatas\u0131:",v)}}),[l]),m)return(0,$v.jsx)("div",{style:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",background:"#f5f7fa"},children:(0,$v.jsxs)("div",{style:{textAlign:"center"},children:[(0,$v.jsx)("h2",{style:{color:"#1e3c72"},children:"Oyun Y\xfckleniyor..."}),(0,$v.jsx)("p",{style:{color:"#666"},children:"L\xfctfen bekleyin"})]})});if(v)return(0,$v.jsx)("div",{style:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",background:"#f5f7fa"},children:(0,$v.jsxs)("div",{style:{textAlign:"center",color:"#dc3545"},children:[(0,$v.jsx)("h2",{children:"Hata Olu\u015ftu"}),(0,$v.jsx)("p",{children:v}),(0,$v.jsx)("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",background:"#1e3c72",color:"white",border:"none",borderRadius:"5px",marginTop:"20px",cursor:"pointer"},children:"Tekrar Dene"})]})});const S={labels:["Gelir","M\xfc\u015fteri Memnuniyeti","Personel Memnuniyeti","Doluluk Oran\u0131","S\xfcrd\xfcr\xfclebilirlik"],datasets:[{data:r?[r.revenue,r.customerSatisfaction,r.staffSatisfaction,r.occupancyRate,r.sustainability]:[],backgroundColor:["#2196f3","#4caf50","#ff9800","#f44336","#9c27b0"],borderWidth:1}]},E=e=>e>=80?"#28a745":e>=60?"#2193b0":e>=40?"#ffc107":"#dc3545",T=e=>{let{label:t,value:n}=e;return(0,$v.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,$v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[(0,$v.jsx)("span",{style:{color:"#666"},children:t}),(0,$v.jsxs)("span",{style:{color:E(n),fontWeight:"bold"},children:[n,"%"]})]}),(0,$v.jsx)("div",{style:{height:"8px",background:"#e9ecef",borderRadius:"4px",overflow:"hidden"},children:(0,$v.jsx)("div",{style:{width:`${n}%`,height:"100%",background:E(n),borderRadius:"4px",transition:"width 0.3s ease"}})})]})};return(0,$v.jsx)("div",{style:{minHeight:"100vh",background:"#f5f7fa",padding:"20px"},children:(0,$v.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[(0,$v.jsxs)("div",{style:{background:"white",padding:"20px",borderRadius:"12px",marginBottom:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,$v.jsxs)("div",{children:[(0,$v.jsx)("h2",{style:{color:"#1e3c72",marginBottom:"5px"},children:"5_star"===(null===t||void 0===t?void 0:t.hotelType)?"5 Y\u0131ld\u0131zl\u0131 Otel":"boutique"===(null===t||void 0===t?void 0:t.hotelType)?"Butik Otel":"Tatil K\xf6y\xfc"}),(0,$v.jsx)("p",{style:{color:"#666"},children:"reservation"===(null===t||void 0===t?void 0:t.role)?"Rezervasyon M\xfcd\xfcr\xfc":"customer_relations"===(null===t||void 0===t?void 0:t.role)?"M\xfc\u015fteri \u0130li\u015fkileri Y\xf6neticisi":"operations"===(null===t||void 0===t?void 0:t.role)?"Operasyon M\xfcd\xfcr\xfc":"financial"===(null===t||void 0===t?void 0:t.role)?"Gelir Y\xf6neticisi":"Personel M\xfcd\xfcr\xfc"})]}),(0,$v.jsx)("button",{onClick:()=>{localStorage.removeItem("userData"),e("/game-setup")},style:{padding:"8px 16px",background:"#dc3545",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Oyundan \xc7\u0131k"})]}),(0,$v.jsxs)("div",{style:{background:"white",padding:"20px",borderRadius:"12px",marginBottom:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,$v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[(0,$v.jsx)("span",{style:{color:"#1e3c72",fontWeight:"bold"},children:"Oyun \u0130lerlemesi"}),(0,$v.jsxs)("span",{style:{color:"#666"},children:[(null===l||void 0===l?void 0:l.completedScenarios)||0,"/10 Senaryo"]})]}),(0,$v.jsx)("div",{style:{height:"8px",background:"#e9ecef",borderRadius:"4px",overflow:"hidden"},children:(0,$v.jsx)("div",{style:{width:((null===l||void 0===l?void 0:l.completedScenarios)||0)/10*100+"%",height:"100%",background:"linear-gradient(90deg, #2193b0, #6dd5ed)",borderRadius:"4px",transition:"width 0.3s ease"}})})]}),(0,$v.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",marginBottom:"20px"},children:[(0,$v.jsxs)("div",{style:{background:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,$v.jsx)("h3",{style:{marginBottom:"20px",color:"#1e3c72"},children:"Otel Metrikleri"}),r&&(0,$v.jsxs)($v.Fragment,{children:[(0,$v.jsx)(T,{label:"Gelir",value:r.revenue}),(0,$v.jsx)(T,{label:"M\xfc\u015fteri Memnuniyeti",value:r.customerSatisfaction}),(0,$v.jsx)(T,{label:"Personel Memnuniyeti",value:r.staffSatisfaction}),(0,$v.jsx)(T,{label:"Doluluk Oran\u0131",value:r.occupancyRate}),(0,$v.jsx)(T,{label:"S\xfcrd\xfcr\xfclebilirlik",value:r.sustainability})]})]}),(0,$v.jsxs)("div",{style:{background:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",border:"2px solid #e3f2fd"},children:[(0,$v.jsx)("h3",{style:{color:"#1e3c72",marginBottom:"20px",fontSize:"1.5em",borderBottom:"2px solid #e3f2fd",paddingBottom:"10px"},children:"\ud83c\udfaf Bug\xfcn\xfcn Sorular\u0131"}),u.length>0?u.map(((e,t)=>(0,$v.jsxs)("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[(0,$v.jsxs)("p",{style:{fontSize:"1.1em",color:"#2c3e50",marginBottom:"15px",lineHeight:"1.5",fontWeight:"bold"},children:["Senaryo #",t+1," (Zorluk:",1===e.difficulty?"Kolay":2===e.difficulty?"Orta":"Zor",")"]}),(0,$v.jsx)("p",{style:{marginBottom:"10px"},children:e.text}),(0,$v.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:e.options.map(((t,n)=>(0,$v.jsxs)("button",{onClick:()=>x(e.id,n),disabled:m,style:{padding:"15px",background:"white",border:"2px solid #e3f2fd",borderRadius:"8px",cursor:m?"not-allowed":"pointer",textAlign:"left",transition:"all 0.3s ease"},children:[(0,$v.jsx)("div",{style:{marginBottom:"8px"},children:t.text}),(0,$v.jsx)("div",{style:{display:"flex",gap:"10px",fontSize:"0.9em",color:"#666"},children:Object.entries(t.effects).map((e=>{let[t,n]=e;return(0,$v.jsxs)("span",{children:["revenue"===t?"\ud83d\udcb0":"customerSatisfaction"===t?"\ud83d\ude0a":"staffSatisfaction"===t?"\ud83d\udc65":"occupancyRate"===t?"\ud83c\udfe8":"\u267b\ufe0f",n>0?"+":"",n,"%"]},t)}))})]},n)))})]},e.id))):(0,$v.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"#666"},children:"Bug\xfcn i\xe7in senaryo yok."})]}),(0,$v.jsxs)("div",{style:{background:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,$v.jsx)("h3",{style:{marginBottom:"20px",color:"#1e3c72"},children:"Otel Metrik Grafi\u011fi"}),(0,$v.jsx)("div",{onClick:()=>a(!0),style:{cursor:"pointer",width:"100%",maxWidth:"300px"},children:(0,$v.jsx)(OS,{data:S})}),(0,$v.jsx)("p",{style:{fontSize:"0.8em",color:"#888",marginTop:"10px"},children:"Grafi\u011fi b\xfcy\xfctmek i\xe7in \xfczerine t\u0131klay\u0131n\u0131z."})]})]}),(0,$v.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px"},children:[(0,$v.jsxs)("div",{style:{background:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",maxHeight:"400px",overflowY:"auto"},children:[(0,$v.jsx)("h3",{style:{color:"#1e3c72",marginBottom:"20px",borderBottom:"2px solid #e3f2fd",paddingBottom:"10px"},children:"\ud83d\udcdc Karar Ge\xe7mi\u015fi"}),p.length>0?p.map(((e,t)=>(0,$v.jsxs)("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"10px"},children:[(0,$v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[(0,$v.jsxs)("strong",{style:{color:"#1e3c72"},children:["Senaryo #",e.questionId]}),(0,$v.jsx)("span",{style:{color:"#666",fontSize:"0.9em"},children:e.createdAt.toDate().toLocaleDateString()})]}),(0,$v.jsxs)("p",{style:{margin:"5px 0",color:"#2c3e50"},children:["Se\xe7ilen Opsiyon: ",e.selectedOption+1]}),(0,$v.jsx)("div",{style:{marginTop:"5px",fontSize:"0.9em"},children:Object.entries(e.metrics.after).map((t=>{let[n,i]=t;return(0,$v.jsxs)("span",{style:{marginRight:"10px",color:i>e.metrics.before[n]?"#28a745":"#dc3545"},children:[n,": ",i,"%"]},n)}))})]},t))):(0,$v.jsx)("p",{style:{textAlign:"center",color:"#666"},children:"Hen\xfcz karar ge\xe7mi\u015fi bulunmuyor."})]}),(0,$v.jsxs)("div",{style:{background:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,$v.jsx)("h3",{style:{color:"#1e3c72",marginBottom:"20px",borderBottom:"2px solid #e3f2fd",paddingBottom:"10px"},children:"\ud83c\udfc6 Ba\u015far\u0131mlar"}),(0,$v.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"15px"},children:["HAPPY_CUSTOMERS","REVENUE_MASTER","STAFF_CHAMPION","FIRST_DECISION"].map((e=>{const t=(e=>({HAPPY_CUSTOMERS:{icon:"\ud83d\ude0a",name:"Mutlu M\xfc\u015fteriler",desc:"M\xfc\u015fteri memnuniyeti %90'a ula\u015ft\u0131"},REVENUE_MASTER:{icon:"\ud83d\udcb0",name:"Gelir Ustas\u0131",desc:"Gelir %80 seviyesine ula\u015ft\u0131"},STAFF_CHAMPION:{icon:"\ud83d\udc65",name:"Personel \u015eampiyonu",desc:"Personel memnuniyeti %85 seviyesine ula\u015ft\u0131"},FIRST_DECISION:{icon:"\u2b50",name:"\u0130lk Karar",desc:"\u0130lk karar\u0131n\u0131z\u0131 verdiniz!"}}[e]||{icon:"\ud83c\udfc6",name:"Bilinmeyen Ba\u015far\u0131m",desc:"Bilgi bulunamad\u0131"}))(e),n=null===l||void 0===l?void 0:l.achievements.includes(e);return(0,$v.jsxs)("div",{style:{padding:"15px",background:n?"#d1f7c4":"#f8d7da",borderRadius:"8px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,$v.jsx)("span",{style:{fontSize:"2em"},children:t.icon}),(0,$v.jsx)("strong",{style:{marginTop:"10px",color:"#333"},children:t.name}),(0,$v.jsx)("small",{style:{color:"#666",fontSize:"0.9em"},children:t.desc})]},e)}))})]})]}),o&&(0,$v.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999},children:(0,$v.jsxs)("div",{style:{background:"white",borderRadius:"12px",padding:"20px",maxWidth:"600px",width:"90%",textAlign:"center",position:"relative"},children:[(0,$v.jsx)("h2",{style:{color:"#1e3c72",marginBottom:"20px"},children:"Metrikler Grafi\u011fi"}),(0,$v.jsx)(OS,{data:S}),(0,$v.jsx)("button",{onClick:()=>a(!1),style:{marginTop:"20px",padding:"8px 16px",background:"#dc3545",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Kapat"})]})})]})})},LS=()=>{const e=ee(),[t,n]=(0,i.useState)(null),[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)("Rapor haz\u0131rlan\u0131yor..."),[l,c]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{(async()=>{if(Vv.currentUser){c(!0);try{var t,i,r,o,l,u;const e=Vv.currentUser.uid,c=await Xv(e);n(null!==(t=null===c||void 0===c?void 0:c.metrics)&&void 0!==t?t:null);const h=await(async e=>{try{const t=mv(Ny(Bv,"userDecisions"),vv("userId","==",e));return(await Dv(t)).docs.map((e=>({id:e.id,userId:e.data().userId,questionId:e.data().questionId,selectedOption:e.data().selectedOption,metrics:e.data().metrics,createdAt:e.data().createdAt})))}catch(t){throw console.error("Karar ge\xe7mi\u015fi y\xfckleme hatas\u0131:",t),t}})(e);s(h||[]);const d=`\nSay\u0131n kullan\u0131c\u0131,\nTebrikler! 10 turu ba\u015far\u0131yla tamamlad\u0131n\u0131z.\n\nSon metrikleriniz:\n- Gelir: ${null===c||void 0===c||null===(i=c.metrics)||void 0===i?void 0:i.revenue}\n- M\xfc\u015fteri Memnuniyeti: ${null===c||void 0===c||null===(r=c.metrics)||void 0===r?void 0:r.customerSatisfaction}\n- Personel Memnuniyeti: ${null===c||void 0===c||null===(o=c.metrics)||void 0===o?void 0:o.staffSatisfaction}\n- Doluluk Oran\u0131: ${null===c||void 0===c||null===(l=c.metrics)||void 0===l?void 0:l.occupancyRate}\n- S\xfcrd\xfcr\xfclebilirlik: ${null===c||void 0===c||null===(u=c.metrics)||void 0===u?void 0:u.sustainability}\n\nToplam karar say\u0131s\u0131: ${h.length}\nKararlar\u0131n\u0131z:\n${h.map((e=>`Soru: ${e.questionId}, Se\xe7ilen Opsiyon: ${e.selectedOption}`)).join("\n")}\n`;a(d)}catch(h){console.error("Oyun biti\u015f verileri \xe7ekilirken hata olu\u015ftu:",h)}finally{c(!1)}}else e("/")})()}),[e]),l?(0,$v.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#f5f7fa"},children:[(0,$v.jsx)("h2",{style:{color:"#1e3c72",marginBottom:"20px"},children:"Oyun Bitti"}),(0,$v.jsx)("p",{style:{color:"#666",fontSize:"1.1em"},children:"Rapor haz\u0131rlan\u0131yor, l\xfctfen bekleyin..."})]}):(0,$v.jsxs)("div",{style:{minHeight:"100vh",background:"#f5f7fa",display:"flex",flexDirection:"column",alignItems:"center",padding:"40px"},children:[(0,$v.jsx)("h2",{style:{color:"#1e3c72",marginBottom:"20px"},children:"Oyun Bitti"}),(0,$v.jsx)("p",{style:{color:"#666",fontSize:"1.1em",marginBottom:"30px"},children:"10 turu ba\u015far\u0131yla tamamlad\u0131n\u0131z! Raporunuz a\u015fa\u011f\u0131da haz\u0131rlanm\u0131\u015ft\u0131r:"}),(0,$v.jsx)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",maxWidth:"600px",width:"100%",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",marginBottom:"20px"},children:(0,$v.jsx)("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"inherit"},children:o})}),(0,$v.jsx)("button",{onClick:()=>e("/"),style:{padding:"10px 20px",background:"#1e3c72",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Ana Men\xfcye D\xf6n"})]})};const FS=function(){return(0,$v.jsxs)(ye,{children:[(0,$v.jsx)(ge,{path:"/admin",element:(0,$v.jsx)(Hv,{})}),(0,$v.jsx)(ge,{path:"/admin/dashboard",element:(0,$v.jsx)(Yv,{})}),(0,$v.jsx)(ge,{path:"/",element:(0,$v.jsx)(Qv,{})}),(0,$v.jsx)(ge,{path:"/game-setup",element:(0,$v.jsx)(Jv,{})}),(0,$v.jsx)(ge,{path:"/game-dashboard",element:(0,$v.jsx)(PS,{})}),(0,$v.jsx)(ge,{path:"/game-over",element:(0,$v.jsx)(LS,{})})]})};r.createRoot(document.getElementById("root")).render((0,$v.jsx)(i.StrictMode,{children:(0,$v.jsx)(Xe,{children:(0,$v.jsx)(FS,{})})}))})();
//# sourceMappingURL=main.ce47ca06.js.map